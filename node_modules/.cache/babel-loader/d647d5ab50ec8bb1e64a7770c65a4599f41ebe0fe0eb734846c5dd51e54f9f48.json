{"ast":null,"code":"import { isInvisiblySmallElement } from \"./sizeHelpers\";\nimport { isLinearElementType } from \"./typeChecks\";\nexport { newElement, newTextElement, updateTextElement, refreshTextDimensions, newLinearElement, newImageElement, duplicateElement } from \"./newElement\";\nexport { getElementAbsoluteCoords, getElementBounds, getCommonBounds, getDiamondPoints, getArrowheadPoints, getClosestElementBounds } from \"./bounds\";\nexport { OMIT_SIDES_FOR_MULTIPLE_ELEMENTS, getTransformHandlesFromCoords, getTransformHandles } from \"./transformHandles\";\nexport { hitTest, isHittingElementBoundingBoxWithoutHittingElement } from \"./collision\";\nexport { resizeTest, getCursorForResizingElement, getElementWithTransformHandleType, getTransformHandleTypeFromCoords } from \"./resizeTest\";\nexport { transformElements, getResizeOffsetXY, getResizeArrowDirection } from \"./resizeElements\";\nexport { dragSelectedElements, getDragOffsetXY, dragNewElement } from \"./dragElements\";\nexport { isTextElement, isExcalidrawElement, isFrameElement } from \"./typeChecks\";\nexport { textWysiwyg } from \"./textWysiwyg\";\nexport { redrawTextBoundingBox } from \"./textElement\";\nexport { getPerfectElementSize, getLockedLinearCursorAlignSize, isInvisiblySmallElement, resizePerfectLineForNWHandler, getNormalizedDimensions } from \"./sizeHelpers\";\nexport { showSelectedShapeActions } from \"./showSelectedShapeActions\";\nexport const getSceneVersion = elements => elements.reduce((acc, el) => acc + el.version, 0);\nexport const getVisibleElements = elements => elements.filter(el => !el.isDeleted && !isInvisiblySmallElement(el));\nexport const getNonDeletedElements = elements => elements.filter(element => !element.isDeleted);\nexport const getNonDeletedFrames = frames => frames.filter(frame => !frame.isDeleted);\nexport const isNonDeletedElement = element => !element.isDeleted;\nconst _clearElements = elements => getNonDeletedElements(elements).map(element => isLinearElementType(element.type) ? {\n  ...element,\n  lastCommittedPoint: null\n} : element);\nexport const clearElementsForDatabase = elements => _clearElements(elements);\nexport const clearElementsForExport = elements => _clearElements(elements);\nexport const clearElementsForLocalStorage = elements => _clearElements(elements);","map":{"version":3,"names":["isInvisiblySmallElement","isLinearElementType","newElement","newTextElement","updateTextElement","refreshTextDimensions","newLinearElement","newImageElement","duplicateElement","getElementAbsoluteCoords","getElementBounds","getCommonBounds","getDiamondPoints","getArrowheadPoints","getClosestElementBounds","OMIT_SIDES_FOR_MULTIPLE_ELEMENTS","getTransformHandlesFromCoords","getTransformHandles","hitTest","isHittingElementBoundingBoxWithoutHittingElement","resizeTest","getCursorForResizingElement","getElementWithTransformHandleType","getTransformHandleTypeFromCoords","transformElements","getResizeOffsetXY","getResizeArrowDirection","dragSelectedElements","getDragOffsetXY","dragNewElement","isTextElement","isExcalidrawElement","isFrameElement","textWysiwyg","redrawTextBoundingBox","getPerfectElementSize","getLockedLinearCursorAlignSize","resizePerfectLineForNWHandler","getNormalizedDimensions","showSelectedShapeActions","getSceneVersion","elements","reduce","acc","el","version","getVisibleElements","filter","isDeleted","getNonDeletedElements","element","getNonDeletedFrames","frames","frame","isNonDeletedElement","_clearElements","map","type","lastCommittedPoint","clearElementsForDatabase","clearElementsForExport","clearElementsForLocalStorage"],"sources":["D:/project/excalidraw-cn/src/element/index.ts"],"sourcesContent":["import {\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n  NonDeleted,\n  ExcalidrawFrameElement,\n} from \"./types\";\nimport { isInvisiblySmallElement } from \"./sizeHelpers\";\nimport { isLinearElementType } from \"./typeChecks\";\n\nexport {\n  newElement,\n  newTextElement,\n  updateTextElement,\n  refreshTextDimensions,\n  newLinearElement,\n  newImageElement,\n  duplicateElement,\n} from \"./newElement\";\nexport {\n  getElementAbsoluteCoords,\n  getElementBounds,\n  getCommonBounds,\n  getDiamondPoints,\n  getArrowheadPoints,\n  getClosestElementBounds,\n} from \"./bounds\";\n\nexport {\n  OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,\n  getTransformHandlesFromCoords,\n  getTransformHandles,\n} from \"./transformHandles\";\nexport {\n  hitTest,\n  isHittingElementBoundingBoxWithoutHittingElement,\n} from \"./collision\";\nexport {\n  resizeTest,\n  getCursorForResizingElement,\n  getElementWithTransformHandleType,\n  getTransformHandleTypeFromCoords,\n} from \"./resizeTest\";\nexport {\n  transformElements,\n  getResizeOffsetXY,\n  getResizeArrowDirection,\n} from \"./resizeElements\";\nexport {\n  dragSelectedElements,\n  getDragOffsetXY,\n  dragNewElement,\n} from \"./dragElements\";\nexport {\n  isTextElement,\n  isExcalidrawElement,\n  isFrameElement,\n} from \"./typeChecks\";\nexport { textWysiwyg } from \"./textWysiwyg\";\nexport { redrawTextBoundingBox } from \"./textElement\";\nexport {\n  getPerfectElementSize,\n  getLockedLinearCursorAlignSize,\n  isInvisiblySmallElement,\n  resizePerfectLineForNWHandler,\n  getNormalizedDimensions,\n} from \"./sizeHelpers\";\nexport { showSelectedShapeActions } from \"./showSelectedShapeActions\";\n\nexport const getSceneVersion = (elements: readonly ExcalidrawElement[]) =>\n  elements.reduce((acc, el) => acc + el.version, 0);\n\nexport const getVisibleElements = (elements: readonly ExcalidrawElement[]) =>\n  elements.filter(\n    (el) => !el.isDeleted && !isInvisiblySmallElement(el),\n  ) as readonly NonDeletedExcalidrawElement[];\n\nexport const getNonDeletedElements = (elements: readonly ExcalidrawElement[]) =>\n  elements.filter(\n    (element) => !element.isDeleted,\n  ) as readonly NonDeletedExcalidrawElement[];\n\nexport const getNonDeletedFrames = (\n  frames: readonly ExcalidrawFrameElement[],\n) =>\n  frames.filter(\n    (frame) => !frame.isDeleted,\n  ) as readonly NonDeleted<ExcalidrawFrameElement>[];\n\nexport const isNonDeletedElement = <T extends ExcalidrawElement>(\n  element: T,\n): element is NonDeleted<T> => !element.isDeleted;\n\nconst _clearElements = (\n  elements: readonly ExcalidrawElement[],\n): ExcalidrawElement[] =>\n  getNonDeletedElements(elements).map((element) =>\n    isLinearElementType(element.type)\n      ? { ...element, lastCommittedPoint: null }\n      : element,\n  );\n\nexport const clearElementsForDatabase = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n\nexport const clearElementsForExport = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n\nexport const clearElementsForLocalStorage = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n"],"mappings":"AAMA,SAASA,uBAAuB,QAAQ,eAAe;AACvD,SAASC,mBAAmB,QAAQ,cAAc;AAElD,SACEC,UAAU,EACVC,cAAc,EACdC,iBAAiB,EACjBC,qBAAqB,EACrBC,gBAAgB,EAChBC,eAAe,EACfC,gBAAgB,QACX,cAAc;AACrB,SACEC,wBAAwB,EACxBC,gBAAgB,EAChBC,eAAe,EACfC,gBAAgB,EAChBC,kBAAkB,EAClBC,uBAAuB,QAClB,UAAU;AAEjB,SACEC,gCAAgC,EAChCC,6BAA6B,EAC7BC,mBAAmB,QACd,oBAAoB;AAC3B,SACEC,OAAO,EACPC,gDAAgD,QAC3C,aAAa;AACpB,SACEC,UAAU,EACVC,2BAA2B,EAC3BC,iCAAiC,EACjCC,gCAAgC,QAC3B,cAAc;AACrB,SACEC,iBAAiB,EACjBC,iBAAiB,EACjBC,uBAAuB,QAClB,kBAAkB;AACzB,SACEC,oBAAoB,EACpBC,eAAe,EACfC,cAAc,QACT,gBAAgB;AACvB,SACEC,aAAa,EACbC,mBAAmB,EACnBC,cAAc,QACT,cAAc;AACrB,SAASC,WAAW,QAAQ,eAAe;AAC3C,SAASC,qBAAqB,QAAQ,eAAe;AACrD,SACEC,qBAAqB,EACrBC,8BAA8B,EAC9BpC,uBAAuB,EACvBqC,6BAA6B,EAC7BC,uBAAuB,QAClB,eAAe;AACtB,SAASC,wBAAwB,QAAQ,4BAA4B;AAErE,OAAO,MAAMC,eAAe,GAAIC,QAAsC,IACpEA,QAAQ,CAACC,MAAM,CAAC,CAACC,GAAG,EAAEC,EAAE,KAAKD,GAAG,GAAGC,EAAE,CAACC,OAAO,EAAE,CAAC,CAAC;AAEnD,OAAO,MAAMC,kBAAkB,GAAIL,QAAsC,IACvEA,QAAQ,CAACM,MAAM,CACZH,EAAE,IAAK,CAACA,EAAE,CAACI,SAAS,IAAI,CAAChD,uBAAuB,CAAC4C,EAAE,CAAC,CACZ;AAE7C,OAAO,MAAMK,qBAAqB,GAAIR,QAAsC,IAC1EA,QAAQ,CAACM,MAAM,CACZG,OAAO,IAAK,CAACA,OAAO,CAACF,SAAS,CACU;AAE7C,OAAO,MAAMG,mBAAmB,GAC9BC,MAAyC,IAEzCA,MAAM,CAACL,MAAM,CACVM,KAAK,IAAK,CAACA,KAAK,CAACL,SAAS,CACqB;AAEpD,OAAO,MAAMM,mBAAmB,GAC9BJ,OAAU,IACmB,CAACA,OAAO,CAACF,SAAS;AAEjD,MAAMO,cAAc,GAClBd,QAAsC,IAEtCQ,qBAAqB,CAACR,QAAQ,CAAC,CAACe,GAAG,CAAEN,OAAO,IAC1CjD,mBAAmB,CAACiD,OAAO,CAACO,IAAI,CAAC,GAC7B;EAAE,GAAGP,OAAO;EAAEQ,kBAAkB,EAAE;AAAK,CAAC,GACxCR,OAAO,CACZ;AAEH,OAAO,MAAMS,wBAAwB,GACnClB,QAAsC,IACnCc,cAAc,CAACd,QAAQ,CAAC;AAE7B,OAAO,MAAMmB,sBAAsB,GACjCnB,QAAsC,IACnCc,cAAc,CAACd,QAAQ,CAAC;AAE7B,OAAO,MAAMoB,4BAA4B,GACvCpB,QAAsC,IACnCc,cAAc,CAACd,QAAQ,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}