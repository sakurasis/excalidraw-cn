{"ast":null,"code":"import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import clsx from\"clsx\";import{useAtom}from\"jotai\";import{useEffect,useRef}from\"react\";import{activeColorPickerSectionAtom,colorPickerHotkeyBindings,getColorNameAndShadeFromColor}from\"./colorPickerUtils\";import HotkeyLabel from\"./HotkeyLabel\";import{t}from\"../../i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var PickerColorList=function PickerColorList(_ref){var palette=_ref.palette,color=_ref.color,onChange=_ref.onChange,label=_ref.label,activeShade=_ref.activeShade;var colorObj=getColorNameAndShadeFromColor({color:color||\"transparent\",palette:palette});var _useAtom=useAtom(activeColorPickerSectionAtom),_useAtom2=_slicedToArray(_useAtom,2),activeColorPickerSection=_useAtom2[0],setActiveColorPickerSection=_useAtom2[1];var btnRef=useRef(null);useEffect(function(){if(btnRef.current&&activeColorPickerSection===\"baseColors\"){btnRef.current.focus();}},[colorObj===null||colorObj===void 0?void 0:colorObj.colorName,activeColorPickerSection]);return/*#__PURE__*/_jsx(\"div\",{className:\"color-picker-content--default\",children:Object.entries(palette).map(function(_ref2,index){var _ref3=_slicedToArray(_ref2,2),key=_ref3[0],value=_ref3[1];var color=(Array.isArray(value)?value[activeShade]:value)||\"transparent\";var keybinding=colorPickerHotkeyBindings[index];var label=t(\"colors.\".concat(key.replace(/\\d+/,\"\")),null,\"\");return/*#__PURE__*/_jsxs(\"button\",{ref:(colorObj===null||colorObj===void 0?void 0:colorObj.colorName)===key?btnRef:undefined,tabIndex:-1,type:\"button\",className:clsx(\"color-picker__button color-picker__button--large\",{active:(colorObj===null||colorObj===void 0?void 0:colorObj.colorName)===key,\"is-transparent\":color===\"transparent\"||!color}),onClick:function onClick(){onChange(color);setActiveColorPickerSection(\"baseColors\");},title:\"\".concat(label).concat(color.startsWith(\"#\")?\" \".concat(color):\"\",\" \\u2014 \").concat(keybinding),\"aria-label\":\"\".concat(label,\" \\u2014 \").concat(keybinding),style:color?{\"--swatch-color\":color}:undefined,\"data-testid\":\"color-\".concat(key),children:[/*#__PURE__*/_jsx(\"div\",{className:\"color-picker__button-outline\"}),/*#__PURE__*/_jsx(HotkeyLabel,{color:color,keyLabel:keybinding})]},key);})});};export default PickerColorList;","map":{"version":3,"names":["clsx","useAtom","useEffect","useRef","activeColorPickerSectionAtom","colorPickerHotkeyBindings","getColorNameAndShadeFromColor","HotkeyLabel","t","jsx","_jsx","jsxs","_jsxs","PickerColorList","_ref","palette","color","onChange","label","activeShade","colorObj","_useAtom","_useAtom2","_slicedToArray","activeColorPickerSection","setActiveColorPickerSection","btnRef","current","focus","colorName","className","children","Object","entries","map","_ref2","index","_ref3","key","value","Array","isArray","keybinding","concat","replace","ref","undefined","tabIndex","type","active","onClick","title","startsWith","style","keyLabel"],"sources":["D:/project/excalidraw-cn/src/components/ColorPicker/PickerColorList.tsx"],"sourcesContent":["import clsx from \"clsx\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport {\n  activeColorPickerSectionAtom,\n  colorPickerHotkeyBindings,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport { ColorPaletteCustom } from \"../../colors\";\nimport { t } from \"../../i18n\";\n\ninterface PickerColorListProps {\n  palette: ColorPaletteCustom;\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n  activeShade: number;\n}\n\nconst PickerColorList = ({\n  palette,\n  color,\n  onChange,\n  label,\n  activeShade,\n}: PickerColorListProps) => {\n  const colorObj = getColorNameAndShadeFromColor({\n    color: color || \"transparent\",\n    palette,\n  });\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"baseColors\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj?.colorName, activeColorPickerSection]);\n\n  return (\n    <div className=\"color-picker-content--default\">\n      {Object.entries(palette).map(([key, value], index) => {\n        const color =\n          (Array.isArray(value) ? value[activeShade] : value) || \"transparent\";\n\n        const keybinding = colorPickerHotkeyBindings[index];\n        const label = t(`colors.${key.replace(/\\d+/, \"\")}`, null, \"\");\n\n        return (\n          <button\n            ref={colorObj?.colorName === key ? btnRef : undefined}\n            tabIndex={-1}\n            type=\"button\"\n            className={clsx(\n              \"color-picker__button color-picker__button--large\",\n              {\n                active: colorObj?.colorName === key,\n                \"is-transparent\": color === \"transparent\" || !color,\n              },\n            )}\n            onClick={() => {\n              onChange(color);\n              setActiveColorPickerSection(\"baseColors\");\n            }}\n            title={`${label}${\n              color.startsWith(\"#\") ? ` ${color}` : \"\"\n            } — ${keybinding}`}\n            aria-label={`${label} — ${keybinding}`}\n            style={color ? { \"--swatch-color\": color } : undefined}\n            data-testid={`color-${key}`}\n            key={key}\n          >\n            <div className=\"color-picker__button-outline\" />\n            <HotkeyLabel color={color} keyLabel={keybinding} />\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PickerColorList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}