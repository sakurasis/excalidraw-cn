{"ast":null,"code":"import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{isInvisiblySmallElement}from\"./sizeHelpers\";import{isLinearElementType}from\"./typeChecks\";export{newElement,newTextElement,updateTextElement,refreshTextDimensions,newLinearElement,newImageElement,duplicateElement}from\"./newElement\";export{getElementAbsoluteCoords,getElementBounds,getCommonBounds,getDiamondPoints,getArrowheadPoints,getClosestElementBounds}from\"./bounds\";export{OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,getTransformHandlesFromCoords,getTransformHandles}from\"./transformHandles\";export{hitTest,isHittingElementBoundingBoxWithoutHittingElement}from\"./collision\";export{resizeTest,getCursorForResizingElement,getElementWithTransformHandleType,getTransformHandleTypeFromCoords}from\"./resizeTest\";export{transformElements,getResizeOffsetXY,getResizeArrowDirection}from\"./resizeElements\";export{dragSelectedElements,getDragOffsetXY,dragNewElement}from\"./dragElements\";export{isTextElement,isExcalidrawElement,isFrameElement}from\"./typeChecks\";export{textWysiwyg}from\"./textWysiwyg\";export{redrawTextBoundingBox}from\"./textElement\";export{getPerfectElementSize,getLockedLinearCursorAlignSize,isInvisiblySmallElement,resizePerfectLineForNWHandler,getNormalizedDimensions}from\"./sizeHelpers\";export{showSelectedShapeActions}from\"./showSelectedShapeActions\";export var getSceneVersion=function getSceneVersion(elements){return elements.reduce(function(acc,el){return acc+el.version;},0);};export var getVisibleElements=function getVisibleElements(elements){return elements.filter(function(el){return!el.isDeleted&&!isInvisiblySmallElement(el);});};export var getNonDeletedElements=function getNonDeletedElements(elements){return elements.filter(function(element){return!element.isDeleted;});};export var getNonDeletedFrames=function getNonDeletedFrames(frames){return frames.filter(function(frame){return!frame.isDeleted;});};export var isNonDeletedElement=function isNonDeletedElement(element){return!element.isDeleted;};var _clearElements=function _clearElements(elements){return getNonDeletedElements(elements).map(function(element){return isLinearElementType(element.type)?_objectSpread(_objectSpread({},element),{},{lastCommittedPoint:null}):element;});};export var clearElementsForDatabase=function clearElementsForDatabase(elements){return _clearElements(elements);};export var clearElementsForExport=function clearElementsForExport(elements){return _clearElements(elements);};export var clearElementsForLocalStorage=function clearElementsForLocalStorage(elements){return _clearElements(elements);};","map":{"version":3,"names":["isInvisiblySmallElement","isLinearElementType","newElement","newTextElement","updateTextElement","refreshTextDimensions","newLinearElement","newImageElement","duplicateElement","getElementAbsoluteCoords","getElementBounds","getCommonBounds","getDiamondPoints","getArrowheadPoints","getClosestElementBounds","OMIT_SIDES_FOR_MULTIPLE_ELEMENTS","getTransformHandlesFromCoords","getTransformHandles","hitTest","isHittingElementBoundingBoxWithoutHittingElement","resizeTest","getCursorForResizingElement","getElementWithTransformHandleType","getTransformHandleTypeFromCoords","transformElements","getResizeOffsetXY","getResizeArrowDirection","dragSelectedElements","getDragOffsetXY","dragNewElement","isTextElement","isExcalidrawElement","isFrameElement","textWysiwyg","redrawTextBoundingBox","getPerfectElementSize","getLockedLinearCursorAlignSize","resizePerfectLineForNWHandler","getNormalizedDimensions","showSelectedShapeActions","getSceneVersion","elements","reduce","acc","el","version","getVisibleElements","filter","isDeleted","getNonDeletedElements","element","getNonDeletedFrames","frames","frame","isNonDeletedElement","_clearElements","map","type","_objectSpread","lastCommittedPoint","clearElementsForDatabase","clearElementsForExport","clearElementsForLocalStorage"],"sources":["D:/project/excalidraw-cn/src/element/index.ts"],"sourcesContent":["import {\n  ExcalidrawElement,\n  NonDeletedExcalidrawElement,\n  NonDeleted,\n  ExcalidrawFrameElement,\n} from \"./types\";\nimport { isInvisiblySmallElement } from \"./sizeHelpers\";\nimport { isLinearElementType } from \"./typeChecks\";\n\nexport {\n  newElement,\n  newTextElement,\n  updateTextElement,\n  refreshTextDimensions,\n  newLinearElement,\n  newImageElement,\n  duplicateElement,\n} from \"./newElement\";\nexport {\n  getElementAbsoluteCoords,\n  getElementBounds,\n  getCommonBounds,\n  getDiamondPoints,\n  getArrowheadPoints,\n  getClosestElementBounds,\n} from \"./bounds\";\n\nexport {\n  OMIT_SIDES_FOR_MULTIPLE_ELEMENTS,\n  getTransformHandlesFromCoords,\n  getTransformHandles,\n} from \"./transformHandles\";\nexport {\n  hitTest,\n  isHittingElementBoundingBoxWithoutHittingElement,\n} from \"./collision\";\nexport {\n  resizeTest,\n  getCursorForResizingElement,\n  getElementWithTransformHandleType,\n  getTransformHandleTypeFromCoords,\n} from \"./resizeTest\";\nexport {\n  transformElements,\n  getResizeOffsetXY,\n  getResizeArrowDirection,\n} from \"./resizeElements\";\nexport {\n  dragSelectedElements,\n  getDragOffsetXY,\n  dragNewElement,\n} from \"./dragElements\";\nexport {\n  isTextElement,\n  isExcalidrawElement,\n  isFrameElement,\n} from \"./typeChecks\";\nexport { textWysiwyg } from \"./textWysiwyg\";\nexport { redrawTextBoundingBox } from \"./textElement\";\nexport {\n  getPerfectElementSize,\n  getLockedLinearCursorAlignSize,\n  isInvisiblySmallElement,\n  resizePerfectLineForNWHandler,\n  getNormalizedDimensions,\n} from \"./sizeHelpers\";\nexport { showSelectedShapeActions } from \"./showSelectedShapeActions\";\n\nexport const getSceneVersion = (elements: readonly ExcalidrawElement[]) =>\n  elements.reduce((acc, el) => acc + el.version, 0);\n\nexport const getVisibleElements = (elements: readonly ExcalidrawElement[]) =>\n  elements.filter(\n    (el) => !el.isDeleted && !isInvisiblySmallElement(el),\n  ) as readonly NonDeletedExcalidrawElement[];\n\nexport const getNonDeletedElements = (elements: readonly ExcalidrawElement[]) =>\n  elements.filter(\n    (element) => !element.isDeleted,\n  ) as readonly NonDeletedExcalidrawElement[];\n\nexport const getNonDeletedFrames = (\n  frames: readonly ExcalidrawFrameElement[],\n) =>\n  frames.filter(\n    (frame) => !frame.isDeleted,\n  ) as readonly NonDeleted<ExcalidrawFrameElement>[];\n\nexport const isNonDeletedElement = <T extends ExcalidrawElement>(\n  element: T,\n): element is NonDeleted<T> => !element.isDeleted;\n\nconst _clearElements = (\n  elements: readonly ExcalidrawElement[],\n): ExcalidrawElement[] =>\n  getNonDeletedElements(elements).map((element) =>\n    isLinearElementType(element.type)\n      ? { ...element, lastCommittedPoint: null }\n      : element,\n  );\n\nexport const clearElementsForDatabase = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n\nexport const clearElementsForExport = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n\nexport const clearElementsForLocalStorage = (\n  elements: readonly ExcalidrawElement[],\n) => _clearElements(elements);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}