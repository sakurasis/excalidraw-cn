{"ast":null,"code":"import\"./Modal.scss\";import React from\"react\";import{createPortal}from\"react-dom\";import clsx from\"clsx\";import{KEYS}from\"../keys\";import{useCreatePortalContainer}from\"../hooks/useCreatePortalContainer\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var Modal=function Modal(props){var _props$closeOnClickOu=props.closeOnClickOutside,closeOnClickOutside=_props$closeOnClickOu===void 0?true:_props$closeOnClickOu;var modalRoot=useCreatePortalContainer({className:\"excalidraw-modal-container\"});if(!modalRoot){return null;}var handleKeydown=function handleKeydown(event){if(event.key===KEYS.ESCAPE){event.nativeEvent.stopImmediatePropagation();event.stopPropagation();props.onCloseRequest();}};return/*#__PURE__*/createPortal(/*#__PURE__*/_jsxs(\"div\",{className:clsx(\"Modal\",props.className),role:\"dialog\",\"aria-modal\":\"true\",onKeyDown:handleKeydown,\"aria-labelledby\":props.labelledBy,\"data-prevent-outside-click\":true,children:[/*#__PURE__*/_jsx(\"div\",{className:\"Modal__background\",onClick:closeOnClickOutside?props.onCloseRequest:undefined}),/*#__PURE__*/_jsx(\"div\",{className:\"Modal__content\",style:{\"--max-width\":\"\".concat(props.maxWidth,\"px\")},tabIndex:0,children:props.children})]}),modalRoot);};","map":{"version":3,"names":["React","createPortal","clsx","KEYS","useCreatePortalContainer","jsx","_jsx","jsxs","_jsxs","Modal","props","_props$closeOnClickOu","closeOnClickOutside","modalRoot","className","handleKeydown","event","key","ESCAPE","nativeEvent","stopImmediatePropagation","stopPropagation","onCloseRequest","role","onKeyDown","labelledBy","children","onClick","undefined","style","concat","maxWidth","tabIndex"],"sources":["D:/project/excalidraw-cn/src/components/Modal.tsx"],"sourcesContent":["import \"./Modal.scss\";\n\nimport React from \"react\";\nimport { createPortal } from \"react-dom\";\nimport clsx from \"clsx\";\nimport { KEYS } from \"../keys\";\nimport { AppState } from \"../types\";\nimport { useCreatePortalContainer } from \"../hooks/useCreatePortalContainer\";\n\nexport const Modal: React.FC<{\n  className?: string;\n  children: React.ReactNode;\n  maxWidth?: number;\n  onCloseRequest(): void;\n  labelledBy: string;\n  theme?: AppState[\"theme\"];\n  closeOnClickOutside?: boolean;\n}> = (props) => {\n  const { closeOnClickOutside = true } = props;\n  const modalRoot = useCreatePortalContainer({\n    className: \"excalidraw-modal-container\",\n  });\n\n  if (!modalRoot) {\n    return null;\n  }\n\n  const handleKeydown = (event: React.KeyboardEvent) => {\n    if (event.key === KEYS.ESCAPE) {\n      event.nativeEvent.stopImmediatePropagation();\n      event.stopPropagation();\n      props.onCloseRequest();\n    }\n  };\n\n  return createPortal(\n    <div\n      className={clsx(\"Modal\", props.className)}\n      role=\"dialog\"\n      aria-modal=\"true\"\n      onKeyDown={handleKeydown}\n      aria-labelledby={props.labelledBy}\n      data-prevent-outside-click\n    >\n      <div\n        className=\"Modal__background\"\n        onClick={closeOnClickOutside ? props.onCloseRequest : undefined}\n      />\n      <div\n        className=\"Modal__content\"\n        style={{ \"--max-width\": `${props.maxWidth}px` }}\n        tabIndex={0}\n      >\n        {props.children}\n      </div>\n    </div>,\n    modalRoot,\n  );\n};\n"],"mappings":"AAAA,MAAO,cAAc,CAErB,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,YAAY,KAAQ,WAAW,CACxC,MAAO,CAAAC,IAAI,KAAM,MAAM,CACvB,OAASC,IAAI,KAAQ,SAAS,CAE9B,OAASC,wBAAwB,KAAQ,mCAAmC,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE7E,MAAO,IAAM,CAAAC,KAQX,CAAG,QARQ,CAAAA,KAQXA,CAAIC,KAAK,CAAK,CACd,IAAAC,qBAAA,CAAuCD,KAAK,CAApCE,mBAAmB,CAAnBA,mBAAmB,CAAAD,qBAAA,UAAG,IAAI,CAAAA,qBAAA,CAClC,GAAM,CAAAE,SAAS,CAAGT,wBAAwB,CAAC,CACzCU,SAAS,CAAE,4BACb,CAAC,CAAC,CAEF,GAAI,CAACD,SAAS,CAAE,CACd,MAAO,KAAI,CACb,CAEA,GAAM,CAAAE,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAA0B,CAAK,CACpD,GAAIA,KAAK,CAACC,GAAG,GAAKd,IAAI,CAACe,MAAM,CAAE,CAC7BF,KAAK,CAACG,WAAW,CAACC,wBAAwB,EAAE,CAC5CJ,KAAK,CAACK,eAAe,EAAE,CACvBX,KAAK,CAACY,cAAc,EAAE,CACxB,CACF,CAAC,CAED,mBAAOrB,YAAY,cACjBO,KAAA,QACEM,SAAS,CAAEZ,IAAI,CAAC,OAAO,CAAEQ,KAAK,CAACI,SAAS,CAAE,CAC1CS,IAAI,CAAC,QAAQ,CACb,aAAW,MAAM,CACjBC,SAAS,CAAET,aAAc,CACzB,kBAAiBL,KAAK,CAACe,UAAW,CAClC,iCAA0B,CAAAC,QAAA,eAE1BpB,IAAA,QACEQ,SAAS,CAAC,mBAAmB,CAC7Ba,OAAO,CAAEf,mBAAmB,CAAGF,KAAK,CAACY,cAAc,CAAGM,SAAU,EAChE,cACFtB,IAAA,QACEQ,SAAS,CAAC,gBAAgB,CAC1Be,KAAK,CAAE,CAAE,aAAa,IAAAC,MAAA,CAAKpB,KAAK,CAACqB,QAAQ,MAAK,CAAE,CAChDC,QAAQ,CAAE,CAAE,CAAAN,QAAA,CAEXhB,KAAK,CAACgB,QAAQ,EACX,GACF,CACNb,SAAS,CACV,CACH,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}