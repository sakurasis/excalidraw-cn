{"ast":null,"code":"import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useRef,useState}from\"react\";import{actionExportWithDarkMode,actionChangeExportBackground,actionChangeExportEmbedScene,actionChangeExportScale,actionChangeProjectName}from\"../actions/actionExport\";import{probablySupportsClipboardBlob}from\"../clipboard\";import{DEFAULT_EXPORT_PADDING,EXPORT_IMAGE_TYPES,isFirefox,EXPORT_SCALES}from\"../constants\";import{canvasToBlob}from\"../data/blob\";import{nativeFileSystemSupported}from\"../data/filesystem\";import{t}from\"../i18n\";import{getSelectedElements,isSomeElementSelected}from\"../scene\";import{exportToCanvas}from\"../packages/utils\";import{copyIcon,downloadIcon,helpIcon}from\"./icons\";import{Dialog}from\"./Dialog\";import{RadioGroup}from\"./RadioGroup\";import{Switch}from\"./Switch\";import{Tooltip}from\"./Tooltip\";import\"./ImageExportDialog.scss\";import{useAppProps}from\"./App\";import{FilledButton}from\"./FilledButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var supportsContextFilters=(\"filter\"in document.createElement(\"canvas\").getContext(\"2d\"));export var ErrorCanvasPreview=function ErrorCanvasPreview(){return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h3\",{children:t(\"canvasError.cannotShowPreview\")}),/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(\"span\",{children:t(\"canvasError.canvasTooBig\")})}),/*#__PURE__*/_jsxs(\"em\",{children:[\"(\",t(\"canvasError.canvasTooBigTip\"),\")\"]})]});};var ImageExportModal=function ImageExportModal(_ref){var appState=_ref.appState,elements=_ref.elements,files=_ref.files,actionManager=_ref.actionManager,onExportImage=_ref.onExportImage;var appProps=useAppProps();var _useState=useState(appState.name),_useState2=_slicedToArray(_useState,2),projectName=_useState2[0],setProjectName=_useState2[1];var someElementIsSelected=isSomeElementSelected(elements,appState);var _useState3=useState(someElementIsSelected),_useState4=_slicedToArray(_useState3,2),exportSelected=_useState4[0],setExportSelected=_useState4[1];var _useState5=useState(appState.exportBackground),_useState6=_slicedToArray(_useState5,2),exportWithBackground=_useState6[0],setExportWithBackground=_useState6[1];var _useState7=useState(appState.exportWithDarkMode),_useState8=_slicedToArray(_useState7,2),exportDarkMode=_useState8[0],setExportDarkMode=_useState8[1];var _useState9=useState(appState.exportEmbedScene),_useState10=_slicedToArray(_useState9,2),embedScene=_useState10[0],setEmbedScene=_useState10[1];var _useState11=useState(appState.exportScale),_useState12=_slicedToArray(_useState11,2),exportScale=_useState12[0],setExportScale=_useState12[1];var previewRef=useRef(null);var _useState13=useState(null),_useState14=_slicedToArray(_useState13,2),renderError=_useState14[0],setRenderError=_useState14[1];var exportedElements=exportSelected?getSelectedElements(elements,appState,{includeBoundTextElement:true,includeElementsInFrames:true}):elements;useEffect(function(){var previewNode=previewRef.current;if(!previewNode){return;}var maxWidth=previewNode.offsetWidth;var maxHeight=previewNode.offsetHeight;if(!maxWidth){return;}exportToCanvas({elements:exportedElements,appState:appState,files:files,exportPadding:DEFAULT_EXPORT_PADDING,maxWidthOrHeight:Math.max(maxWidth,maxHeight)}).then(function(canvas){setRenderError(null);// if converting to blob fails, there's some problem that will\n// likely prevent preview and export (e.g. canvas too big)\nreturn canvasToBlob(canvas).then(function(){previewNode.replaceChildren(canvas);});}).catch(function(error){console.error(error);setRenderError(error);});},[appState,files,exportedElements]);return/*#__PURE__*/_jsxs(\"div\",{className:\"ImageExportModal\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t(\"imageExportDialog.header\")}),/*#__PURE__*/_jsxs(\"div\",{className:\"ImageExportModal__preview\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"ImageExportModal__preview__canvas\",ref:previewRef,children:renderError&&/*#__PURE__*/_jsx(ErrorCanvasPreview,{})}),/*#__PURE__*/_jsx(\"div\",{className:\"ImageExportModal__preview__filename\",children:!nativeFileSystemSupported&&/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"TextInput\",value:projectName,style:{width:\"30ch\"},disabled:typeof appProps.name!==\"undefined\"||appState.viewModeEnabled,onChange:function onChange(event){setProjectName(event.target.value);actionManager.executeAction(actionChangeProjectName,\"ui\",event.target.value);}})})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"ImageExportModal__settings\",children:[/*#__PURE__*/_jsx(\"h3\",{children:t(\"imageExportDialog.header\")}),someElementIsSelected&&/*#__PURE__*/_jsx(ExportSetting,{label:t(\"imageExportDialog.label.onlySelected\"),name:\"exportOnlySelected\",children:/*#__PURE__*/_jsx(Switch,{name:\"exportOnlySelected\",checked:exportSelected,onChange:function onChange(checked){setExportSelected(checked);}})}),/*#__PURE__*/_jsx(ExportSetting,{label:t(\"imageExportDialog.label.withBackground\"),name:\"exportBackgroundSwitch\",children:/*#__PURE__*/_jsx(Switch,{name:\"exportBackgroundSwitch\",checked:exportWithBackground,onChange:function onChange(checked){setExportWithBackground(checked);actionManager.executeAction(actionChangeExportBackground,\"ui\",checked);}})}),supportsContextFilters&&/*#__PURE__*/_jsx(ExportSetting,{label:t(\"imageExportDialog.label.darkMode\"),name:\"exportDarkModeSwitch\",children:/*#__PURE__*/_jsx(Switch,{name:\"exportDarkModeSwitch\",checked:exportDarkMode,onChange:function onChange(checked){setExportDarkMode(checked);actionManager.executeAction(actionExportWithDarkMode,\"ui\",checked);}})}),/*#__PURE__*/_jsx(ExportSetting,{label:t(\"imageExportDialog.label.embedScene\"),tooltip:t(\"imageExportDialog.tooltip.embedScene\"),name:\"exportEmbedSwitch\",children:/*#__PURE__*/_jsx(Switch,{name:\"exportEmbedSwitch\",checked:embedScene,onChange:function onChange(checked){setEmbedScene(checked);actionManager.executeAction(actionChangeExportEmbedScene,\"ui\",checked);}})}),/*#__PURE__*/_jsx(ExportSetting,{label:t(\"imageExportDialog.label.scale\"),name:\"exportScale\",children:/*#__PURE__*/_jsx(RadioGroup,{name:\"exportScale\",value:exportScale,onChange:function onChange(scale){setExportScale(scale);actionManager.executeAction(actionChangeExportScale,\"ui\",scale);},choices:EXPORT_SCALES.map(function(scale){return{value:scale,label:\"\".concat(scale,\"\\xD7\")};})})}),/*#__PURE__*/_jsxs(\"div\",{className:\"ImageExportModal__settings__buttons\",children:[/*#__PURE__*/_jsx(FilledButton,{className:\"ImageExportModal__settings__buttons__button\",label:t(\"imageExportDialog.title.exportToPng\"),onClick:function onClick(){return onExportImage(EXPORT_IMAGE_TYPES.png,exportedElements);},startIcon:downloadIcon,children:t(\"imageExportDialog.button.exportToPng\")}),/*#__PURE__*/_jsx(FilledButton,{className:\"ImageExportModal__settings__buttons__button\",label:t(\"imageExportDialog.title.exportToSvg\"),onClick:function onClick(){return onExportImage(EXPORT_IMAGE_TYPES.svg,exportedElements);},startIcon:downloadIcon,children:t(\"imageExportDialog.button.exportToSvg\")}),(probablySupportsClipboardBlob||isFirefox)&&/*#__PURE__*/_jsx(FilledButton,{className:\"ImageExportModal__settings__buttons__button\",label:t(\"imageExportDialog.title.copyPngToClipboard\"),onClick:function onClick(){return onExportImage(EXPORT_IMAGE_TYPES.clipboard,exportedElements);},startIcon:copyIcon,children:t(\"imageExportDialog.button.copyPngToClipboard\")})]})]})]});};var ExportSetting=function ExportSetting(_ref2){var label=_ref2.label,children=_ref2.children,tooltip=_ref2.tooltip,name=_ref2.name;return/*#__PURE__*/_jsxs(\"div\",{className:\"ImageExportModal__settings__setting\",title:label,children:[/*#__PURE__*/_jsxs(\"label\",{htmlFor:name,className:\"ImageExportModal__settings__setting__label\",children:[label,tooltip&&/*#__PURE__*/_jsx(Tooltip,{label:tooltip,long:true,children:helpIcon})]}),/*#__PURE__*/_jsx(\"div\",{className:\"ImageExportModal__settings__setting__content\",children:children})]});};export var ImageExportDialog=function ImageExportDialog(_ref3){var elements=_ref3.elements,appState=_ref3.appState,files=_ref3.files,actionManager=_ref3.actionManager,onExportImage=_ref3.onExportImage,onCloseRequest=_ref3.onCloseRequest;if(appState.openDialog!==\"imageExport\"){return null;}return/*#__PURE__*/_jsx(Dialog,{onCloseRequest:onCloseRequest,size:\"wide\",title:false,children:/*#__PURE__*/_jsx(ImageExportModal,{elements:elements,appState:appState,files:files,actionManager:actionManager,onExportImage:onExportImage})});};","map":{"version":3,"names":["React","useEffect","useRef","useState","actionExportWithDarkMode","actionChangeExportBackground","actionChangeExportEmbedScene","actionChangeExportScale","actionChangeProjectName","probablySupportsClipboardBlob","DEFAULT_EXPORT_PADDING","EXPORT_IMAGE_TYPES","isFirefox","EXPORT_SCALES","canvasToBlob","nativeFileSystemSupported","t","getSelectedElements","isSomeElementSelected","exportToCanvas","copyIcon","downloadIcon","helpIcon","Dialog","RadioGroup","Switch","Tooltip","useAppProps","FilledButton","jsx","_jsx","jsxs","_jsxs","supportsContextFilters","document","createElement","getContext","ErrorCanvasPreview","children","ImageExportModal","_ref","appState","elements","files","actionManager","onExportImage","appProps","_useState","name","_useState2","_slicedToArray","projectName","setProjectName","someElementIsSelected","_useState3","_useState4","exportSelected","setExportSelected","_useState5","exportBackground","_useState6","exportWithBackground","setExportWithBackground","_useState7","exportWithDarkMode","_useState8","exportDarkMode","setExportDarkMode","_useState9","exportEmbedScene","_useState10","embedScene","setEmbedScene","_useState11","exportScale","_useState12","setExportScale","previewRef","_useState13","_useState14","renderError","setRenderError","exportedElements","includeBoundTextElement","includeElementsInFrames","previewNode","current","maxWidth","offsetWidth","maxHeight","offsetHeight","exportPadding","maxWidthOrHeight","Math","max","then","canvas","replaceChildren","catch","error","console","className","ref","type","value","style","width","disabled","viewModeEnabled","onChange","event","target","executeAction","ExportSetting","label","checked","tooltip","scale","choices","map","concat","onClick","png","startIcon","svg","clipboard","_ref2","title","htmlFor","long","ImageExportDialog","_ref3","onCloseRequest","openDialog","size"],"sources":["D:/project/excalidraw-cn/src/components/ImageExportDialog.tsx"],"sourcesContent":["import React, { useEffect, useRef, useState } from \"react\";\n\nimport type { ActionManager } from \"../actions/manager\";\nimport type { AppClassProperties, BinaryFiles, UIAppState } from \"../types\";\n\nimport {\n  actionExportWithDarkMode,\n  actionChangeExportBackground,\n  actionChangeExportEmbedScene,\n  actionChangeExportScale,\n  actionChangeProjectName,\n} from \"../actions/actionExport\";\nimport { probablySupportsClipboardBlob } from \"../clipboard\";\nimport {\n  DEFAULT_EXPORT_PADDING,\n  EXPORT_IMAGE_TYPES,\n  isFirefox,\n  EXPORT_SCALES,\n} from \"../constants\";\n\nimport { canvasToBlob } from \"../data/blob\";\nimport { nativeFileSystemSupported } from \"../data/filesystem\";\nimport { NonDeletedExcalidrawElement } from \"../element/types\";\nimport { t } from \"../i18n\";\nimport { getSelectedElements, isSomeElementSelected } from \"../scene\";\nimport { exportToCanvas } from \"../packages/utils\";\n\nimport { copyIcon, downloadIcon, helpIcon } from \"./icons\";\nimport { Dialog } from \"./Dialog\";\nimport { RadioGroup } from \"./RadioGroup\";\nimport { Switch } from \"./Switch\";\nimport { Tooltip } from \"./Tooltip\";\n\nimport \"./ImageExportDialog.scss\";\nimport { useAppProps } from \"./App\";\nimport { FilledButton } from \"./FilledButton\";\n\nconst supportsContextFilters =\n  \"filter\" in document.createElement(\"canvas\").getContext(\"2d\")!;\n\nexport const ErrorCanvasPreview = () => {\n  return (\n    <div>\n      <h3>{t(\"canvasError.cannotShowPreview\")}</h3>\n      <p>\n        <span>{t(\"canvasError.canvasTooBig\")}</span>\n      </p>\n      <em>({t(\"canvasError.canvasTooBigTip\")})</em>\n    </div>\n  );\n};\n\ntype ImageExportModalProps = {\n  appState: UIAppState;\n  elements: readonly NonDeletedExcalidrawElement[];\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  onExportImage: AppClassProperties[\"onExportImage\"];\n};\n\nconst ImageExportModal = ({\n  appState,\n  elements,\n  files,\n  actionManager,\n  onExportImage,\n}: ImageExportModalProps) => {\n  const appProps = useAppProps();\n  const [projectName, setProjectName] = useState(appState.name);\n\n  const someElementIsSelected = isSomeElementSelected(elements, appState);\n\n  const [exportSelected, setExportSelected] = useState(someElementIsSelected);\n  const [exportWithBackground, setExportWithBackground] = useState(\n    appState.exportBackground,\n  );\n  const [exportDarkMode, setExportDarkMode] = useState(\n    appState.exportWithDarkMode,\n  );\n  const [embedScene, setEmbedScene] = useState(appState.exportEmbedScene);\n  const [exportScale, setExportScale] = useState(appState.exportScale);\n\n  const previewRef = useRef<HTMLDivElement>(null);\n  const [renderError, setRenderError] = useState<Error | null>(null);\n\n  const exportedElements = exportSelected\n    ? getSelectedElements(elements, appState, {\n        includeBoundTextElement: true,\n        includeElementsInFrames: true,\n      })\n    : elements;\n\n  useEffect(() => {\n    const previewNode = previewRef.current;\n    if (!previewNode) {\n      return;\n    }\n    const maxWidth = previewNode.offsetWidth;\n    const maxHeight = previewNode.offsetHeight;\n    if (!maxWidth) {\n      return;\n    }\n    exportToCanvas({\n      elements: exportedElements,\n      appState,\n      files,\n      exportPadding: DEFAULT_EXPORT_PADDING,\n      maxWidthOrHeight: Math.max(maxWidth, maxHeight),\n    })\n      .then((canvas) => {\n        setRenderError(null);\n        // if converting to blob fails, there's some problem that will\n        // likely prevent preview and export (e.g. canvas too big)\n        return canvasToBlob(canvas).then(() => {\n          previewNode.replaceChildren(canvas);\n        });\n      })\n      .catch((error) => {\n        console.error(error);\n        setRenderError(error);\n      });\n  }, [appState, files, exportedElements]);\n\n  return (\n    <div className=\"ImageExportModal\">\n      <h3>{t(\"imageExportDialog.header\")}</h3>\n      <div className=\"ImageExportModal__preview\">\n        <div className=\"ImageExportModal__preview__canvas\" ref={previewRef}>\n          {renderError && <ErrorCanvasPreview />}\n        </div>\n        <div className=\"ImageExportModal__preview__filename\">\n          {!nativeFileSystemSupported && (\n            <input\n              type=\"text\"\n              className=\"TextInput\"\n              value={projectName}\n              style={{ width: \"30ch\" }}\n              disabled={\n                typeof appProps.name !== \"undefined\" || appState.viewModeEnabled\n              }\n              onChange={(event) => {\n                setProjectName(event.target.value);\n                actionManager.executeAction(\n                  actionChangeProjectName,\n                  \"ui\",\n                  event.target.value,\n                );\n              }}\n            />\n          )}\n        </div>\n      </div>\n      <div className=\"ImageExportModal__settings\">\n        <h3>{t(\"imageExportDialog.header\")}</h3>\n        {someElementIsSelected && (\n          <ExportSetting\n            label={t(\"imageExportDialog.label.onlySelected\")}\n            name=\"exportOnlySelected\"\n          >\n            <Switch\n              name=\"exportOnlySelected\"\n              checked={exportSelected}\n              onChange={(checked) => {\n                setExportSelected(checked);\n              }}\n            />\n          </ExportSetting>\n        )}\n        <ExportSetting\n          label={t(\"imageExportDialog.label.withBackground\")}\n          name=\"exportBackgroundSwitch\"\n        >\n          <Switch\n            name=\"exportBackgroundSwitch\"\n            checked={exportWithBackground}\n            onChange={(checked) => {\n              setExportWithBackground(checked);\n              actionManager.executeAction(\n                actionChangeExportBackground,\n                \"ui\",\n                checked,\n              );\n            }}\n          />\n        </ExportSetting>\n        {supportsContextFilters && (\n          <ExportSetting\n            label={t(\"imageExportDialog.label.darkMode\")}\n            name=\"exportDarkModeSwitch\"\n          >\n            <Switch\n              name=\"exportDarkModeSwitch\"\n              checked={exportDarkMode}\n              onChange={(checked) => {\n                setExportDarkMode(checked);\n                actionManager.executeAction(\n                  actionExportWithDarkMode,\n                  \"ui\",\n                  checked,\n                );\n              }}\n            />\n          </ExportSetting>\n        )}\n        <ExportSetting\n          label={t(\"imageExportDialog.label.embedScene\")}\n          tooltip={t(\"imageExportDialog.tooltip.embedScene\")}\n          name=\"exportEmbedSwitch\"\n        >\n          <Switch\n            name=\"exportEmbedSwitch\"\n            checked={embedScene}\n            onChange={(checked) => {\n              setEmbedScene(checked);\n              actionManager.executeAction(\n                actionChangeExportEmbedScene,\n                \"ui\",\n                checked,\n              );\n            }}\n          />\n        </ExportSetting>\n        <ExportSetting\n          label={t(\"imageExportDialog.label.scale\")}\n          name=\"exportScale\"\n        >\n          <RadioGroup\n            name=\"exportScale\"\n            value={exportScale}\n            onChange={(scale) => {\n              setExportScale(scale);\n              actionManager.executeAction(actionChangeExportScale, \"ui\", scale);\n            }}\n            choices={EXPORT_SCALES.map((scale) => ({\n              value: scale,\n              label: `${scale}\\u00d7`,\n            }))}\n          />\n        </ExportSetting>\n\n        <div className=\"ImageExportModal__settings__buttons\">\n          <FilledButton\n            className=\"ImageExportModal__settings__buttons__button\"\n            label={t(\"imageExportDialog.title.exportToPng\")}\n            onClick={() =>\n              onExportImage(EXPORT_IMAGE_TYPES.png, exportedElements)\n            }\n            startIcon={downloadIcon}\n          >\n            {t(\"imageExportDialog.button.exportToPng\")}\n          </FilledButton>\n          <FilledButton\n            className=\"ImageExportModal__settings__buttons__button\"\n            label={t(\"imageExportDialog.title.exportToSvg\")}\n            onClick={() =>\n              onExportImage(EXPORT_IMAGE_TYPES.svg, exportedElements)\n            }\n            startIcon={downloadIcon}\n          >\n            {t(\"imageExportDialog.button.exportToSvg\")}\n          </FilledButton>\n          {(probablySupportsClipboardBlob || isFirefox) && (\n            <FilledButton\n              className=\"ImageExportModal__settings__buttons__button\"\n              label={t(\"imageExportDialog.title.copyPngToClipboard\")}\n              onClick={() =>\n                onExportImage(EXPORT_IMAGE_TYPES.clipboard, exportedElements)\n              }\n              startIcon={copyIcon}\n            >\n              {t(\"imageExportDialog.button.copyPngToClipboard\")}\n            </FilledButton>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n};\n\ntype ExportSettingProps = {\n  label: string;\n  children: React.ReactNode;\n  tooltip?: string;\n  name?: string;\n};\n\nconst ExportSetting = ({\n  label,\n  children,\n  tooltip,\n  name,\n}: ExportSettingProps) => {\n  return (\n    <div className=\"ImageExportModal__settings__setting\" title={label}>\n      <label\n        htmlFor={name}\n        className=\"ImageExportModal__settings__setting__label\"\n      >\n        {label}\n        {tooltip && (\n          <Tooltip label={tooltip} long={true}>\n            {helpIcon}\n          </Tooltip>\n        )}\n      </label>\n      <div className=\"ImageExportModal__settings__setting__content\">\n        {children}\n      </div>\n    </div>\n  );\n};\n\nexport const ImageExportDialog = ({\n  elements,\n  appState,\n  files,\n  actionManager,\n  onExportImage,\n  onCloseRequest,\n}: {\n  appState: UIAppState;\n  elements: readonly NonDeletedExcalidrawElement[];\n  files: BinaryFiles;\n  actionManager: ActionManager;\n  onExportImage: AppClassProperties[\"onExportImage\"];\n  onCloseRequest: () => void;\n}) => {\n  if (appState.openDialog !== \"imageExport\") {\n    return null;\n  }\n\n  return (\n    <Dialog onCloseRequest={onCloseRequest} size=\"wide\" title={false}>\n      <ImageExportModal\n        elements={elements}\n        appState={appState}\n        files={files}\n        actionManager={actionManager}\n        onExportImage={onExportImage}\n      />\n    </Dialog>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}