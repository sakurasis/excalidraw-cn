{"ast":null,"code":"import { useEffect } from \"react\";\nimport { atom, useAtom } from \"jotai\";\nimport throttle from \"lodash.throttle\";\nconst scrollPositionAtom = atom(0);\nexport const useScrollPosition = elementRef => {\n  const [scrollPosition, setScrollPosition] = useAtom(scrollPositionAtom);\n  useEffect(() => {\n    const {\n      current: element\n    } = elementRef;\n    if (!element) {\n      return;\n    }\n    const handleScroll = throttle(() => {\n      const {\n        scrollTop\n      } = element;\n      setScrollPosition(scrollTop);\n    }, 200);\n    element.addEventListener(\"scroll\", handleScroll);\n    return () => {\n      handleScroll.cancel();\n      element.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [elementRef, setScrollPosition]);\n  return scrollPosition;\n};","map":{"version":3,"names":["useEffect","atom","useAtom","throttle","scrollPositionAtom","useScrollPosition","elementRef","scrollPosition","setScrollPosition","current","element","handleScroll","scrollTop","addEventListener","cancel","removeEventListener"],"sources":["D:/project/excalidraw-cn/src/hooks/useScrollPosition.ts"],"sourcesContent":["import { useEffect } from \"react\";\nimport { atom, useAtom } from \"jotai\";\nimport throttle from \"lodash.throttle\";\n\nconst scrollPositionAtom = atom<number>(0);\n\nexport const useScrollPosition = <T extends HTMLElement>(\n  elementRef: React.RefObject<T>,\n) => {\n  const [scrollPosition, setScrollPosition] = useAtom(scrollPositionAtom);\n\n  useEffect(() => {\n    const { current: element } = elementRef;\n    if (!element) {\n      return;\n    }\n\n    const handleScroll = throttle(() => {\n      const { scrollTop } = element;\n      setScrollPosition(scrollTop);\n    }, 200);\n\n    element.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      handleScroll.cancel();\n      element.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [elementRef, setScrollPosition]);\n\n  return scrollPosition;\n};\n"],"mappings":"AAAA,SAASA,SAAS,QAAQ,OAAO;AACjC,SAASC,IAAI,EAAEC,OAAO,QAAQ,OAAO;AACrC,OAAOC,QAAQ,MAAM,iBAAiB;AAEtC,MAAMC,kBAAkB,GAAGH,IAAI,CAAS,CAAC,CAAC;AAE1C,OAAO,MAAMI,iBAAiB,GAC5BC,UAA8B,IAC3B;EACH,MAAM,CAACC,cAAc,EAAEC,iBAAiB,CAAC,GAAGN,OAAO,CAACE,kBAAkB,CAAC;EAEvEJ,SAAS,CAAC,MAAM;IACd,MAAM;MAAES,OAAO,EAAEC;IAAQ,CAAC,GAAGJ,UAAU;IACvC,IAAI,CAACI,OAAO,EAAE;MACZ;IACF;IAEA,MAAMC,YAAY,GAAGR,QAAQ,CAAC,MAAM;MAClC,MAAM;QAAES;MAAU,CAAC,GAAGF,OAAO;MAC7BF,iBAAiB,CAACI,SAAS,CAAC;IAC9B,CAAC,EAAE,GAAG,CAAC;IAEPF,OAAO,CAACG,gBAAgB,CAAC,QAAQ,EAAEF,YAAY,CAAC;IAEhD,OAAO,MAAM;MACXA,YAAY,CAACG,MAAM,EAAE;MACrBJ,OAAO,CAACK,mBAAmB,CAAC,QAAQ,EAAEJ,YAAY,CAAC;IACrD,CAAC;EACH,CAAC,EAAE,CAACL,UAAU,EAAEE,iBAAiB,CAAC,CAAC;EAEnC,OAAOD,cAAc;AACvB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}