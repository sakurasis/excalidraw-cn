{"ast":null,"code":"import _regeneratorRuntime from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useCallback,useState}from\"react\";import{t}from\"../i18n\";import Trans from\"./Trans\";import{jotaiScope}from\"../jotai\";import{useApp,useExcalidrawSetAppState}from\"./App\";import{saveLibraryAsJSON}from\"../data/json\";import{libraryItemsAtom}from\"../data/library\";import{DotsIcon,ExportIcon,LoadIcon,publishIcon,TrashIcon}from\"./icons\";import{ToolButton}from\"./ToolButton\";import{fileOpen}from\"../data/filesystem\";import{muteFSAbortError}from\"../utils\";import{useAtom}from\"jotai\";import ConfirmDialog from\"./ConfirmDialog\";import PublishLibrary from\"./PublishLibrary\";import{Dialog}from\"./Dialog\";import DropdownMenu from\"./dropdownMenu/DropdownMenu\";import{isLibraryMenuOpenAtom}from\"./LibraryMenu\";import{useUIAppState}from\"../context/ui-appState\";import clsx from\"clsx\";import{useLibraryCache}from\"../hooks/useLibraryItemSvg\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var getSelectedItems=function getSelectedItems(libraryItems,selectedItems){return libraryItems.filter(function(item){return selectedItems.includes(item.id);});};export var LibraryDropdownMenuButton=function LibraryDropdownMenuButton(_ref){var setAppState=_ref.setAppState,selectedItems=_ref.selectedItems,library=_ref.library,onRemoveFromLibrary=_ref.onRemoveFromLibrary,resetLibrary=_ref.resetLibrary,onSelectItems=_ref.onSelectItems,appState=_ref.appState,className=_ref.className;var _useAtom=useAtom(libraryItemsAtom,jotaiScope),_useAtom2=_slicedToArray(_useAtom,1),libraryItemsData=_useAtom2[0];var _useAtom3=useAtom(isLibraryMenuOpenAtom,jotaiScope),_useAtom4=_slicedToArray(_useAtom3,2),isLibraryMenuOpen=_useAtom4[0],setIsLibraryMenuOpen=_useAtom4[1];var renderRemoveLibAlert=function renderRemoveLibAlert(){var content=selectedItems.length?t(\"alerts.removeItemsFromsLibrary\",{count:selectedItems.length}):t(\"alerts.resetLibrary\");var title=selectedItems.length?t(\"confirmDialog.removeItemsFromLib\"):t(\"confirmDialog.resetLibrary\");return/*#__PURE__*/_jsx(ConfirmDialog,{onConfirm:function onConfirm(){if(selectedItems.length){onRemoveFromLibrary();}else{resetLibrary();}setShowRemoveLibAlert(false);},onCancel:function onCancel(){setShowRemoveLibAlert(false);},title:title,children:/*#__PURE__*/_jsx(\"p\",{children:content})});};var _useState=useState(false),_useState2=_slicedToArray(_useState,2),showRemoveLibAlert=_useState2[0],setShowRemoveLibAlert=_useState2[1];var itemsSelected=!!selectedItems.length;var items=itemsSelected?libraryItemsData.libraryItems.filter(function(item){return selectedItems.includes(item.id);}):libraryItemsData.libraryItems;var resetLabel=itemsSelected?t(\"buttons.remove\"):t(\"buttons.resetLibrary\");var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),showPublishLibraryDialog=_useState4[0],setShowPublishLibraryDialog=_useState4[1];var _useState5=useState(null),_useState6=_slicedToArray(_useState5,2),publishLibSuccess=_useState6[0],setPublishLibSuccess=_useState6[1];var renderPublishSuccess=useCallback(function(){return/*#__PURE__*/_jsxs(Dialog,{onCloseRequest:function onCloseRequest(){return setPublishLibSuccess(null);},title:t(\"publishSuccessDialog.title\"),className:\"publish-library-success\",size:\"small\",children:[/*#__PURE__*/_jsx(\"p\",{children:/*#__PURE__*/_jsx(Trans,{i18nKey:\"publishSuccessDialog.content\",authorName:publishLibSuccess.authorName,link:function link(el){return/*#__PURE__*/_jsx(\"a\",{href:publishLibSuccess===null||publishLibSuccess===void 0?void 0:publishLibSuccess.url,target:\"_blank\",rel:\"noopener noreferrer\",children:el});}})}),/*#__PURE__*/_jsx(ToolButton,{type:\"button\",title:t(\"buttons.close\"),\"aria-label\":t(\"buttons.close\"),label:t(\"buttons.close\"),onClick:function onClick(){return setPublishLibSuccess(null);},\"data-testid\":\"publish-library-success-close\",className:\"publish-library-success-close\"})]});},[setPublishLibSuccess,publishLibSuccess]);var onPublishLibSuccess=function onPublishLibSuccess(data,libraryItems){setShowPublishLibraryDialog(false);setPublishLibSuccess({url:data.url,authorName:data.authorName});var nextLibItems=libraryItems.slice();nextLibItems.forEach(function(libItem){if(selectedItems.includes(libItem.id)){libItem.status=\"published\";}});library.setLibrary(nextLibItems);};var onLibraryImport=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return library.updateLibrary({libraryItems:fileOpen({description:\"Excalidraw library files\"// ToDo: Be over-permissive until https://bugs.webkit.org/show_bug.cgi?id=34442\n// gets resolved. Else, iOS users cannot open `.excalidraw` files.\n/*\n            extensions: [\".json\", \".excalidrawlib\"],\n            */}),merge:true,openLibraryMenu:true});case 3:_context.next=11;break;case 5:_context.prev=5;_context.t0=_context[\"catch\"](0);if(!((_context.t0===null||_context.t0===void 0?void 0:_context.t0.name)===\"AbortError\")){_context.next=10;break;}console.warn(_context.t0);return _context.abrupt(\"return\");case 10:setAppState({errorMessage:t(\"errors.importLibraryError\")});case 11:case\"end\":return _context.stop();}},_callee,null,[[0,5]]);}));return function onLibraryImport(){return _ref2.apply(this,arguments);};}();var onLibraryExport=/*#__PURE__*/function(){var _ref3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(){var libraryItems;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:if(!itemsSelected){_context2.next=4;break;}_context2.t0=items;_context2.next=7;break;case 4:_context2.next=6;return library.getLatestLibrary();case 6:_context2.t0=_context2.sent;case 7:libraryItems=_context2.t0;saveLibraryAsJSON(libraryItems).catch(muteFSAbortError).catch(function(error){setAppState({errorMessage:error.message});});case 9:case\"end\":return _context2.stop();}},_callee2);}));return function onLibraryExport(){return _ref3.apply(this,arguments);};}();var renderLibraryMenu=function renderLibraryMenu(){return/*#__PURE__*/_jsxs(DropdownMenu,{open:isLibraryMenuOpen,children:[/*#__PURE__*/_jsx(DropdownMenu.Trigger,{onToggle:function onToggle(){return setIsLibraryMenuOpen(!isLibraryMenuOpen);},children:DotsIcon}),/*#__PURE__*/_jsxs(DropdownMenu.Content,{onClickOutside:function onClickOutside(){return setIsLibraryMenuOpen(false);},onSelect:function onSelect(){return setIsLibraryMenuOpen(false);},className:\"library-menu\",children:[!itemsSelected&&/*#__PURE__*/_jsx(DropdownMenu.Item,{onSelect:onLibraryImport,icon:LoadIcon,\"data-testid\":\"lib-dropdown--load\",children:t(\"buttons.load\")}),!!items.length&&/*#__PURE__*/_jsx(DropdownMenu.Item,{onSelect:onLibraryExport,icon:ExportIcon,\"data-testid\":\"lib-dropdown--export\",children:t(\"buttons.export\")}),!!items.length&&/*#__PURE__*/_jsx(DropdownMenu.Item,{onSelect:function onSelect(){return setShowRemoveLibAlert(true);},icon:TrashIcon,children:resetLabel}),itemsSelected&&/*#__PURE__*/_jsx(DropdownMenu.Item,{icon:publishIcon,onSelect:function onSelect(){return setShowPublishLibraryDialog(true);},\"data-testid\":\"lib-dropdown--remove\",children:t(\"buttons.publishLibrary\")})]})]});};return/*#__PURE__*/_jsxs(\"div\",{className:clsx(\"library-menu-dropdown-container\",className),children:[renderLibraryMenu(),selectedItems.length>0&&/*#__PURE__*/_jsx(\"div\",{className:\"library-actions-counter\",children:selectedItems.length}),showRemoveLibAlert&&renderRemoveLibAlert(),showPublishLibraryDialog&&/*#__PURE__*/_jsx(PublishLibrary,{onClose:function onClose(){return setShowPublishLibraryDialog(false);},libraryItems:getSelectedItems(libraryItemsData.libraryItems,selectedItems),appState:appState,onSuccess:function onSuccess(data){return onPublishLibSuccess(data,libraryItemsData.libraryItems);},onError:function onError(error){return window.alert(error);},updateItemsInStorage:function updateItemsInStorage(){return library.setLibrary(libraryItemsData.libraryItems);},onRemove:function onRemove(id){return onSelectItems(selectedItems.filter(function(_id){return _id!==id;}));}}),publishLibSuccess&&renderPublishSuccess()]});};export var LibraryDropdownMenu=function LibraryDropdownMenu(_ref4){var selectedItems=_ref4.selectedItems,onSelectItems=_ref4.onSelectItems,className=_ref4.className;var _useApp=useApp(),library=_useApp.library;var _useLibraryCache=useLibraryCache(),clearLibraryCache=_useLibraryCache.clearLibraryCache,deleteItemsFromLibraryCache=_useLibraryCache.deleteItemsFromLibraryCache;var appState=useUIAppState();var setAppState=useExcalidrawSetAppState();var _useAtom5=useAtom(libraryItemsAtom,jotaiScope),_useAtom6=_slicedToArray(_useAtom5,1),libraryItemsData=_useAtom6[0];var removeFromLibrary=/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(libraryItems){var nextItems;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:nextItems=libraryItems.filter(function(item){return!selectedItems.includes(item.id);});library.setLibrary(nextItems).catch(function(){setAppState({errorMessage:t(\"alerts.errorRemovingFromLibrary\")});});deleteItemsFromLibraryCache(selectedItems);onSelectItems([]);case 4:case\"end\":return _context3.stop();}},_callee3);}));return function removeFromLibrary(_x){return _ref5.apply(this,arguments);};}();var resetLibrary=function resetLibrary(){library.resetLibrary();clearLibraryCache();};return/*#__PURE__*/_jsx(LibraryDropdownMenuButton,{appState:appState,setAppState:setAppState,selectedItems:selectedItems,onSelectItems:onSelectItems,library:library,onRemoveFromLibrary:function onRemoveFromLibrary(){return removeFromLibrary(libraryItemsData.libraryItems);},resetLibrary:resetLibrary,className:className});};","map":{"version":3,"names":["useCallback","useState","t","Trans","jotaiScope","useApp","useExcalidrawSetAppState","saveLibraryAsJSON","libraryItemsAtom","DotsIcon","ExportIcon","LoadIcon","publishIcon","TrashIcon","ToolButton","fileOpen","muteFSAbortError","useAtom","ConfirmDialog","PublishLibrary","Dialog","DropdownMenu","isLibraryMenuOpenAtom","useUIAppState","clsx","useLibraryCache","jsx","_jsx","jsxs","_jsxs","getSelectedItems","libraryItems","selectedItems","filter","item","includes","id","LibraryDropdownMenuButton","_ref","setAppState","library","onRemoveFromLibrary","resetLibrary","onSelectItems","appState","className","_useAtom","_useAtom2","_slicedToArray","libraryItemsData","_useAtom3","_useAtom4","isLibraryMenuOpen","setIsLibraryMenuOpen","renderRemoveLibAlert","content","length","count","title","onConfirm","setShowRemoveLibAlert","onCancel","children","_useState","_useState2","showRemoveLibAlert","itemsSelected","items","resetLabel","_useState3","_useState4","showPublishLibraryDialog","setShowPublishLibraryDialog","_useState5","_useState6","publishLibSuccess","setPublishLibSuccess","renderPublishSuccess","onCloseRequest","size","i18nKey","authorName","link","el","href","url","target","rel","type","label","onClick","onPublishLibSuccess","data","nextLibItems","slice","forEach","libItem","status","setLibrary","onLibraryImport","_ref2","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","updateLibrary","description","merge","openLibraryMenu","t0","name","console","warn","abrupt","errorMessage","stop","apply","arguments","onLibraryExport","_ref3","_callee2","_callee2$","_context2","getLatestLibrary","sent","catch","error","message","renderLibraryMenu","open","Trigger","onToggle","Content","onClickOutside","onSelect","Item","icon","onClose","onSuccess","onError","window","alert","updateItemsInStorage","onRemove","_id","LibraryDropdownMenu","_ref4","_useApp","_useLibraryCache","clearLibraryCache","deleteItemsFromLibraryCache","_useAtom5","_useAtom6","removeFromLibrary","_ref5","_callee3","nextItems","_callee3$","_context3","_x"],"sources":["D:/project/excalidraw-cn/src/components/LibraryMenuHeaderContent.tsx"],"sourcesContent":["import { useCallback, useState } from \"react\";\nimport { t } from \"../i18n\";\nimport Trans from \"./Trans\";\nimport { jotaiScope } from \"../jotai\";\nimport { LibraryItem, LibraryItems, UIAppState } from \"../types\";\nimport { useApp, useExcalidrawSetAppState } from \"./App\";\nimport { saveLibraryAsJSON } from \"../data/json\";\nimport Library, { libraryItemsAtom } from \"../data/library\";\nimport {\n  DotsIcon,\n  ExportIcon,\n  LoadIcon,\n  publishIcon,\n  TrashIcon,\n} from \"./icons\";\nimport { ToolButton } from \"./ToolButton\";\nimport { fileOpen } from \"../data/filesystem\";\nimport { muteFSAbortError } from \"../utils\";\nimport { useAtom } from \"jotai\";\nimport ConfirmDialog from \"./ConfirmDialog\";\nimport PublishLibrary from \"./PublishLibrary\";\nimport { Dialog } from \"./Dialog\";\nimport DropdownMenu from \"./dropdownMenu/DropdownMenu\";\nimport { isLibraryMenuOpenAtom } from \"./LibraryMenu\";\nimport { useUIAppState } from \"../context/ui-appState\";\nimport clsx from \"clsx\";\nimport { useLibraryCache } from \"../hooks/useLibraryItemSvg\";\n\nconst getSelectedItems = (\n  libraryItems: LibraryItems,\n  selectedItems: LibraryItem[\"id\"][],\n) => libraryItems.filter((item) => selectedItems.includes(item.id));\n\nexport const LibraryDropdownMenuButton: React.FC<{\n  setAppState: React.Component<any, UIAppState>[\"setState\"];\n  selectedItems: LibraryItem[\"id\"][];\n  library: Library;\n  onRemoveFromLibrary: () => void;\n  resetLibrary: () => void;\n  onSelectItems: (items: LibraryItem[\"id\"][]) => void;\n  appState: UIAppState;\n  className?: string;\n}> = ({\n  setAppState,\n  selectedItems,\n  library,\n  onRemoveFromLibrary,\n  resetLibrary,\n  onSelectItems,\n  appState,\n  className,\n}) => {\n  const [libraryItemsData] = useAtom(libraryItemsAtom, jotaiScope);\n  const [isLibraryMenuOpen, setIsLibraryMenuOpen] = useAtom(\n    isLibraryMenuOpenAtom,\n    jotaiScope,\n  );\n\n  const renderRemoveLibAlert = () => {\n    const content = selectedItems.length\n      ? t(\"alerts.removeItemsFromsLibrary\", { count: selectedItems.length })\n      : t(\"alerts.resetLibrary\");\n    const title = selectedItems.length\n      ? t(\"confirmDialog.removeItemsFromLib\")\n      : t(\"confirmDialog.resetLibrary\");\n    return (\n      <ConfirmDialog\n        onConfirm={() => {\n          if (selectedItems.length) {\n            onRemoveFromLibrary();\n          } else {\n            resetLibrary();\n          }\n          setShowRemoveLibAlert(false);\n        }}\n        onCancel={() => {\n          setShowRemoveLibAlert(false);\n        }}\n        title={title}\n      >\n        <p>{content}</p>\n      </ConfirmDialog>\n    );\n  };\n\n  const [showRemoveLibAlert, setShowRemoveLibAlert] = useState(false);\n\n  const itemsSelected = !!selectedItems.length;\n  const items = itemsSelected\n    ? libraryItemsData.libraryItems.filter((item) =>\n        selectedItems.includes(item.id),\n      )\n    : libraryItemsData.libraryItems;\n  const resetLabel = itemsSelected\n    ? t(\"buttons.remove\")\n    : t(\"buttons.resetLibrary\");\n\n  const [showPublishLibraryDialog, setShowPublishLibraryDialog] =\n    useState(false);\n  const [publishLibSuccess, setPublishLibSuccess] = useState<null | {\n    url: string;\n    authorName: string;\n  }>(null);\n  const renderPublishSuccess = useCallback(() => {\n    return (\n      <Dialog\n        onCloseRequest={() => setPublishLibSuccess(null)}\n        title={t(\"publishSuccessDialog.title\")}\n        className=\"publish-library-success\"\n        size=\"small\"\n      >\n        <p>\n          <Trans\n            i18nKey=\"publishSuccessDialog.content\"\n            authorName={publishLibSuccess!.authorName}\n            link={(el) => (\n              <a\n                href={publishLibSuccess?.url}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {el}\n              </a>\n            )}\n          />\n        </p>\n        <ToolButton\n          type=\"button\"\n          title={t(\"buttons.close\")}\n          aria-label={t(\"buttons.close\")}\n          label={t(\"buttons.close\")}\n          onClick={() => setPublishLibSuccess(null)}\n          data-testid=\"publish-library-success-close\"\n          className=\"publish-library-success-close\"\n        />\n      </Dialog>\n    );\n  }, [setPublishLibSuccess, publishLibSuccess]);\n\n  const onPublishLibSuccess = (\n    data: { url: string; authorName: string },\n    libraryItems: LibraryItems,\n  ) => {\n    setShowPublishLibraryDialog(false);\n    setPublishLibSuccess({ url: data.url, authorName: data.authorName });\n    const nextLibItems = libraryItems.slice();\n    nextLibItems.forEach((libItem) => {\n      if (selectedItems.includes(libItem.id)) {\n        libItem.status = \"published\";\n      }\n    });\n    library.setLibrary(nextLibItems);\n  };\n\n  const onLibraryImport = async () => {\n    try {\n      await library.updateLibrary({\n        libraryItems: fileOpen({\n          description: \"Excalidraw library files\",\n          // ToDo: Be over-permissive until https://bugs.webkit.org/show_bug.cgi?id=34442\n          // gets resolved. Else, iOS users cannot open `.excalidraw` files.\n          /*\n            extensions: [\".json\", \".excalidrawlib\"],\n            */\n        }),\n        merge: true,\n        openLibraryMenu: true,\n      });\n    } catch (error: any) {\n      if (error?.name === \"AbortError\") {\n        console.warn(error);\n        return;\n      }\n      setAppState({ errorMessage: t(\"errors.importLibraryError\") });\n    }\n  };\n\n  const onLibraryExport = async () => {\n    const libraryItems = itemsSelected\n      ? items\n      : await library.getLatestLibrary();\n    saveLibraryAsJSON(libraryItems)\n      .catch(muteFSAbortError)\n      .catch((error) => {\n        setAppState({ errorMessage: error.message });\n      });\n  };\n\n  const renderLibraryMenu = () => {\n    return (\n      <DropdownMenu open={isLibraryMenuOpen}>\n        <DropdownMenu.Trigger\n          onToggle={() => setIsLibraryMenuOpen(!isLibraryMenuOpen)}\n        >\n          {DotsIcon}\n        </DropdownMenu.Trigger>\n        <DropdownMenu.Content\n          onClickOutside={() => setIsLibraryMenuOpen(false)}\n          onSelect={() => setIsLibraryMenuOpen(false)}\n          className=\"library-menu\"\n        >\n          {!itemsSelected && (\n            <DropdownMenu.Item\n              onSelect={onLibraryImport}\n              icon={LoadIcon}\n              data-testid=\"lib-dropdown--load\"\n            >\n              {t(\"buttons.load\")}\n            </DropdownMenu.Item>\n          )}\n          {!!items.length && (\n            <DropdownMenu.Item\n              onSelect={onLibraryExport}\n              icon={ExportIcon}\n              data-testid=\"lib-dropdown--export\"\n            >\n              {t(\"buttons.export\")}\n            </DropdownMenu.Item>\n          )}\n          {!!items.length && (\n            <DropdownMenu.Item\n              onSelect={() => setShowRemoveLibAlert(true)}\n              icon={TrashIcon}\n            >\n              {resetLabel}\n            </DropdownMenu.Item>\n          )}\n          {itemsSelected && (\n            <DropdownMenu.Item\n              icon={publishIcon}\n              onSelect={() => setShowPublishLibraryDialog(true)}\n              data-testid=\"lib-dropdown--remove\"\n            >\n              {t(\"buttons.publishLibrary\")}\n            </DropdownMenu.Item>\n          )}\n        </DropdownMenu.Content>\n      </DropdownMenu>\n    );\n  };\n\n  return (\n    <div className={clsx(\"library-menu-dropdown-container\", className)}>\n      {renderLibraryMenu()}\n      {selectedItems.length > 0 && (\n        <div className=\"library-actions-counter\">{selectedItems.length}</div>\n      )}\n      {showRemoveLibAlert && renderRemoveLibAlert()}\n      {showPublishLibraryDialog && (\n        <PublishLibrary\n          onClose={() => setShowPublishLibraryDialog(false)}\n          libraryItems={getSelectedItems(\n            libraryItemsData.libraryItems,\n            selectedItems,\n          )}\n          appState={appState}\n          onSuccess={(data) =>\n            onPublishLibSuccess(data, libraryItemsData.libraryItems)\n          }\n          onError={(error) => window.alert(error)}\n          updateItemsInStorage={() =>\n            library.setLibrary(libraryItemsData.libraryItems)\n          }\n          onRemove={(id: string) =>\n            onSelectItems(selectedItems.filter((_id) => _id !== id))\n          }\n        />\n      )}\n      {publishLibSuccess && renderPublishSuccess()}\n    </div>\n  );\n};\n\nexport const LibraryDropdownMenu = ({\n  selectedItems,\n  onSelectItems,\n  className,\n}: {\n  selectedItems: LibraryItem[\"id\"][];\n  onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n  className?: string;\n}) => {\n  const { library } = useApp();\n  const { clearLibraryCache, deleteItemsFromLibraryCache } = useLibraryCache();\n  const appState = useUIAppState();\n  const setAppState = useExcalidrawSetAppState();\n\n  const [libraryItemsData] = useAtom(libraryItemsAtom, jotaiScope);\n\n  const removeFromLibrary = async (libraryItems: LibraryItems) => {\n    const nextItems = libraryItems.filter(\n      (item) => !selectedItems.includes(item.id),\n    );\n    library.setLibrary(nextItems).catch(() => {\n      setAppState({ errorMessage: t(\"alerts.errorRemovingFromLibrary\") });\n    });\n\n    deleteItemsFromLibraryCache(selectedItems);\n\n    onSelectItems([]);\n  };\n\n  const resetLibrary = () => {\n    library.resetLibrary();\n    clearLibraryCache();\n  };\n\n  return (\n    <LibraryDropdownMenuButton\n      appState={appState}\n      setAppState={setAppState}\n      selectedItems={selectedItems}\n      onSelectItems={onSelectItems}\n      library={library}\n      onRemoveFromLibrary={() =>\n        removeFromLibrary(libraryItemsData.libraryItems)\n      }\n      resetLibrary={resetLibrary}\n      className={className}\n    />\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}