{"ast":null,"code":"import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./TextInput.scss\";import React,{useState}from\"react\";import{focusNearestParent}from\"../utils\";import\"./ProjectName.scss\";import{useExcalidrawContainer}from\"./App\";import{KEYS}from\"../keys\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ProjectName=function ProjectName(props){var _useExcalidrawContain=useExcalidrawContainer(),id=_useExcalidrawContain.id;var _useState=useState(props.value),_useState2=_slicedToArray(_useState,2),fileName=_useState2[0],setFileName=_useState2[1];var handleBlur=function handleBlur(event){if(!props.ignoreFocus){focusNearestParent(event.target);}var value=event.target.value;if(value!==props.value){props.onChange(value);}};var handleKeyDown=function handleKeyDown(event){if(event.key===KEYS.ENTER){event.preventDefault();if(event.nativeEvent.isComposing||event.keyCode===229){return;}event.currentTarget.blur();}};return/*#__PURE__*/_jsxs(\"div\",{className:\"ProjectName\",children:[/*#__PURE__*/_jsx(\"label\",{className:\"ProjectName-label\",htmlFor:\"filename\",children:\"\".concat(props.label).concat(props.isNameEditable?\"\":\":\")}),props.isNameEditable?/*#__PURE__*/_jsx(\"input\",{type:\"text\",className:\"TextInput\",onBlur:handleBlur,onKeyDown:handleKeyDown,id:\"\".concat(id,\"-filename\"),value:fileName,onChange:function onChange(event){return setFileName(event.target.value);}}):/*#__PURE__*/_jsx(\"span\",{className:\"TextInput TextInput--readonly\",id:\"\".concat(id,\"-filename\"),children:props.value})]});};","map":{"version":3,"names":["React","useState","focusNearestParent","useExcalidrawContainer","KEYS","jsx","_jsx","jsxs","_jsxs","ProjectName","props","_useExcalidrawContain","id","_useState","value","_useState2","_slicedToArray","fileName","setFileName","handleBlur","event","ignoreFocus","target","onChange","handleKeyDown","key","ENTER","preventDefault","nativeEvent","isComposing","keyCode","currentTarget","blur","className","children","htmlFor","concat","label","isNameEditable","type","onBlur","onKeyDown"],"sources":["D:/project/excalidraw-cn/src/components/ProjectName.tsx"],"sourcesContent":["import \"./TextInput.scss\";\n\nimport React, { useState } from \"react\";\nimport { focusNearestParent } from \"../utils\";\n\nimport \"./ProjectName.scss\";\nimport { useExcalidrawContainer } from \"./App\";\nimport { KEYS } from \"../keys\";\n\ntype Props = {\n  value: string;\n  onChange: (value: string) => void;\n  label: string;\n  isNameEditable: boolean;\n  ignoreFocus?: boolean;\n};\n\nexport const ProjectName = (props: Props) => {\n  const { id } = useExcalidrawContainer();\n  const [fileName, setFileName] = useState<string>(props.value);\n\n  const handleBlur = (event: any) => {\n    if (!props.ignoreFocus) {\n      focusNearestParent(event.target);\n    }\n    const value = event.target.value;\n    if (value !== props.value) {\n      props.onChange(value);\n    }\n  };\n\n  const handleKeyDown = (event: React.KeyboardEvent<HTMLElement>) => {\n    if (event.key === KEYS.ENTER) {\n      event.preventDefault();\n      if (event.nativeEvent.isComposing || event.keyCode === 229) {\n        return;\n      }\n      event.currentTarget.blur();\n    }\n  };\n\n  return (\n    <div className=\"ProjectName\">\n      <label className=\"ProjectName-label\" htmlFor=\"filename\">\n        {`${props.label}${props.isNameEditable ? \"\" : \":\"}`}\n      </label>\n      {props.isNameEditable ? (\n        <input\n          type=\"text\"\n          className=\"TextInput\"\n          onBlur={handleBlur}\n          onKeyDown={handleKeyDown}\n          id={`${id}-filename`}\n          value={fileName}\n          onChange={(event) => setFileName(event.target.value)}\n        />\n      ) : (\n        <span className=\"TextInput TextInput--readonly\" id={`${id}-filename`}>\n          {props.value}\n        </span>\n      )}\n    </div>\n  );\n};\n"],"mappings":"8GAAA,MAAO,kBAAkB,CAEzB,MAAO,CAAAA,KAAK,EAAIC,QAAQ,KAAQ,OAAO,CACvC,OAASC,kBAAkB,KAAQ,UAAU,CAE7C,MAAO,oBAAoB,CAC3B,OAASC,sBAAsB,KAAQ,OAAO,CAC9C,OAASC,IAAI,KAAQ,SAAS,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAU/B,MAAO,IAAM,CAAAC,WAAW,CAAG,QAAd,CAAAA,WAAWA,CAAIC,KAAY,CAAK,CAC3C,IAAAC,qBAAA,CAAeR,sBAAsB,EAAE,CAA/BS,EAAE,CAAAD,qBAAA,CAAFC,EAAE,CACV,IAAAC,SAAA,CAAgCZ,QAAQ,CAASS,KAAK,CAACI,KAAK,CAAC,CAAAC,UAAA,CAAAC,cAAA,CAAAH,SAAA,IAAtDI,QAAQ,CAAAF,UAAA,IAAEG,WAAW,CAAAH,UAAA,IAE5B,GAAM,CAAAI,UAAU,CAAG,QAAb,CAAAA,UAAUA,CAAIC,KAAU,CAAK,CACjC,GAAI,CAACV,KAAK,CAACW,WAAW,CAAE,CACtBnB,kBAAkB,CAACkB,KAAK,CAACE,MAAM,CAAC,CAClC,CACA,GAAM,CAAAR,KAAK,CAAGM,KAAK,CAACE,MAAM,CAACR,KAAK,CAChC,GAAIA,KAAK,GAAKJ,KAAK,CAACI,KAAK,CAAE,CACzBJ,KAAK,CAACa,QAAQ,CAACT,KAAK,CAAC,CACvB,CACF,CAAC,CAED,GAAM,CAAAU,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIJ,KAAuC,CAAK,CACjE,GAAIA,KAAK,CAACK,GAAG,GAAKrB,IAAI,CAACsB,KAAK,CAAE,CAC5BN,KAAK,CAACO,cAAc,EAAE,CACtB,GAAIP,KAAK,CAACQ,WAAW,CAACC,WAAW,EAAIT,KAAK,CAACU,OAAO,GAAK,GAAG,CAAE,CAC1D,OACF,CACAV,KAAK,CAACW,aAAa,CAACC,IAAI,EAAE,CAC5B,CACF,CAAC,CAED,mBACExB,KAAA,QAAKyB,SAAS,CAAC,aAAa,CAAAC,QAAA,eAC1B5B,IAAA,UAAO2B,SAAS,CAAC,mBAAmB,CAACE,OAAO,CAAC,UAAU,CAAAD,QAAA,IAAAE,MAAA,CACjD1B,KAAK,CAAC2B,KAAK,EAAAD,MAAA,CAAG1B,KAAK,CAAC4B,cAAc,CAAG,EAAE,CAAG,GAAG,GAC3C,CACP5B,KAAK,CAAC4B,cAAc,cACnBhC,IAAA,UACEiC,IAAI,CAAC,MAAM,CACXN,SAAS,CAAC,WAAW,CACrBO,MAAM,CAAErB,UAAW,CACnBsB,SAAS,CAAEjB,aAAc,CACzBZ,EAAE,IAAAwB,MAAA,CAAKxB,EAAE,aAAY,CACrBE,KAAK,CAAEG,QAAS,CAChBM,QAAQ,CAAE,SAAAA,SAACH,KAAK,QAAK,CAAAF,WAAW,CAACE,KAAK,CAACE,MAAM,CAACR,KAAK,CAAC,EAAC,EACrD,cAEFR,IAAA,SAAM2B,SAAS,CAAC,+BAA+B,CAACrB,EAAE,IAAAwB,MAAA,CAAKxB,EAAE,aAAY,CAAAsB,QAAA,CAClExB,KAAK,CAACI,KAAK,EAEf,GACG,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}