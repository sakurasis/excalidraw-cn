{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\excalidraw-cn\\\\src\\\\components\\\\LibraryMenuSection.tsx\";\nimport React, { memo, useEffect, useState } from \"react\";\nimport { EmptyLibraryUnit, LibraryUnit } from \"./LibraryUnit\";\nimport { useTransition } from \"../hooks/useTransition\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport const LibraryMenuSectionGrid = _ref => {\n  let {\n    children\n  } = _ref;\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"library-menu-items-container__grid\",\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 31,\n    columnNumber: 10\n  }, this);\n};\nexport const LibraryMenuSection = /*#__PURE__*/memo(_ref2 => {\n  let {\n    items,\n    onItemSelectToggle,\n    onItemDrag,\n    isItemSelected,\n    onClick,\n    svgCache,\n    itemsRenderedPerBatch\n  } = _ref2;\n  const [, startTransition] = useTransition();\n  const [index, setIndex] = useState(0);\n  useEffect(() => {\n    if (index < items.length) {\n      startTransition(() => {\n        setIndex(index + itemsRenderedPerBatch);\n      });\n    }\n  }, [index, items.length, startTransition, itemsRenderedPerBatch]);\n  return /*#__PURE__*/_jsxDEV(_Fragment, {\n    children: items.map((item, i) => {\n      var _item$id;\n      return i < index ? /*#__PURE__*/_jsxDEV(LibraryUnit, {\n        elements: item === null || item === void 0 ? void 0 : item.elements,\n        isPending: !(item !== null && item !== void 0 && item.id) && !!(item !== null && item !== void 0 && item.elements),\n        onClick: onClick,\n        svgCache: svgCache,\n        id: item === null || item === void 0 ? void 0 : item.id,\n        selected: isItemSelected(item.id),\n        onToggle: onItemSelectToggle,\n        onDrag: onItemDrag\n      }, (_item$id = item === null || item === void 0 ? void 0 : item.id) !== null && _item$id !== void 0 ? _item$id : i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 59,\n        columnNumber: 13\n      }, this) : /*#__PURE__*/_jsxDEV(EmptyLibraryUnit, {}, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 71,\n        columnNumber: 13\n      }, this);\n    })\n  }, void 0, false);\n});","map":{"version":3,"names":["React","memo","useEffect","useState","EmptyLibraryUnit","LibraryUnit","useTransition","jsxDEV","_jsxDEV","Fragment","_Fragment","LibraryMenuSectionGrid","_ref","children","className","fileName","_jsxFileName","lineNumber","columnNumber","LibraryMenuSection","_ref2","items","onItemSelectToggle","onItemDrag","isItemSelected","onClick","svgCache","itemsRenderedPerBatch","startTransition","index","setIndex","length","map","item","i","_item$id","elements","isPending","id","selected","onToggle","onDrag"],"sources":["D:/project/excalidraw-cn/src/components/LibraryMenuSection.tsx"],"sourcesContent":["import React, { memo, ReactNode, useEffect, useState } from \"react\";\nimport { EmptyLibraryUnit, LibraryUnit } from \"./LibraryUnit\";\nimport { LibraryItem } from \"../types\";\nimport { ExcalidrawElement, NonDeleted } from \"../element/types\";\nimport { SvgCache } from \"../hooks/useLibraryItemSvg\";\nimport { useTransition } from \"../hooks/useTransition\";\n\ntype LibraryOrPendingItem = (\n  | LibraryItem\n  | /* pending library item */ {\n      id: null;\n      elements: readonly NonDeleted<ExcalidrawElement>[];\n    }\n)[];\n\ninterface Props {\n  items: LibraryOrPendingItem;\n  onClick: (id: LibraryItem[\"id\"] | null) => void;\n  onItemSelectToggle: (id: LibraryItem[\"id\"], event: React.MouseEvent) => void;\n  onItemDrag: (id: LibraryItem[\"id\"], event: React.DragEvent) => void;\n  isItemSelected: (id: LibraryItem[\"id\"] | null) => boolean;\n  svgCache: SvgCache;\n  itemsRenderedPerBatch: number;\n}\n\nexport const LibraryMenuSectionGrid = ({\n  children,\n}: {\n  children: ReactNode;\n}) => {\n  return <div className=\"library-menu-items-container__grid\">{children}</div>;\n};\n\nexport const LibraryMenuSection = memo(\n  ({\n    items,\n    onItemSelectToggle,\n    onItemDrag,\n    isItemSelected,\n    onClick,\n    svgCache,\n    itemsRenderedPerBatch,\n  }: Props) => {\n    const [, startTransition] = useTransition();\n    const [index, setIndex] = useState(0);\n\n    useEffect(() => {\n      if (index < items.length) {\n        startTransition(() => {\n          setIndex(index + itemsRenderedPerBatch);\n        });\n      }\n    }, [index, items.length, startTransition, itemsRenderedPerBatch]);\n\n    return (\n      <>\n        {items.map((item, i) => {\n          return i < index ? (\n            <LibraryUnit\n              elements={item?.elements}\n              isPending={!item?.id && !!item?.elements}\n              onClick={onClick}\n              svgCache={svgCache}\n              id={item?.id}\n              selected={isItemSelected(item.id)}\n              onToggle={onItemSelectToggle}\n              onDrag={onItemDrag}\n              key={item?.id ?? i}\n            />\n          ) : (\n            <EmptyLibraryUnit key={i} />\n          );\n        })}\n      </>\n    );\n  },\n);\n"],"mappings":";AAAA,OAAOA,KAAK,IAAIC,IAAI,EAAaC,SAAS,EAAEC,QAAQ,QAAQ,OAAO;AACnE,SAASC,gBAAgB,EAAEC,WAAW,QAAQ,eAAe;AAI7D,SAASC,aAAa,QAAQ,wBAAwB;AAAC,SAAAC,MAAA,IAAAC,OAAA;AAAA,SAAAC,QAAA,IAAAC,SAAA;AAoBvD,OAAO,MAAMC,sBAAsB,GAAGC,IAAA,IAIhC;EAAA,IAJiC;IACrCC;EAGF,CAAC,GAAAD,IAAA;EACC,oBAAOJ,OAAA;IAAKM,SAAS,EAAC,oCAAoC;IAAAD,QAAA,EAAEA;EAAQ;IAAAE,QAAA,EAAAC,YAAA;IAAAC,UAAA;IAAAC,YAAA;EAAA,QAAO;AAC7E,CAAC;AAED,OAAO,MAAMC,kBAAkB,gBAAGlB,IAAI,CACpCmB,KAAA,IAQa;EAAA,IARZ;IACCC,KAAK;IACLC,kBAAkB;IAClBC,UAAU;IACVC,cAAc;IACdC,OAAO;IACPC,QAAQ;IACRC;EACK,CAAC,GAAAP,KAAA;EACN,MAAM,GAAGQ,eAAe,CAAC,GAAGtB,aAAa,EAAE;EAC3C,MAAM,CAACuB,KAAK,EAAEC,QAAQ,CAAC,GAAG3B,QAAQ,CAAC,CAAC,CAAC;EAErCD,SAAS,CAAC,MAAM;IACd,IAAI2B,KAAK,GAAGR,KAAK,CAACU,MAAM,EAAE;MACxBH,eAAe,CAAC,MAAM;QACpBE,QAAQ,CAACD,KAAK,GAAGF,qBAAqB,CAAC;MACzC,CAAC,CAAC;IACJ;EACF,CAAC,EAAE,CAACE,KAAK,EAAER,KAAK,CAACU,MAAM,EAAEH,eAAe,EAAED,qBAAqB,CAAC,CAAC;EAEjE,oBACEnB,OAAA,CAAAE,SAAA;IAAAG,QAAA,EACGQ,KAAK,CAACW,GAAG,CAAC,CAACC,IAAI,EAAEC,CAAC,KAAK;MAAA,IAAAC,QAAA;MACtB,OAAOD,CAAC,GAAGL,KAAK,gBACdrB,OAAA,CAACH,WAAW;QACV+B,QAAQ,EAAEH,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEG,QAAS;QACzBC,SAAS,EAAE,EAACJ,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEK,EAAE,KAAI,CAAC,EAACL,IAAI,aAAJA,IAAI,eAAJA,IAAI,CAAEG,QAAQ,CAAC;QACzCX,OAAO,EAAEA,OAAQ;QACjBC,QAAQ,EAAEA,QAAS;QACnBY,EAAE,EAAEL,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,EAAG;QACbC,QAAQ,EAAEf,cAAc,CAACS,IAAI,CAACK,EAAE,CAAE;QAClCE,QAAQ,EAAElB,kBAAmB;QAC7BmB,MAAM,EAAElB;MAAW,IAAAY,QAAA,GACdF,IAAI,aAAJA,IAAI,uBAAJA,IAAI,CAAEK,EAAE,cAAAH,QAAA,cAAAA,QAAA,GAAID,CAAC;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QAClB,gBAEFV,OAAA,CAACJ,gBAAgB,MAAM8B,CAAC;QAAAnB,QAAA,EAAAC,YAAA;QAAAC,UAAA;QAAAC,YAAA;MAAA,QACzB;IACH,CAAC;EAAC,iBACD;AAEP,CAAC,CACF"},"metadata":{},"sourceType":"module","externalDependencies":[]}