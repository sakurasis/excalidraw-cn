{"ast":null,"code":"import _regeneratorRuntime from \"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";\nimport _asyncToGenerator from \"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";\nvar e = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee3(_e) {\n    var t,\n      n,\n      a,\n      r,\n      c,\n      _args3 = arguments;\n    return _regeneratorRuntime().wrap(function _callee3$(_context3) {\n      while (1) switch (_context3.prev = _context3.next) {\n        case 0:\n          t = _args3.length > 1 && _args3[1] !== undefined ? _args3[1] : {};\n          Array.isArray(t) && (t = t[0]);\n          n = document.createElement(\"a\");\n          a = _e;\n          _context3.t0 = \"body\" in _e;\n          if (!_context3.t0) {\n            _context3.next = 9;\n            break;\n          }\n          _context3.next = 8;\n          return function () {\n            var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee2(e, t) {\n              var n, a, r, c;\n              return _regeneratorRuntime().wrap(function _callee2$(_context2) {\n                while (1) switch (_context2.prev = _context2.next) {\n                  case 0:\n                    n = e.getReader();\n                    a = new ReadableStream({\n                      start: function start(e) {\n                        return function () {\n                          var _t = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime().mark(function _callee() {\n                            return _regeneratorRuntime().wrap(function _callee$(_context) {\n                              while (1) switch (_context.prev = _context.next) {\n                                case 0:\n                                  return _context.abrupt(\"return\", n.read().then(function (_ref3) {\n                                    var n = _ref3.done,\n                                      a = _ref3.value;\n                                    if (!n) return e.enqueue(a), t();\n                                    e.close();\n                                  }));\n                                case 1:\n                                case \"end\":\n                                  return _context.stop();\n                              }\n                            }, _callee);\n                          }));\n                          function t() {\n                            return _t.apply(this, arguments);\n                          }\n                          return t;\n                        }()();\n                      }\n                    });\n                    r = new Response(a);\n                    _context2.next = 5;\n                    return r.blob();\n                  case 5:\n                    c = _context2.sent;\n                    return _context2.abrupt(\"return\", (n.releaseLock(), new Blob([c], {\n                      type: t\n                    })));\n                  case 7:\n                  case \"end\":\n                    return _context2.stop();\n                }\n              }, _callee2);\n            }));\n            return function (_x2, _x3) {\n              return _ref2.apply(this, arguments);\n            };\n          }()(_e.body, _e.headers.get(\"content-type\"));\n        case 8:\n          a = _context3.sent;\n        case 9:\n          n.download = t.fileName || \"Untitled\";\n          _context3.t1 = URL;\n          _context3.next = 13;\n          return a;\n        case 13:\n          _context3.t2 = _context3.sent;\n          n.href = _context3.t1.createObjectURL.call(_context3.t1, _context3.t2);\n          r = function r() {\n            \"function\" == typeof c && c();\n          }, c = t.legacySetup && t.legacySetup(r, function () {\n            return c(reject);\n          }, n);\n          return _context3.abrupt(\"return\", (n.addEventListener(\"click\", function () {\n            setTimeout(function () {\n              return URL.revokeObjectURL(n.href);\n            }, 3e4), r();\n          }), n.click(), null));\n        case 17:\n        case \"end\":\n          return _context3.stop();\n      }\n    }, _callee3);\n  }));\n  return function e(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport { e as default };","map":{"version":3,"names":["e","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee3","t","n","a","r","c","_args3","arguments","wrap","_callee3$","_context3","prev","next","length","undefined","Array","isArray","document","createElement","t0","_ref2","_callee2","_callee2$","_context2","getReader","ReadableStream","start","_t","_callee","_callee$","_context","abrupt","read","then","_ref3","done","value","enqueue","close","stop","apply","Response","blob","sent","releaseLock","Blob","type","_x2","_x3","body","headers","get","download","fileName","t1","URL","t2","href","createObjectURL","call","legacySetup","reject","addEventListener","setTimeout","revokeObjectURL","click","_x","default"],"sources":["D:/project/excalidraw-cn/node_modules/browser-fs-access/dist/file-save-3189631c.js"],"sourcesContent":["var e=async(e,t={})=>{Array.isArray(t)&&(t=t[0]);const n=document.createElement(\"a\");let a=e;\"body\"in e&&(a=await async function(e,t){const n=e.getReader(),a=new ReadableStream({start:e=>async function t(){return n.read().then(({done:n,value:a})=>{if(!n)return e.enqueue(a),t();e.close()})}()}),r=new Response(a),c=await r.blob();return n.releaseLock(),new Blob([c],{type:t})}(e.body,e.headers.get(\"content-type\"))),n.download=t.fileName||\"Untitled\",n.href=URL.createObjectURL(await a);const r=()=>{\"function\"==typeof c&&c()},c=t.legacySetup&&t.legacySetup(r,()=>c(reject),n);return n.addEventListener(\"click\",()=>{setTimeout(()=>URL.revokeObjectURL(n.href),3e4),r()}),n.click(),null};export{e as default};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}