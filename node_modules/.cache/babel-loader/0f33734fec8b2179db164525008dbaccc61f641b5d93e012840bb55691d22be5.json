{"ast":null,"code":"\"use strict\";\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.sanitizeUrl = void 0;\nvar invalidProtocolRegex = /^([^\\w]*)(javascript|data|vbscript)/im;\nvar htmlEntitiesRegex = /&#(\\w+)(^\\w|;)?/g;\nvar htmlCtrlEntityRegex = /&(newline|tab);/gi;\nvar ctrlCharactersRegex = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nvar urlSchemeRegex = /^.+(:|&colon;)/gim;\nvar relativeFirstCharacters = [\".\", \"/\"];\nfunction isRelativeUrlWithoutProtocol(url) {\n  return relativeFirstCharacters.indexOf(url[0]) > -1;\n}\n// adapted from https://stackoverflow.com/a/29824550/2601552\nfunction decodeHtmlCharacters(str) {\n  return str.replace(htmlEntitiesRegex, function (match, dec) {\n    return String.fromCharCode(dec);\n  });\n}\nfunction sanitizeUrl(url) {\n  var sanitizedUrl = decodeHtmlCharacters(url || \"\").replace(htmlCtrlEntityRegex, \"\").replace(ctrlCharactersRegex, \"\").trim();\n  if (!sanitizedUrl) {\n    return \"about:blank\";\n  }\n  if (isRelativeUrlWithoutProtocol(sanitizedUrl)) {\n    return sanitizedUrl;\n  }\n  var urlSchemeParseResults = sanitizedUrl.match(urlSchemeRegex);\n  if (!urlSchemeParseResults) {\n    return sanitizedUrl;\n  }\n  var urlScheme = urlSchemeParseResults[0];\n  if (invalidProtocolRegex.test(urlScheme)) {\n    return \"about:blank\";\n  }\n  return sanitizedUrl;\n}\nexports.sanitizeUrl = sanitizeUrl;","map":{"version":3,"names":["Object","defineProperty","exports","value","sanitizeUrl","invalidProtocolRegex","htmlEntitiesRegex","htmlCtrlEntityRegex","ctrlCharactersRegex","urlSchemeRegex","relativeFirstCharacters","isRelativeUrlWithoutProtocol","url","indexOf","decodeHtmlCharacters","str","replace","match","dec","String","fromCharCode","sanitizedUrl","trim","urlSchemeParseResults","urlScheme","test"],"sources":["D:/project/excalidraw-cn/node_modules/@braintree/sanitize-url/dist/index.js"],"sourcesContent":["\"use strict\";\nObject.defineProperty(exports, \"__esModule\", { value: true });\nexports.sanitizeUrl = void 0;\nvar invalidProtocolRegex = /^([^\\w]*)(javascript|data|vbscript)/im;\nvar htmlEntitiesRegex = /&#(\\w+)(^\\w|;)?/g;\nvar htmlCtrlEntityRegex = /&(newline|tab);/gi;\nvar ctrlCharactersRegex = /[\\u0000-\\u001F\\u007F-\\u009F\\u2000-\\u200D\\uFEFF]/gim;\nvar urlSchemeRegex = /^.+(:|&colon;)/gim;\nvar relativeFirstCharacters = [\".\", \"/\"];\nfunction isRelativeUrlWithoutProtocol(url) {\n    return relativeFirstCharacters.indexOf(url[0]) > -1;\n}\n// adapted from https://stackoverflow.com/a/29824550/2601552\nfunction decodeHtmlCharacters(str) {\n    return str.replace(htmlEntitiesRegex, function (match, dec) {\n        return String.fromCharCode(dec);\n    });\n}\nfunction sanitizeUrl(url) {\n    var sanitizedUrl = decodeHtmlCharacters(url || \"\")\n        .replace(htmlCtrlEntityRegex, \"\")\n        .replace(ctrlCharactersRegex, \"\")\n        .trim();\n    if (!sanitizedUrl) {\n        return \"about:blank\";\n    }\n    if (isRelativeUrlWithoutProtocol(sanitizedUrl)) {\n        return sanitizedUrl;\n    }\n    var urlSchemeParseResults = sanitizedUrl.match(urlSchemeRegex);\n    if (!urlSchemeParseResults) {\n        return sanitizedUrl;\n    }\n    var urlScheme = urlSchemeParseResults[0];\n    if (invalidProtocolRegex.test(urlScheme)) {\n        return \"about:blank\";\n    }\n    return sanitizedUrl;\n}\nexports.sanitizeUrl = sanitizeUrl;\n"],"mappings":"AAAA,YAAY;;AACZA,MAAM,CAACC,cAAc,CAACC,OAAO,EAAE,YAAY,EAAE;EAAEC,KAAK,EAAE;AAAK,CAAC,CAAC;AAC7DD,OAAO,CAACE,WAAW,GAAG,KAAK,CAAC;AAC5B,IAAIC,oBAAoB,GAAG,uCAAuC;AAClE,IAAIC,iBAAiB,GAAG,kBAAkB;AAC1C,IAAIC,mBAAmB,GAAG,mBAAmB;AAC7C,IAAIC,mBAAmB,GAAG,oDAAoD;AAC9E,IAAIC,cAAc,GAAG,mBAAmB;AACxC,IAAIC,uBAAuB,GAAG,CAAC,GAAG,EAAE,GAAG,CAAC;AACxC,SAASC,4BAA4BA,CAACC,GAAG,EAAE;EACvC,OAAOF,uBAAuB,CAACG,OAAO,CAACD,GAAG,CAAC,CAAC,CAAC,CAAC,GAAG,CAAC,CAAC;AACvD;AACA;AACA,SAASE,oBAAoBA,CAACC,GAAG,EAAE;EAC/B,OAAOA,GAAG,CAACC,OAAO,CAACV,iBAAiB,EAAE,UAAUW,KAAK,EAAEC,GAAG,EAAE;IACxD,OAAOC,MAAM,CAACC,YAAY,CAACF,GAAG,CAAC;EACnC,CAAC,CAAC;AACN;AACA,SAASd,WAAWA,CAACQ,GAAG,EAAE;EACtB,IAAIS,YAAY,GAAGP,oBAAoB,CAACF,GAAG,IAAI,EAAE,CAAC,CAC7CI,OAAO,CAACT,mBAAmB,EAAE,EAAE,CAAC,CAChCS,OAAO,CAACR,mBAAmB,EAAE,EAAE,CAAC,CAChCc,IAAI,EAAE;EACX,IAAI,CAACD,YAAY,EAAE;IACf,OAAO,aAAa;EACxB;EACA,IAAIV,4BAA4B,CAACU,YAAY,CAAC,EAAE;IAC5C,OAAOA,YAAY;EACvB;EACA,IAAIE,qBAAqB,GAAGF,YAAY,CAACJ,KAAK,CAACR,cAAc,CAAC;EAC9D,IAAI,CAACc,qBAAqB,EAAE;IACxB,OAAOF,YAAY;EACvB;EACA,IAAIG,SAAS,GAAGD,qBAAqB,CAAC,CAAC,CAAC;EACxC,IAAIlB,oBAAoB,CAACoB,IAAI,CAACD,SAAS,CAAC,EAAE;IACtC,OAAO,aAAa;EACxB;EACA,OAAOH,YAAY;AACvB;AACAnB,OAAO,CAACE,WAAW,GAAGA,WAAW"},"metadata":{},"sourceType":"script","externalDependencies":[]}