{"ast":null,"code":"import React from\"react\";import{useDevice,useExcalidrawSetAppState}from\"../App\";import DropdownMenu from\"../dropdownMenu/DropdownMenu\";import*as DefaultItems from\"./DefaultItems\";import{UserList}from\"../UserList\";import{t}from\"../../i18n\";import{HamburgerMenuIcon}from\"../icons\";import{withInternalFallback}from\"../hoc/withInternalFallback\";import{composeEventHandlers}from\"../../utils\";import{useTunnels}from\"../../context/tunnels\";import{useUIAppState}from\"../../context/ui-appState\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var MainMenu=Object.assign(withInternalFallback(\"MainMenu\",function(_ref){var children=_ref.children,onSelect=_ref.onSelect;var _useTunnels=useTunnels(),MainMenuTunnel=_useTunnels.MainMenuTunnel;var device=useDevice();var appState=useUIAppState();var setAppState=useExcalidrawSetAppState();var onClickOutside=device.isMobile?undefined:function(){return setAppState({openMenu:null});};return/*#__PURE__*/_jsx(MainMenuTunnel.In,{children:/*#__PURE__*/_jsxs(DropdownMenu,{open:appState.openMenu===\"canvas\",children:[/*#__PURE__*/_jsx(DropdownMenu.Trigger,{onToggle:function onToggle(){setAppState({openMenu:appState.openMenu===\"canvas\"?null:\"canvas\"});},\"data-testid\":\"main-menu-trigger\",children:HamburgerMenuIcon}),/*#__PURE__*/_jsxs(DropdownMenu.Content,{onClickOutside:onClickOutside,onSelect:composeEventHandlers(onSelect,function(){setAppState({openMenu:null});}),children:[children,device.isMobile&&appState.collaborators.size>0&&/*#__PURE__*/_jsxs(\"fieldset\",{className:\"UserList-Wrapper\",children:[/*#__PURE__*/_jsx(\"legend\",{children:t(\"labels.collaborators\")}),/*#__PURE__*/_jsx(UserList,{mobile:true,collaborators:appState.collaborators})]})]})]})});}),{Trigger:DropdownMenu.Trigger,Item:DropdownMenu.Item,ItemLink:DropdownMenu.ItemLink,ItemCustom:DropdownMenu.ItemCustom,Group:DropdownMenu.Group,Separator:DropdownMenu.Separator,DefaultItems:DefaultItems});export default MainMenu;","map":{"version":3,"names":["React","useDevice","useExcalidrawSetAppState","DropdownMenu","DefaultItems","UserList","t","HamburgerMenuIcon","withInternalFallback","composeEventHandlers","useTunnels","useUIAppState","jsx","_jsx","jsxs","_jsxs","MainMenu","Object","assign","_ref","children","onSelect","_useTunnels","MainMenuTunnel","device","appState","setAppState","onClickOutside","isMobile","undefined","openMenu","In","open","Trigger","onToggle","Content","collaborators","size","className","mobile","Item","ItemLink","ItemCustom","Group","Separator"],"sources":["D:/project/excalidraw-cn/src/components/main-menu/MainMenu.tsx"],"sourcesContent":["import React from \"react\";\nimport { useDevice, useExcalidrawSetAppState } from \"../App\";\nimport DropdownMenu from \"../dropdownMenu/DropdownMenu\";\n\nimport * as DefaultItems from \"./DefaultItems\";\n\nimport { UserList } from \"../UserList\";\nimport { t } from \"../../i18n\";\nimport { HamburgerMenuIcon } from \"../icons\";\nimport { withInternalFallback } from \"../hoc/withInternalFallback\";\nimport { composeEventHandlers } from \"../../utils\";\nimport { useTunnels } from \"../../context/tunnels\";\nimport { useUIAppState } from \"../../context/ui-appState\";\n\nconst MainMenu = Object.assign(\n  withInternalFallback(\n    \"MainMenu\",\n    ({\n      children,\n      onSelect,\n    }: {\n      children?: React.ReactNode;\n      /**\n       * Called when any menu item is selected (clicked on).\n       */\n      onSelect?: (event: Event) => void;\n    }) => {\n      const { MainMenuTunnel } = useTunnels();\n      const device = useDevice();\n      const appState = useUIAppState();\n      const setAppState = useExcalidrawSetAppState();\n      const onClickOutside = device.isMobile\n        ? undefined\n        : () => setAppState({ openMenu: null });\n\n      return (\n        <MainMenuTunnel.In>\n          <DropdownMenu open={appState.openMenu === \"canvas\"}>\n            <DropdownMenu.Trigger\n              onToggle={() => {\n                setAppState({\n                  openMenu: appState.openMenu === \"canvas\" ? null : \"canvas\",\n                });\n              }}\n              data-testid=\"main-menu-trigger\"\n            >\n              {HamburgerMenuIcon}\n            </DropdownMenu.Trigger>\n            <DropdownMenu.Content\n              onClickOutside={onClickOutside}\n              onSelect={composeEventHandlers(onSelect, () => {\n                setAppState({ openMenu: null });\n              })}\n            >\n              {children}\n              {device.isMobile && appState.collaborators.size > 0 && (\n                <fieldset className=\"UserList-Wrapper\">\n                  <legend>{t(\"labels.collaborators\")}</legend>\n                  <UserList\n                    mobile={true}\n                    collaborators={appState.collaborators}\n                  />\n                </fieldset>\n              )}\n            </DropdownMenu.Content>\n          </DropdownMenu>\n        </MainMenuTunnel.In>\n      );\n    },\n  ),\n  {\n    Trigger: DropdownMenu.Trigger,\n    Item: DropdownMenu.Item,\n    ItemLink: DropdownMenu.ItemLink,\n    ItemCustom: DropdownMenu.ItemCustom,\n    Group: DropdownMenu.Group,\n    Separator: DropdownMenu.Separator,\n    DefaultItems,\n  },\n);\n\nexport default MainMenu;\n"],"mappings":"AAAA,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,OAASC,SAAS,CAAEC,wBAAwB,KAAQ,QAAQ,CAC5D,MAAO,CAAAC,YAAY,KAAM,8BAA8B,CAEvD,MAAO,GAAK,CAAAC,YAAY,KAAM,gBAAgB,CAE9C,OAASC,QAAQ,KAAQ,aAAa,CACtC,OAASC,CAAC,KAAQ,YAAY,CAC9B,OAASC,iBAAiB,KAAQ,UAAU,CAC5C,OAASC,oBAAoB,KAAQ,6BAA6B,CAClE,OAASC,oBAAoB,KAAQ,aAAa,CAClD,OAASC,UAAU,KAAQ,uBAAuB,CAClD,OAASC,aAAa,KAAQ,2BAA2B,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1D,GAAM,CAAAC,QAAQ,CAAGC,MAAM,CAACC,MAAM,CAC5BV,oBAAoB,CAClB,UAAU,CACV,SAAAW,IAAA,CASM,IARJ,CAAAC,QAAQ,CAAAD,IAAA,CAARC,QAAQ,CACRC,QAAQ,CAAAF,IAAA,CAARE,QAAQ,CAQR,IAAAC,WAAA,CAA2BZ,UAAU,EAAE,CAA/Ba,cAAc,CAAAD,WAAA,CAAdC,cAAc,CACtB,GAAM,CAAAC,MAAM,CAAGvB,SAAS,EAAE,CAC1B,GAAM,CAAAwB,QAAQ,CAAGd,aAAa,EAAE,CAChC,GAAM,CAAAe,WAAW,CAAGxB,wBAAwB,EAAE,CAC9C,GAAM,CAAAyB,cAAc,CAAGH,MAAM,CAACI,QAAQ,CAClCC,SAAS,CACT,iBAAM,CAAAH,WAAW,CAAC,CAAEI,QAAQ,CAAE,IAAK,CAAC,CAAC,GAEzC,mBACEjB,IAAA,CAACU,cAAc,CAACQ,EAAE,EAAAX,QAAA,cAChBL,KAAA,CAACZ,YAAY,EAAC6B,IAAI,CAAEP,QAAQ,CAACK,QAAQ,GAAK,QAAS,CAAAV,QAAA,eACjDP,IAAA,CAACV,YAAY,CAAC8B,OAAO,EACnBC,QAAQ,CAAE,SAAAA,SAAA,CAAM,CACdR,WAAW,CAAC,CACVI,QAAQ,CAAEL,QAAQ,CAACK,QAAQ,GAAK,QAAQ,CAAG,IAAI,CAAG,QACpD,CAAC,CAAC,CACJ,CAAE,CACF,cAAY,mBAAmB,CAAAV,QAAA,CAE9Bb,iBAAiB,EACG,cACvBQ,KAAA,CAACZ,YAAY,CAACgC,OAAO,EACnBR,cAAc,CAAEA,cAAe,CAC/BN,QAAQ,CAAEZ,oBAAoB,CAACY,QAAQ,CAAE,UAAM,CAC7CK,WAAW,CAAC,CAAEI,QAAQ,CAAE,IAAK,CAAC,CAAC,CACjC,CAAC,CAAE,CAAAV,QAAA,EAEFA,QAAQ,CACRI,MAAM,CAACI,QAAQ,EAAIH,QAAQ,CAACW,aAAa,CAACC,IAAI,CAAG,CAAC,eACjDtB,KAAA,aAAUuB,SAAS,CAAC,kBAAkB,CAAAlB,QAAA,eACpCP,IAAA,WAAAO,QAAA,CAASd,CAAC,CAAC,sBAAsB,CAAC,EAAU,cAC5CO,IAAA,CAACR,QAAQ,EACPkC,MAAM,CAAE,IAAK,CACbH,aAAa,CAAEX,QAAQ,CAACW,aAAc,EACtC,GAEL,GACoB,GACV,EACG,CAExB,CAAC,CACF,CACD,CACEH,OAAO,CAAE9B,YAAY,CAAC8B,OAAO,CAC7BO,IAAI,CAAErC,YAAY,CAACqC,IAAI,CACvBC,QAAQ,CAAEtC,YAAY,CAACsC,QAAQ,CAC/BC,UAAU,CAAEvC,YAAY,CAACuC,UAAU,CACnCC,KAAK,CAAExC,YAAY,CAACwC,KAAK,CACzBC,SAAS,CAAEzC,YAAY,CAACyC,SAAS,CACjCxC,YAAY,CAAZA,YACF,CAAC,CACF,CAED,cAAe,CAAAY,QAAQ"},"metadata":{},"sourceType":"module","externalDependencies":[]}