{"ast":null,"code":"import{useCallback,useEffect,useRef}from\"react\";import{CloseIcon}from\"./icons\";import\"./Toast.scss\";import{ToolButton}from\"./ToolButton\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var DEFAULT_TOAST_TIMEOUT=5000;export var Toast=function Toast(_ref){var message=_ref.message,onClose=_ref.onClose,_ref$closable=_ref.closable,closable=_ref$closable===void 0?false:_ref$closable,_ref$duration=_ref.duration,duration=_ref$duration===void 0?DEFAULT_TOAST_TIMEOUT:_ref$duration;var timerRef=useRef(0);var shouldAutoClose=duration!==Infinity;var scheduleTimeout=useCallback(function(){if(!shouldAutoClose){return;}timerRef.current=window.setTimeout(function(){return onClose();},duration);},[onClose,duration,shouldAutoClose]);useEffect(function(){if(!shouldAutoClose){return;}scheduleTimeout();return function(){return clearTimeout(timerRef.current);};},[scheduleTimeout,message,duration,shouldAutoClose]);var onMouseEnter=shouldAutoClose?function(){return clearTimeout(timerRef===null||timerRef===void 0?void 0:timerRef.current);}:undefined;var onMouseLeave=shouldAutoClose?scheduleTimeout:undefined;return/*#__PURE__*/_jsxs(\"div\",{className:\"Toast\",onMouseEnter:onMouseEnter,onMouseLeave:onMouseLeave,children:[/*#__PURE__*/_jsx(\"p\",{className:\"Toast__message\",children:message}),closable&&/*#__PURE__*/_jsx(ToolButton,{icon:CloseIcon,\"aria-label\":\"close\",type:\"icon\",onClick:onClose,className:\"close\"})]});};","map":{"version":3,"names":["useCallback","useEffect","useRef","CloseIcon","ToolButton","jsx","_jsx","jsxs","_jsxs","DEFAULT_TOAST_TIMEOUT","Toast","_ref","message","onClose","_ref$closable","closable","_ref$duration","duration","timerRef","shouldAutoClose","Infinity","scheduleTimeout","current","window","setTimeout","clearTimeout","onMouseEnter","undefined","onMouseLeave","className","children","icon","type","onClick"],"sources":["D:/project/excalidraw-cn/src/components/Toast.tsx"],"sourcesContent":["import { useCallback, useEffect, useRef } from \"react\";\nimport { CloseIcon } from \"./icons\";\nimport \"./Toast.scss\";\nimport { ToolButton } from \"./ToolButton\";\n\nconst DEFAULT_TOAST_TIMEOUT = 5000;\n\nexport const Toast = ({\n  message,\n  onClose,\n  closable = false,\n  // To prevent autoclose, pass duration as Infinity\n  duration = DEFAULT_TOAST_TIMEOUT,\n}: {\n  message: string;\n  onClose: () => void;\n  closable?: boolean;\n  duration?: number;\n}) => {\n  const timerRef = useRef<number>(0);\n  const shouldAutoClose = duration !== Infinity;\n  const scheduleTimeout = useCallback(() => {\n    if (!shouldAutoClose) {\n      return;\n    }\n    timerRef.current = window.setTimeout(() => onClose(), duration);\n  }, [onClose, duration, shouldAutoClose]);\n\n  useEffect(() => {\n    if (!shouldAutoClose) {\n      return;\n    }\n    scheduleTimeout();\n    return () => clearTimeout(timerRef.current);\n  }, [scheduleTimeout, message, duration, shouldAutoClose]);\n\n  const onMouseEnter = shouldAutoClose\n    ? () => clearTimeout(timerRef?.current)\n    : undefined;\n  const onMouseLeave = shouldAutoClose ? scheduleTimeout : undefined;\n  return (\n    <div\n      className=\"Toast\"\n      onMouseEnter={onMouseEnter}\n      onMouseLeave={onMouseLeave}\n    >\n      <p className=\"Toast__message\">{message}</p>\n      {closable && (\n        <ToolButton\n          icon={CloseIcon}\n          aria-label=\"close\"\n          type=\"icon\"\n          onClick={onClose}\n          className=\"close\"\n        />\n      )}\n    </div>\n  );\n};\n"],"mappings":"AAAA,OAASA,WAAW,CAAEC,SAAS,CAAEC,MAAM,KAAQ,OAAO,CACtD,OAASC,SAAS,KAAQ,SAAS,CACnC,MAAO,cAAc,CACrB,OAASC,UAAU,KAAQ,cAAc,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAE1C,GAAM,CAAAC,qBAAqB,CAAG,IAAI,CAElC,MAAO,IAAM,CAAAC,KAAK,CAAG,QAAR,CAAAA,KAAKA,CAAAC,IAAA,CAWZ,IAVJ,CAAAC,OAAO,CAAAD,IAAA,CAAPC,OAAO,CACPC,OAAO,CAAAF,IAAA,CAAPE,OAAO,CAAAC,aAAA,CAAAH,IAAA,CACPI,QAAQ,CAARA,QAAQ,CAAAD,aAAA,UAAG,KAAK,CAAAA,aAAA,CAAAE,aAAA,CAAAL,IAAA,CAEhBM,QAAQ,CAARA,QAAQ,CAAAD,aAAA,UAAGP,qBAAqB,CAAAO,aAAA,CAOhC,GAAM,CAAAE,QAAQ,CAAGhB,MAAM,CAAS,CAAC,CAAC,CAClC,GAAM,CAAAiB,eAAe,CAAGF,QAAQ,GAAKG,QAAQ,CAC7C,GAAM,CAAAC,eAAe,CAAGrB,WAAW,CAAC,UAAM,CACxC,GAAI,CAACmB,eAAe,CAAE,CACpB,OACF,CACAD,QAAQ,CAACI,OAAO,CAAGC,MAAM,CAACC,UAAU,CAAC,iBAAM,CAAAX,OAAO,EAAE,GAAEI,QAAQ,CAAC,CACjE,CAAC,CAAE,CAACJ,OAAO,CAAEI,QAAQ,CAAEE,eAAe,CAAC,CAAC,CAExClB,SAAS,CAAC,UAAM,CACd,GAAI,CAACkB,eAAe,CAAE,CACpB,OACF,CACAE,eAAe,EAAE,CACjB,MAAO,kBAAM,CAAAI,YAAY,CAACP,QAAQ,CAACI,OAAO,CAAC,GAC7C,CAAC,CAAE,CAACD,eAAe,CAAET,OAAO,CAAEK,QAAQ,CAAEE,eAAe,CAAC,CAAC,CAEzD,GAAM,CAAAO,YAAY,CAAGP,eAAe,CAChC,iBAAM,CAAAM,YAAY,CAACP,QAAQ,SAARA,QAAQ,iBAARA,QAAQ,CAAEI,OAAO,CAAC,GACrCK,SAAS,CACb,GAAM,CAAAC,YAAY,CAAGT,eAAe,CAAGE,eAAe,CAAGM,SAAS,CAClE,mBACEnB,KAAA,QACEqB,SAAS,CAAC,OAAO,CACjBH,YAAY,CAAEA,YAAa,CAC3BE,YAAY,CAAEA,YAAa,CAAAE,QAAA,eAE3BxB,IAAA,MAAGuB,SAAS,CAAC,gBAAgB,CAAAC,QAAA,CAAElB,OAAO,EAAK,CAC1CG,QAAQ,eACPT,IAAA,CAACF,UAAU,EACT2B,IAAI,CAAE5B,SAAU,CAChB,aAAW,OAAO,CAClB6B,IAAI,CAAC,MAAM,CACXC,OAAO,CAAEpB,OAAQ,CACjBgB,SAAS,CAAC,OAAO,EAEpB,GACG,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}