{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\excalidraw-cn\\\\src\\\\components\\\\Tooltip.tsx\";\nimport \"./Tooltip.scss\";\nimport React, { useEffect } from \"react\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const getTooltipDiv = () => {\n  const existingDiv = document.querySelector(\".excalidraw-tooltip\");\n  if (existingDiv) {\n    return existingDiv;\n  }\n  const div = document.createElement(\"div\");\n  document.body.appendChild(div);\n  div.classList.add(\"excalidraw-tooltip\");\n  return div;\n};\nexport const updateTooltipPosition = function (tooltip, item) {\n  let position = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : \"bottom\";\n  const tooltipRect = tooltip.getBoundingClientRect();\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n  const margin = 5;\n  let left = item.left + item.width / 2 - tooltipRect.width / 2;\n  if (left < 0) {\n    left = margin;\n  } else if (left + tooltipRect.width >= viewportWidth) {\n    left = viewportWidth - tooltipRect.width - margin;\n  }\n  let top;\n  if (position === \"bottom\") {\n    top = item.top + item.height + margin;\n    if (top + tooltipRect.height >= viewportHeight) {\n      top = item.top - tooltipRect.height - margin;\n    }\n  } else {\n    top = item.top - tooltipRect.height - margin;\n    if (top < 0) {\n      top = item.top + item.height + margin;\n    }\n  }\n  Object.assign(tooltip.style, {\n    top: `${top}px`,\n    left: `${left}px`\n  });\n};\nconst updateTooltip = (item, tooltip, label, long) => {\n  tooltip.classList.add(\"excalidraw-tooltip--visible\");\n  tooltip.style.minWidth = long ? \"50ch\" : \"10ch\";\n  tooltip.style.maxWidth = long ? \"50ch\" : \"15ch\";\n  tooltip.textContent = label;\n  const itemRect = item.getBoundingClientRect();\n  updateTooltipPosition(tooltip, itemRect);\n};\nexport const Tooltip = _ref => {\n  let {\n    children,\n    label,\n    long = false,\n    style\n  } = _ref;\n  useEffect(() => {\n    return () => getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\");\n  }, []);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"excalidraw-tooltip-wrapper\",\n    onPointerEnter: event => updateTooltip(event.currentTarget, getTooltipDiv(), label, long),\n    onPointerLeave: () => getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\"),\n    style: style,\n    children: children\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 96,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"names":["React","useEffect","jsxDEV","_jsxDEV","getTooltipDiv","existingDiv","document","querySelector","div","createElement","body","appendChild","classList","add","updateTooltipPosition","tooltip","item","position","arguments","length","undefined","tooltipRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","margin","left","width","top","height","Object","assign","style","updateTooltip","label","long","minWidth","maxWidth","textContent","itemRect","Tooltip","_ref","children","remove","className","onPointerEnter","event","currentTarget","onPointerLeave","fileName","_jsxFileName","lineNumber","columnNumber"],"sources":["D:/project/excalidraw-cn/src/components/Tooltip.tsx"],"sourcesContent":["import \"./Tooltip.scss\";\n\nimport React, { useEffect } from \"react\";\n\nexport const getTooltipDiv = () => {\n  const existingDiv = document.querySelector<HTMLDivElement>(\n    \".excalidraw-tooltip\",\n  );\n  if (existingDiv) {\n    return existingDiv;\n  }\n  const div = document.createElement(\"div\");\n  document.body.appendChild(div);\n  div.classList.add(\"excalidraw-tooltip\");\n  return div;\n};\n\nexport const updateTooltipPosition = (\n  tooltip: HTMLDivElement,\n  item: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  },\n  position: \"bottom\" | \"top\" = \"bottom\",\n) => {\n  const tooltipRect = tooltip.getBoundingClientRect();\n\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const margin = 5;\n\n  let left = item.left + item.width / 2 - tooltipRect.width / 2;\n  if (left < 0) {\n    left = margin;\n  } else if (left + tooltipRect.width >= viewportWidth) {\n    left = viewportWidth - tooltipRect.width - margin;\n  }\n\n  let top: number;\n\n  if (position === \"bottom\") {\n    top = item.top + item.height + margin;\n    if (top + tooltipRect.height >= viewportHeight) {\n      top = item.top - tooltipRect.height - margin;\n    }\n  } else {\n    top = item.top - tooltipRect.height - margin;\n    if (top < 0) {\n      top = item.top + item.height + margin;\n    }\n  }\n\n  Object.assign(tooltip.style, {\n    top: `${top}px`,\n    left: `${left}px`,\n  });\n};\n\nconst updateTooltip = (\n  item: HTMLDivElement,\n  tooltip: HTMLDivElement,\n  label: string,\n  long: boolean,\n) => {\n  tooltip.classList.add(\"excalidraw-tooltip--visible\");\n  tooltip.style.minWidth = long ? \"50ch\" : \"10ch\";\n  tooltip.style.maxWidth = long ? \"50ch\" : \"15ch\";\n\n  tooltip.textContent = label;\n\n  const itemRect = item.getBoundingClientRect();\n  updateTooltipPosition(tooltip, itemRect);\n};\n\ntype TooltipProps = {\n  children: React.ReactNode;\n  label: string;\n  long?: boolean;\n  style?: React.CSSProperties;\n};\n\nexport const Tooltip = ({\n  children,\n  label,\n  long = false,\n  style,\n}: TooltipProps) => {\n  useEffect(() => {\n    return () =>\n      getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\");\n  }, []);\n  return (\n    <div\n      className=\"excalidraw-tooltip-wrapper\"\n      onPointerEnter={(event) =>\n        updateTooltip(\n          event.currentTarget as HTMLDivElement,\n          getTooltipDiv(),\n          label,\n          long,\n        )\n      }\n      onPointerLeave={() =>\n        getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\")\n      }\n      style={style}\n    >\n      {children}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}