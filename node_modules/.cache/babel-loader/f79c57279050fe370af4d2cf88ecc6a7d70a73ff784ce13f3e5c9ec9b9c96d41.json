{"ast":null,"code":"import\"./Tooltip.scss\";import React,{useEffect}from\"react\";import{jsx as _jsx}from\"react/jsx-runtime\";export var getTooltipDiv=function getTooltipDiv(){var existingDiv=document.querySelector(\".excalidraw-tooltip\");if(existingDiv){return existingDiv;}var div=document.createElement(\"div\");document.body.appendChild(div);div.classList.add(\"excalidraw-tooltip\");return div;};export var updateTooltipPosition=function updateTooltipPosition(tooltip,item){var position=arguments.length>2&&arguments[2]!==undefined?arguments[2]:\"bottom\";var tooltipRect=tooltip.getBoundingClientRect();var viewportWidth=window.innerWidth;var viewportHeight=window.innerHeight;var margin=5;var left=item.left+item.width/2-tooltipRect.width/2;if(left<0){left=margin;}else if(left+tooltipRect.width>=viewportWidth){left=viewportWidth-tooltipRect.width-margin;}var top;if(position===\"bottom\"){top=item.top+item.height+margin;if(top+tooltipRect.height>=viewportHeight){top=item.top-tooltipRect.height-margin;}}else{top=item.top-tooltipRect.height-margin;if(top<0){top=item.top+item.height+margin;}}Object.assign(tooltip.style,{top:\"\".concat(top,\"px\"),left:\"\".concat(left,\"px\")});};var updateTooltip=function updateTooltip(item,tooltip,label,long){tooltip.classList.add(\"excalidraw-tooltip--visible\");tooltip.style.minWidth=long?\"50ch\":\"10ch\";tooltip.style.maxWidth=long?\"50ch\":\"15ch\";tooltip.textContent=label;var itemRect=item.getBoundingClientRect();updateTooltipPosition(tooltip,itemRect);};export var Tooltip=function Tooltip(_ref){var children=_ref.children,label=_ref.label,_ref$long=_ref.long,long=_ref$long===void 0?false:_ref$long,style=_ref.style;useEffect(function(){return function(){return getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\");};},[]);return/*#__PURE__*/_jsx(\"div\",{className:\"excalidraw-tooltip-wrapper\",onPointerEnter:function onPointerEnter(event){return updateTooltip(event.currentTarget,getTooltipDiv(),label,long);},onPointerLeave:function onPointerLeave(){return getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\");},style:style,children:children});};","map":{"version":3,"names":["React","useEffect","jsx","_jsx","getTooltipDiv","existingDiv","document","querySelector","div","createElement","body","appendChild","classList","add","updateTooltipPosition","tooltip","item","position","arguments","length","undefined","tooltipRect","getBoundingClientRect","viewportWidth","window","innerWidth","viewportHeight","innerHeight","margin","left","width","top","height","Object","assign","style","concat","updateTooltip","label","long","minWidth","maxWidth","textContent","itemRect","Tooltip","_ref","children","_ref$long","remove","className","onPointerEnter","event","currentTarget","onPointerLeave"],"sources":["D:/project/excalidraw-cn/src/components/Tooltip.tsx"],"sourcesContent":["import \"./Tooltip.scss\";\n\nimport React, { useEffect } from \"react\";\n\nexport const getTooltipDiv = () => {\n  const existingDiv = document.querySelector<HTMLDivElement>(\n    \".excalidraw-tooltip\",\n  );\n  if (existingDiv) {\n    return existingDiv;\n  }\n  const div = document.createElement(\"div\");\n  document.body.appendChild(div);\n  div.classList.add(\"excalidraw-tooltip\");\n  return div;\n};\n\nexport const updateTooltipPosition = (\n  tooltip: HTMLDivElement,\n  item: {\n    left: number;\n    top: number;\n    width: number;\n    height: number;\n  },\n  position: \"bottom\" | \"top\" = \"bottom\",\n) => {\n  const tooltipRect = tooltip.getBoundingClientRect();\n\n  const viewportWidth = window.innerWidth;\n  const viewportHeight = window.innerHeight;\n\n  const margin = 5;\n\n  let left = item.left + item.width / 2 - tooltipRect.width / 2;\n  if (left < 0) {\n    left = margin;\n  } else if (left + tooltipRect.width >= viewportWidth) {\n    left = viewportWidth - tooltipRect.width - margin;\n  }\n\n  let top: number;\n\n  if (position === \"bottom\") {\n    top = item.top + item.height + margin;\n    if (top + tooltipRect.height >= viewportHeight) {\n      top = item.top - tooltipRect.height - margin;\n    }\n  } else {\n    top = item.top - tooltipRect.height - margin;\n    if (top < 0) {\n      top = item.top + item.height + margin;\n    }\n  }\n\n  Object.assign(tooltip.style, {\n    top: `${top}px`,\n    left: `${left}px`,\n  });\n};\n\nconst updateTooltip = (\n  item: HTMLDivElement,\n  tooltip: HTMLDivElement,\n  label: string,\n  long: boolean,\n) => {\n  tooltip.classList.add(\"excalidraw-tooltip--visible\");\n  tooltip.style.minWidth = long ? \"50ch\" : \"10ch\";\n  tooltip.style.maxWidth = long ? \"50ch\" : \"15ch\";\n\n  tooltip.textContent = label;\n\n  const itemRect = item.getBoundingClientRect();\n  updateTooltipPosition(tooltip, itemRect);\n};\n\ntype TooltipProps = {\n  children: React.ReactNode;\n  label: string;\n  long?: boolean;\n  style?: React.CSSProperties;\n};\n\nexport const Tooltip = ({\n  children,\n  label,\n  long = false,\n  style,\n}: TooltipProps) => {\n  useEffect(() => {\n    return () =>\n      getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\");\n  }, []);\n  return (\n    <div\n      className=\"excalidraw-tooltip-wrapper\"\n      onPointerEnter={(event) =>\n        updateTooltip(\n          event.currentTarget as HTMLDivElement,\n          getTooltipDiv(),\n          label,\n          long,\n        )\n      }\n      onPointerLeave={() =>\n        getTooltipDiv().classList.remove(\"excalidraw-tooltip--visible\")\n      }\n      style={style}\n    >\n      {children}\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}