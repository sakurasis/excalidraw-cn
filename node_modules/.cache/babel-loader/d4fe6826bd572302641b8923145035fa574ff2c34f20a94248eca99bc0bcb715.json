{"ast":null,"code":"import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import\"./UserList.scss\";import React from\"react\";import clsx from\"clsx\";import{Tooltip}from\"./Tooltip\";import{useExcalidrawActionManager}from\"./App\";import{jsx as _jsx}from\"react/jsx-runtime\";export var UserList=function UserList(_ref){var className=_ref.className,mobile=_ref.mobile,collaborators=_ref.collaborators;var actionManager=useExcalidrawActionManager();var uniqueCollaborators=new Map();collaborators.forEach(function(collaborator,socketId){uniqueCollaborators.set(// filter on user id, else fall back on unique socketId\ncollaborator.id||socketId,collaborator);});var avatars=uniqueCollaborators.size>0&&Array.from(uniqueCollaborators).filter(function(_ref2){var _ref3=_slicedToArray(_ref2,2),_=_ref3[0],client=_ref3[1];return Object.keys(client).length!==0;}).map(function(_ref4){var _ref5=_slicedToArray(_ref4,2),clientId=_ref5[0],collaborator=_ref5[1];var avatarJSX=actionManager.renderAction(\"goToCollaborator\",[clientId,collaborator]);return mobile?/*#__PURE__*/_jsx(Tooltip,{label:collaborator.username||\"Unknown user\",children:avatarJSX},clientId):/*#__PURE__*/_jsx(React.Fragment,{children:avatarJSX},clientId);});return/*#__PURE__*/_jsx(\"div\",{className:clsx(\"UserList\",className,{UserList_mobile:mobile}),children:avatars});};","map":{"version":3,"names":["React","clsx","Tooltip","useExcalidrawActionManager","jsx","_jsx","UserList","_ref","className","mobile","collaborators","actionManager","uniqueCollaborators","Map","forEach","collaborator","socketId","set","id","avatars","size","Array","from","filter","_ref2","_ref3","_slicedToArray","_","client","Object","keys","length","map","_ref4","_ref5","clientId","avatarJSX","renderAction","label","username","children","Fragment","UserList_mobile"],"sources":["D:/project/excalidraw-cn/src/components/UserList.tsx"],"sourcesContent":["import \"./UserList.scss\";\n\nimport React from \"react\";\nimport clsx from \"clsx\";\nimport { AppState, Collaborator } from \"../types\";\nimport { Tooltip } from \"./Tooltip\";\nimport { useExcalidrawActionManager } from \"./App\";\n\nexport const UserList: React.FC<{\n  className?: string;\n  mobile?: boolean;\n  collaborators: AppState[\"collaborators\"];\n}> = ({ className, mobile, collaborators }) => {\n  const actionManager = useExcalidrawActionManager();\n\n  const uniqueCollaborators = new Map<string, Collaborator>();\n  collaborators.forEach((collaborator, socketId) => {\n    uniqueCollaborators.set(\n      // filter on user id, else fall back on unique socketId\n      collaborator.id || socketId,\n      collaborator,\n    );\n  });\n\n  const avatars =\n    uniqueCollaborators.size > 0 &&\n    Array.from(uniqueCollaborators)\n      .filter(([_, client]) => Object.keys(client).length !== 0)\n      .map(([clientId, collaborator]) => {\n        const avatarJSX = actionManager.renderAction(\"goToCollaborator\", [\n          clientId,\n          collaborator,\n        ]);\n\n        return mobile ? (\n          <Tooltip\n            label={collaborator.username || \"Unknown user\"}\n            key={clientId}\n          >\n            {avatarJSX}\n          </Tooltip>\n        ) : (\n          <React.Fragment key={clientId}>{avatarJSX}</React.Fragment>\n        );\n      });\n\n  return (\n    <div className={clsx(\"UserList\", className, { UserList_mobile: mobile })}>\n      {avatars}\n    </div>\n  );\n};\n"],"mappings":"8GAAA,MAAO,iBAAiB,CAExB,MAAO,CAAAA,KAAK,KAAM,OAAO,CACzB,MAAO,CAAAC,IAAI,KAAM,MAAM,CAEvB,OAASC,OAAO,KAAQ,WAAW,CACnC,OAASC,0BAA0B,KAAQ,OAAO,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBAEnD,MAAO,IAAM,CAAAC,QAIX,CAAG,QAJQ,CAAAA,QAIXA,CAAAC,IAAA,CAA6C,IAAvC,CAAAC,SAAS,CAAAD,IAAA,CAATC,SAAS,CAAEC,MAAM,CAAAF,IAAA,CAANE,MAAM,CAAEC,aAAa,CAAAH,IAAA,CAAbG,aAAa,CACtC,GAAM,CAAAC,aAAa,CAAGR,0BAA0B,EAAE,CAElD,GAAM,CAAAS,mBAAmB,CAAG,GAAI,CAAAC,GAAG,EAAwB,CAC3DH,aAAa,CAACI,OAAO,CAAC,SAACC,YAAY,CAAEC,QAAQ,CAAK,CAChDJ,mBAAmB,CAACK,GAAG,CACrB;AACAF,YAAY,CAACG,EAAE,EAAIF,QAAQ,CAC3BD,YAAY,CACb,CACH,CAAC,CAAC,CAEF,GAAM,CAAAI,OAAO,CACXP,mBAAmB,CAACQ,IAAI,CAAG,CAAC,EAC5BC,KAAK,CAACC,IAAI,CAACV,mBAAmB,CAAC,CAC5BW,MAAM,CAAC,SAAAC,KAAA,MAAAC,KAAA,CAAAC,cAAA,CAAAF,KAAA,IAAEG,CAAC,CAAAF,KAAA,IAAEG,MAAM,CAAAH,KAAA,UAAM,CAAAI,MAAM,CAACC,IAAI,CAACF,MAAM,CAAC,CAACG,MAAM,GAAK,CAAC,GAAC,CACzDC,GAAG,CAAC,SAAAC,KAAA,CAA8B,KAAAC,KAAA,CAAAR,cAAA,CAAAO,KAAA,IAA5BE,QAAQ,CAAAD,KAAA,IAAEnB,YAAY,CAAAmB,KAAA,IAC3B,GAAM,CAAAE,SAAS,CAAGzB,aAAa,CAAC0B,YAAY,CAAC,kBAAkB,CAAE,CAC/DF,QAAQ,CACRpB,YAAY,CACb,CAAC,CAEF,MAAO,CAAAN,MAAM,cACXJ,IAAA,CAACH,OAAO,EACNoC,KAAK,CAAEvB,YAAY,CAACwB,QAAQ,EAAI,cAAe,CAAAC,QAAA,CAG9CJ,SAAS,EAFLD,QAAQ,CAGL,cAEV9B,IAAA,CAACL,KAAK,CAACyC,QAAQ,EAAAD,QAAA,CAAiBJ,SAAS,EAApBD,QAAQ,CAC9B,CACH,CAAC,CAAC,CAEN,mBACE9B,IAAA,QAAKG,SAAS,CAAEP,IAAI,CAAC,UAAU,CAAEO,SAAS,CAAE,CAAEkC,eAAe,CAAEjC,MAAO,CAAC,CAAE,CAAA+B,QAAA,CACtErB,OAAO,EACJ,CAEV,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}