{"ast":null,"code":"import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{HamburgerMenuIcon,palette}from\"../components/icons\";import{ToolButton}from\"../components/ToolButton\";import{t}from\"../i18n\";import{showSelectedShapeActions,getNonDeletedElements}from\"../element\";import{register}from\"./register\";import{allowFullScreen,exitFullScreen,isFullScreen}from\"../utils\";import{KEYS}from\"../keys\";import{jsx as _jsx}from\"react/jsx-runtime\";export var actionToggleCanvasMenu=register({name:\"toggleCanvasMenu\",trackEvent:{category:\"menu\"},perform:function perform(_,appState){return{appState:_objectSpread(_objectSpread({},appState),{},{openMenu:appState.openMenu===\"canvas\"?null:\"canvas\"}),commitToHistory:false};},PanelComponent:function PanelComponent(_ref){var appState=_ref.appState,updateData=_ref.updateData;return/*#__PURE__*/_jsx(ToolButton,{type:\"button\",icon:HamburgerMenuIcon,\"aria-label\":t(\"buttons.menu\"),onClick:updateData,selected:appState.openMenu===\"canvas\"});}});export var actionToggleEditMenu=register({name:\"toggleEditMenu\",trackEvent:{category:\"menu\"},perform:function perform(_elements,appState){return{appState:_objectSpread(_objectSpread({},appState),{},{openMenu:appState.openMenu===\"shape\"?null:\"shape\"}),commitToHistory:false};},PanelComponent:function PanelComponent(_ref2){var elements=_ref2.elements,appState=_ref2.appState,updateData=_ref2.updateData;return/*#__PURE__*/_jsx(ToolButton,{visible:showSelectedShapeActions(appState,getNonDeletedElements(elements)),type:\"button\",icon:palette,\"aria-label\":t(\"buttons.edit\"),onClick:updateData,selected:appState.openMenu===\"shape\"});}});export var actionFullScreen=register({name:\"toggleFullScreen\",viewMode:true,trackEvent:{category:\"canvas\",predicate:function predicate(appState){return!isFullScreen();}},perform:function perform(){if(!isFullScreen()){allowFullScreen();}if(isFullScreen()){exitFullScreen();}return{commitToHistory:false};}});export var actionShortcuts=register({name:\"toggleShortcuts\",viewMode:true,trackEvent:{category:\"menu\",action:\"toggleHelpDialog\"},perform:function perform(_elements,appState,_,_ref3){var focusContainer=_ref3.focusContainer;if(appState.openDialog===\"help\"){focusContainer();}return{appState:_objectSpread(_objectSpread({},appState),{},{openDialog:appState.openDialog===\"help\"?null:\"help\"}),commitToHistory:false};},keyTest:function keyTest(event){return event.key===KEYS.QUESTION_MARK;}});","map":{"version":3,"names":["HamburgerMenuIcon","palette","ToolButton","t","showSelectedShapeActions","getNonDeletedElements","register","allowFullScreen","exitFullScreen","isFullScreen","KEYS","jsx","_jsx","actionToggleCanvasMenu","name","trackEvent","category","perform","_","appState","_objectSpread","openMenu","commitToHistory","PanelComponent","_ref","updateData","type","icon","onClick","selected","actionToggleEditMenu","_elements","_ref2","elements","visible","actionFullScreen","viewMode","predicate","actionShortcuts","action","_ref3","focusContainer","openDialog","keyTest","event","key","QUESTION_MARK"],"sources":["D:/project/excalidraw-cn/src/actions/actionMenu.tsx"],"sourcesContent":["import { HamburgerMenuIcon, palette } from \"../components/icons\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { t } from \"../i18n\";\nimport { showSelectedShapeActions, getNonDeletedElements } from \"../element\";\nimport { register } from \"./register\";\nimport { allowFullScreen, exitFullScreen, isFullScreen } from \"../utils\";\nimport { KEYS } from \"../keys\";\n\nexport const actionToggleCanvasMenu = register({\n  name: \"toggleCanvasMenu\",\n  trackEvent: { category: \"menu\" },\n  perform: (_, appState) => ({\n    appState: {\n      ...appState,\n      openMenu: appState.openMenu === \"canvas\" ? null : \"canvas\",\n    },\n    commitToHistory: false,\n  }),\n  PanelComponent: ({ appState, updateData }) => (\n    <ToolButton\n      type=\"button\"\n      icon={HamburgerMenuIcon}\n      aria-label={t(\"buttons.menu\")}\n      onClick={updateData}\n      selected={appState.openMenu === \"canvas\"}\n    />\n  ),\n});\n\nexport const actionToggleEditMenu = register({\n  name: \"toggleEditMenu\",\n  trackEvent: { category: \"menu\" },\n  perform: (_elements, appState) => ({\n    appState: {\n      ...appState,\n      openMenu: appState.openMenu === \"shape\" ? null : \"shape\",\n    },\n    commitToHistory: false,\n  }),\n  PanelComponent: ({ elements, appState, updateData }) => (\n    <ToolButton\n      visible={showSelectedShapeActions(\n        appState,\n        getNonDeletedElements(elements),\n      )}\n      type=\"button\"\n      icon={palette}\n      aria-label={t(\"buttons.edit\")}\n      onClick={updateData}\n      selected={appState.openMenu === \"shape\"}\n    />\n  ),\n});\n\nexport const actionFullScreen = register({\n  name: \"toggleFullScreen\",\n  viewMode: true,\n  trackEvent: { category: \"canvas\", predicate: (appState) => !isFullScreen() },\n  perform: () => {\n    if (!isFullScreen()) {\n      allowFullScreen();\n    }\n    if (isFullScreen()) {\n      exitFullScreen();\n    }\n    return {\n      commitToHistory: false,\n    };\n  },\n});\n\nexport const actionShortcuts = register({\n  name: \"toggleShortcuts\",\n  viewMode: true,\n  trackEvent: { category: \"menu\", action: \"toggleHelpDialog\" },\n  perform: (_elements, appState, _, { focusContainer }) => {\n    if (appState.openDialog === \"help\") {\n      focusContainer();\n    }\n    return {\n      appState: {\n        ...appState,\n        openDialog: appState.openDialog === \"help\" ? null : \"help\",\n      },\n      commitToHistory: false,\n    };\n  },\n  keyTest: (event) => event.key === KEYS.QUESTION_MARK,\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}