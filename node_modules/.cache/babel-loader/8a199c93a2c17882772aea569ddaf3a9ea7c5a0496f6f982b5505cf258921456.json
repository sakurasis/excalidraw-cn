{"ast":null,"code":"import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _toConsumableArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useCallback,useEffect,useMemo,useRef,useState}from\"react\";import{serializeLibraryAsJSON}from\"../data/json\";import{t}from\"../i18n\";import{arrayToMap}from\"../utils\";import Stack from\"./Stack\";import{MIME_TYPES}from\"../constants\";import Spinner from\"./Spinner\";import{duplicateElements}from\"../element/newElement\";import{LibraryMenuControlButtons}from\"./LibraryMenuControlButtons\";import{LibraryDropdownMenu}from\"./LibraryMenuHeaderContent\";import{LibraryMenuSection,LibraryMenuSectionGrid}from\"./LibraryMenuSection\";import{useScrollPosition}from\"../hooks/useScrollPosition\";import{useLibraryCache}from\"../hooks/useLibraryItemSvg\";import\"./LibraryMenuItems.scss\";// using an odd number of items per batch so the rendering creates an irregular\n// pattern which looks more organic\nimport{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var ITEMS_RENDERED_PER_BATCH=17;// when render outputs cached we can render many more items per batch to\n// speed it up\nvar CACHED_ITEMS_RENDERED_PER_BATCH=64;export default function LibraryMenuItems(_ref){var isLoading=_ref.isLoading,libraryItems=_ref.libraryItems,onAddToLibrary=_ref.onAddToLibrary,onInsertLibraryItems=_ref.onInsertLibraryItems,pendingElements=_ref.pendingElements,theme=_ref.theme,id=_ref.id,libraryReturnUrl=_ref.libraryReturnUrl,onSelectItems=_ref.onSelectItems,selectedItems=_ref.selectedItems;var libraryContainerRef=useRef(null);var scrollPosition=useScrollPosition(libraryContainerRef);// This effect has to be called only on first render, therefore  `scrollPosition` isn't in the dependency array\nuseEffect(function(){if(scrollPosition>0){var _libraryContainerRef$;(_libraryContainerRef$=libraryContainerRef.current)===null||_libraryContainerRef$===void 0?void 0:_libraryContainerRef$.scrollTo(0,scrollPosition);}},[]);// eslint-disable-line react-hooks/exhaustive-deps\nvar _useLibraryCache=useLibraryCache(),svgCache=_useLibraryCache.svgCache;var unpublishedItems=useMemo(function(){return libraryItems.filter(function(item){return item.status!==\"published\";});},[libraryItems]);var publishedItems=useMemo(function(){return libraryItems.filter(function(item){return item.status===\"published\";});},[libraryItems]);var showBtn=!libraryItems.length&&!pendingElements.length;var isLibraryEmpty=!pendingElements.length&&!unpublishedItems.length&&!publishedItems.length;var _useState=useState(null),_useState2=_slicedToArray(_useState,2),lastSelectedItem=_useState2[0],setLastSelectedItem=_useState2[1];var onItemSelectToggle=useCallback(function(id,event){var shouldSelect=!selectedItems.includes(id);var orderedItems=[].concat(_toConsumableArray(unpublishedItems),_toConsumableArray(publishedItems));if(shouldSelect){if(event.shiftKey&&lastSelectedItem){var rangeStart=orderedItems.findIndex(function(item){return item.id===lastSelectedItem;});var rangeEnd=orderedItems.findIndex(function(item){return item.id===id;});if(rangeStart===-1||rangeEnd===-1){onSelectItems([].concat(_toConsumableArray(selectedItems),[id]));return;}var selectedItemsMap=arrayToMap(selectedItems);var nextSelectedIds=orderedItems.reduce(function(acc,item,idx){if(idx>=rangeStart&&idx<=rangeEnd||selectedItemsMap.has(item.id)){acc.push(item.id);}return acc;},[]);onSelectItems(nextSelectedIds);}else{onSelectItems([].concat(_toConsumableArray(selectedItems),[id]));}setLastSelectedItem(id);}else{setLastSelectedItem(null);onSelectItems(selectedItems.filter(function(_id){return _id!==id;}));}},[lastSelectedItem,onSelectItems,publishedItems,selectedItems,unpublishedItems]);var getInsertedElements=useCallback(function(id){var targetElements;if(selectedItems.includes(id)){targetElements=libraryItems.filter(function(item){return selectedItems.includes(item.id);});}else{targetElements=libraryItems.filter(function(item){return item.id===id;});}return targetElements.map(function(item){return _objectSpread(_objectSpread({},item),{},{// duplicate each library item before inserting on canvas to confine\n// ids and bindings to each library item. See #6465\nelements:duplicateElements(item.elements,{randomizeSeed:true})});});},[libraryItems,selectedItems]);var onItemDrag=useCallback(function(id,event){event.dataTransfer.setData(MIME_TYPES.excalidrawlib,serializeLibraryAsJSON(getInsertedElements(id)));},[getInsertedElements]);var isItemSelected=useCallback(function(id){if(!id){return false;}return selectedItems.includes(id);},[selectedItems]);var onAddToLibraryClick=useCallback(function(){onAddToLibrary(pendingElements);},[pendingElements,onAddToLibrary]);var onItemClick=useCallback(function(id){if(id){onInsertLibraryItems(getInsertedElements(id));}},[getInsertedElements,onInsertLibraryItems]);var itemsRenderedPerBatch=svgCache.size>=libraryItems.length?CACHED_ITEMS_RENDERED_PER_BATCH:ITEMS_RENDERED_PER_BATCH;return/*#__PURE__*/_jsxs(\"div\",{className:\"library-menu-items-container\",style:pendingElements.length||unpublishedItems.length||publishedItems.length?{justifyContent:\"flex-start\"}:{borderBottom:0},children:[!isLibraryEmpty&&/*#__PURE__*/_jsx(LibraryDropdownMenu,{selectedItems:selectedItems,onSelectItems:onSelectItems,className:\"library-menu-dropdown-container--in-heading\"}),/*#__PURE__*/_jsxs(Stack.Col,{className:\"library-menu-items-container__items\",align:\"start\",gap:1,style:{flex:publishedItems.length>0?1:\"0 1 auto\",marginBottom:0},ref:libraryContainerRef,children:[/*#__PURE__*/_jsxs(_Fragment,{children:[!isLibraryEmpty&&/*#__PURE__*/_jsx(\"div\",{className:\"library-menu-items-container__header\",children:t(\"labels.personalLib\")}),isLoading&&/*#__PURE__*/_jsx(\"div\",{style:{position:\"absolute\",top:\"var(--container-padding-y)\",right:\"var(--container-padding-x)\",transform:\"translateY(50%)\"},children:/*#__PURE__*/_jsx(Spinner,{})}),!pendingElements.length&&!unpublishedItems.length?/*#__PURE__*/_jsxs(\"div\",{className:\"library-menu-items__no-items\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"library-menu-items__no-items__label\",children:t(\"library.noItems\")}),/*#__PURE__*/_jsx(\"div\",{className:\"library-menu-items__no-items__hint\",children:publishedItems.length>0?t(\"library.hint_emptyPrivateLibrary\"):t(\"library.hint_emptyLibrary\")})]}):/*#__PURE__*/_jsxs(LibraryMenuSectionGrid,{children:[pendingElements.length>0&&/*#__PURE__*/_jsx(LibraryMenuSection,{itemsRenderedPerBatch:itemsRenderedPerBatch,items:[{id:null,elements:pendingElements}],onItemSelectToggle:onItemSelectToggle,onItemDrag:onItemDrag,onClick:onAddToLibraryClick,isItemSelected:isItemSelected,svgCache:svgCache}),/*#__PURE__*/_jsx(LibraryMenuSection,{itemsRenderedPerBatch:itemsRenderedPerBatch,items:unpublishedItems,onItemSelectToggle:onItemSelectToggle,onItemDrag:onItemDrag,onClick:onItemClick,isItemSelected:isItemSelected,svgCache:svgCache})]})]}),/*#__PURE__*/_jsxs(_Fragment,{children:[(publishedItems.length>0||pendingElements.length>0||unpublishedItems.length>0)&&/*#__PURE__*/_jsx(\"div\",{className:\"library-menu-items-container__header library-menu-items-container__header--excal\",children:t(\"labels.excalidrawLib\")}),publishedItems.length>0?/*#__PURE__*/_jsx(LibraryMenuSectionGrid,{children:/*#__PURE__*/_jsx(LibraryMenuSection,{itemsRenderedPerBatch:itemsRenderedPerBatch,items:publishedItems,onItemSelectToggle:onItemSelectToggle,onItemDrag:onItemDrag,onClick:onItemClick,isItemSelected:isItemSelected,svgCache:svgCache})}):unpublishedItems.length>0?/*#__PURE__*/_jsx(\"div\",{style:{margin:\"1rem 0\",display:\"flex\",flexDirection:\"column\",alignItems:\"center\",justifyContent:\"center\",width:\"100%\",fontSize:\".9rem\"},children:t(\"library.noItems\")}):null]}),showBtn&&/*#__PURE__*/_jsx(LibraryMenuControlButtons,{style:{padding:\"16px 0\",width:\"100%\"},id:id,libraryReturnUrl:libraryReturnUrl,theme:theme,children:/*#__PURE__*/_jsx(LibraryDropdownMenu,{selectedItems:selectedItems,onSelectItems:onSelectItems})})]})]});}","map":{"version":3,"names":["React","useCallback","useEffect","useMemo","useRef","useState","serializeLibraryAsJSON","t","arrayToMap","Stack","MIME_TYPES","Spinner","duplicateElements","LibraryMenuControlButtons","LibraryDropdownMenu","LibraryMenuSection","LibraryMenuSectionGrid","useScrollPosition","useLibraryCache","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","ITEMS_RENDERED_PER_BATCH","CACHED_ITEMS_RENDERED_PER_BATCH","LibraryMenuItems","_ref","isLoading","libraryItems","onAddToLibrary","onInsertLibraryItems","pendingElements","theme","id","libraryReturnUrl","onSelectItems","selectedItems","libraryContainerRef","scrollPosition","_libraryContainerRef$","current","scrollTo","_useLibraryCache","svgCache","unpublishedItems","filter","item","status","publishedItems","showBtn","length","isLibraryEmpty","_useState","_useState2","_slicedToArray","lastSelectedItem","setLastSelectedItem","onItemSelectToggle","event","shouldSelect","includes","orderedItems","concat","_toConsumableArray","shiftKey","rangeStart","findIndex","rangeEnd","selectedItemsMap","nextSelectedIds","reduce","acc","idx","has","push","_id","getInsertedElements","targetElements","map","_objectSpread","elements","randomizeSeed","onItemDrag","dataTransfer","setData","excalidrawlib","isItemSelected","onAddToLibraryClick","onItemClick","itemsRenderedPerBatch","size","className","style","justifyContent","borderBottom","children","Col","align","gap","flex","marginBottom","ref","position","top","right","transform","items","onClick","margin","display","flexDirection","alignItems","width","fontSize","padding"],"sources":["D:/project/excalidraw-cn/src/components/LibraryMenuItems.tsx"],"sourcesContent":["import React, {\n  useCallback,\n  useEffect,\n  useMemo,\n  useRef,\n  useState,\n} from \"react\";\nimport { serializeLibraryAsJSON } from \"../data/json\";\nimport { t } from \"../i18n\";\nimport {\n  ExcalidrawProps,\n  LibraryItem,\n  LibraryItems,\n  UIAppState,\n} from \"../types\";\nimport { arrayToMap } from \"../utils\";\nimport Stack from \"./Stack\";\nimport { MIME_TYPES } from \"../constants\";\nimport Spinner from \"./Spinner\";\nimport { duplicateElements } from \"../element/newElement\";\nimport { LibraryMenuControlButtons } from \"./LibraryMenuControlButtons\";\nimport { LibraryDropdownMenu } from \"./LibraryMenuHeaderContent\";\nimport {\n  LibraryMenuSection,\n  LibraryMenuSectionGrid,\n} from \"./LibraryMenuSection\";\nimport { useScrollPosition } from \"../hooks/useScrollPosition\";\nimport { useLibraryCache } from \"../hooks/useLibraryItemSvg\";\n\nimport \"./LibraryMenuItems.scss\";\n\n// using an odd number of items per batch so the rendering creates an irregular\n// pattern which looks more organic\nconst ITEMS_RENDERED_PER_BATCH = 17;\n// when render outputs cached we can render many more items per batch to\n// speed it up\nconst CACHED_ITEMS_RENDERED_PER_BATCH = 64;\n\nexport default function LibraryMenuItems({\n  isLoading,\n  libraryItems,\n  onAddToLibrary,\n  onInsertLibraryItems,\n  pendingElements,\n  theme,\n  id,\n  libraryReturnUrl,\n  onSelectItems,\n  selectedItems,\n}: {\n  isLoading: boolean;\n  libraryItems: LibraryItems;\n  pendingElements: LibraryItem[\"elements\"];\n  onInsertLibraryItems: (libraryItems: LibraryItems) => void;\n  onAddToLibrary: (elements: LibraryItem[\"elements\"]) => void;\n  libraryReturnUrl: ExcalidrawProps[\"libraryReturnUrl\"];\n  theme: UIAppState[\"theme\"];\n  id: string;\n  selectedItems: LibraryItem[\"id\"][];\n  onSelectItems: (id: LibraryItem[\"id\"][]) => void;\n}) {\n  const libraryContainerRef = useRef<HTMLDivElement>(null);\n  const scrollPosition = useScrollPosition<HTMLDivElement>(libraryContainerRef);\n\n  // This effect has to be called only on first render, therefore  `scrollPosition` isn't in the dependency array\n  useEffect(() => {\n    if (scrollPosition > 0) {\n      libraryContainerRef.current?.scrollTo(0, scrollPosition);\n    }\n  }, []); // eslint-disable-line react-hooks/exhaustive-deps\n\n  const { svgCache } = useLibraryCache();\n  const unpublishedItems = useMemo(\n    () => libraryItems.filter((item) => item.status !== \"published\"),\n    [libraryItems],\n  );\n\n  const publishedItems = useMemo(\n    () => libraryItems.filter((item) => item.status === \"published\"),\n    [libraryItems],\n  );\n\n  const showBtn = !libraryItems.length && !pendingElements.length;\n\n  const isLibraryEmpty =\n    !pendingElements.length &&\n    !unpublishedItems.length &&\n    !publishedItems.length;\n\n  const [lastSelectedItem, setLastSelectedItem] = useState<\n    LibraryItem[\"id\"] | null\n  >(null);\n\n  const onItemSelectToggle = useCallback(\n    (id: LibraryItem[\"id\"], event: React.MouseEvent) => {\n      const shouldSelect = !selectedItems.includes(id);\n\n      const orderedItems = [...unpublishedItems, ...publishedItems];\n\n      if (shouldSelect) {\n        if (event.shiftKey && lastSelectedItem) {\n          const rangeStart = orderedItems.findIndex(\n            (item) => item.id === lastSelectedItem,\n          );\n          const rangeEnd = orderedItems.findIndex((item) => item.id === id);\n\n          if (rangeStart === -1 || rangeEnd === -1) {\n            onSelectItems([...selectedItems, id]);\n            return;\n          }\n\n          const selectedItemsMap = arrayToMap(selectedItems);\n          const nextSelectedIds = orderedItems.reduce(\n            (acc: LibraryItem[\"id\"][], item, idx) => {\n              if (\n                (idx >= rangeStart && idx <= rangeEnd) ||\n                selectedItemsMap.has(item.id)\n              ) {\n                acc.push(item.id);\n              }\n              return acc;\n            },\n            [],\n          );\n\n          onSelectItems(nextSelectedIds);\n        } else {\n          onSelectItems([...selectedItems, id]);\n        }\n        setLastSelectedItem(id);\n      } else {\n        setLastSelectedItem(null);\n        onSelectItems(selectedItems.filter((_id) => _id !== id));\n      }\n    },\n    [\n      lastSelectedItem,\n      onSelectItems,\n      publishedItems,\n      selectedItems,\n      unpublishedItems,\n    ],\n  );\n\n  const getInsertedElements = useCallback(\n    (id: string) => {\n      let targetElements;\n      if (selectedItems.includes(id)) {\n        targetElements = libraryItems.filter((item) =>\n          selectedItems.includes(item.id),\n        );\n      } else {\n        targetElements = libraryItems.filter((item) => item.id === id);\n      }\n      return targetElements.map((item) => {\n        return {\n          ...item,\n          // duplicate each library item before inserting on canvas to confine\n          // ids and bindings to each library item. See #6465\n          elements: duplicateElements(item.elements, { randomizeSeed: true }),\n        };\n      });\n    },\n    [libraryItems, selectedItems],\n  );\n\n  const onItemDrag = useCallback(\n    (id: LibraryItem[\"id\"], event: React.DragEvent) => {\n      event.dataTransfer.setData(\n        MIME_TYPES.excalidrawlib,\n        serializeLibraryAsJSON(getInsertedElements(id)),\n      );\n    },\n    [getInsertedElements],\n  );\n\n  const isItemSelected = useCallback(\n    (id: LibraryItem[\"id\"] | null) => {\n      if (!id) {\n        return false;\n      }\n\n      return selectedItems.includes(id);\n    },\n    [selectedItems],\n  );\n\n  const onAddToLibraryClick = useCallback(() => {\n    onAddToLibrary(pendingElements);\n  }, [pendingElements, onAddToLibrary]);\n\n  const onItemClick = useCallback(\n    (id: LibraryItem[\"id\"] | null) => {\n      if (id) {\n        onInsertLibraryItems(getInsertedElements(id));\n      }\n    },\n    [getInsertedElements, onInsertLibraryItems],\n  );\n\n  const itemsRenderedPerBatch =\n    svgCache.size >= libraryItems.length\n      ? CACHED_ITEMS_RENDERED_PER_BATCH\n      : ITEMS_RENDERED_PER_BATCH;\n\n  return (\n    <div\n      className=\"library-menu-items-container\"\n      style={\n        pendingElements.length ||\n        unpublishedItems.length ||\n        publishedItems.length\n          ? { justifyContent: \"flex-start\" }\n          : { borderBottom: 0 }\n      }\n    >\n      {!isLibraryEmpty && (\n        <LibraryDropdownMenu\n          selectedItems={selectedItems}\n          onSelectItems={onSelectItems}\n          className=\"library-menu-dropdown-container--in-heading\"\n        />\n      )}\n      <Stack.Col\n        className=\"library-menu-items-container__items\"\n        align=\"start\"\n        gap={1}\n        style={{\n          flex: publishedItems.length > 0 ? 1 : \"0 1 auto\",\n          marginBottom: 0,\n        }}\n        ref={libraryContainerRef}\n      >\n        <>\n          {!isLibraryEmpty && (\n            <div className=\"library-menu-items-container__header\">\n              {t(\"labels.personalLib\")}\n            </div>\n          )}\n          {isLoading && (\n            <div\n              style={{\n                position: \"absolute\",\n                top: \"var(--container-padding-y)\",\n                right: \"var(--container-padding-x)\",\n                transform: \"translateY(50%)\",\n              }}\n            >\n              <Spinner />\n            </div>\n          )}\n          {!pendingElements.length && !unpublishedItems.length ? (\n            <div className=\"library-menu-items__no-items\">\n              <div className=\"library-menu-items__no-items__label\">\n                {t(\"library.noItems\")}\n              </div>\n              <div className=\"library-menu-items__no-items__hint\">\n                {publishedItems.length > 0\n                  ? t(\"library.hint_emptyPrivateLibrary\")\n                  : t(\"library.hint_emptyLibrary\")}\n              </div>\n            </div>\n          ) : (\n            <LibraryMenuSectionGrid>\n              {pendingElements.length > 0 && (\n                <LibraryMenuSection\n                  itemsRenderedPerBatch={itemsRenderedPerBatch}\n                  items={[{ id: null, elements: pendingElements }]}\n                  onItemSelectToggle={onItemSelectToggle}\n                  onItemDrag={onItemDrag}\n                  onClick={onAddToLibraryClick}\n                  isItemSelected={isItemSelected}\n                  svgCache={svgCache}\n                />\n              )}\n              <LibraryMenuSection\n                itemsRenderedPerBatch={itemsRenderedPerBatch}\n                items={unpublishedItems}\n                onItemSelectToggle={onItemSelectToggle}\n                onItemDrag={onItemDrag}\n                onClick={onItemClick}\n                isItemSelected={isItemSelected}\n                svgCache={svgCache}\n              />\n            </LibraryMenuSectionGrid>\n          )}\n        </>\n\n        <>\n          {(publishedItems.length > 0 ||\n            pendingElements.length > 0 ||\n            unpublishedItems.length > 0) && (\n            <div className=\"library-menu-items-container__header library-menu-items-container__header--excal\">\n              {t(\"labels.excalidrawLib\")}\n            </div>\n          )}\n          {publishedItems.length > 0 ? (\n            <LibraryMenuSectionGrid>\n              <LibraryMenuSection\n                itemsRenderedPerBatch={itemsRenderedPerBatch}\n                items={publishedItems}\n                onItemSelectToggle={onItemSelectToggle}\n                onItemDrag={onItemDrag}\n                onClick={onItemClick}\n                isItemSelected={isItemSelected}\n                svgCache={svgCache}\n              />\n            </LibraryMenuSectionGrid>\n          ) : unpublishedItems.length > 0 ? (\n            <div\n              style={{\n                margin: \"1rem 0\",\n                display: \"flex\",\n                flexDirection: \"column\",\n                alignItems: \"center\",\n                justifyContent: \"center\",\n                width: \"100%\",\n                fontSize: \".9rem\",\n              }}\n            >\n              {t(\"library.noItems\")}\n            </div>\n          ) : null}\n        </>\n\n        {showBtn && (\n          <LibraryMenuControlButtons\n            style={{ padding: \"16px 0\", width: \"100%\" }}\n            id={id}\n            libraryReturnUrl={libraryReturnUrl}\n            theme={theme}\n          >\n            <LibraryDropdownMenu\n              selectedItems={selectedItems}\n              onSelectItems={onSelectItems}\n            />\n          </LibraryMenuControlButtons>\n        )}\n      </Stack.Col>\n    </div>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}