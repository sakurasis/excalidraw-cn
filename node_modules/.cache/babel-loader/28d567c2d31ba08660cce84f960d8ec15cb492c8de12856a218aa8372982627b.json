{"ast":null,"code":"import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import clsx from\"clsx\";import{useAtom}from\"jotai\";import{useEffect,useRef}from\"react\";import{activeColorPickerSectionAtom,getColorNameAndShadeFromColor}from\"./colorPickerUtils\";import HotkeyLabel from\"./HotkeyLabel\";import{t}from\"../../i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var ShadeList=function ShadeList(_ref){var hex=_ref.hex,onChange=_ref.onChange,palette=_ref.palette;var colorObj=getColorNameAndShadeFromColor({color:hex||\"transparent\",palette:palette});var _useAtom=useAtom(activeColorPickerSectionAtom),_useAtom2=_slicedToArray(_useAtom,2),activeColorPickerSection=_useAtom2[0],setActiveColorPickerSection=_useAtom2[1];var btnRef=useRef(null);useEffect(function(){if(btnRef.current&&activeColorPickerSection===\"shades\"){btnRef.current.focus();}},[colorObj,activeColorPickerSection]);if(colorObj){var colorName=colorObj.colorName,shade=colorObj.shade;var shades=palette[colorName];if(Array.isArray(shades)){return/*#__PURE__*/_jsx(\"div\",{className:\"color-picker-content--default shades\",children:shades.map(function(color,i){return/*#__PURE__*/_jsxs(\"button\",{ref:i===shade&&activeColorPickerSection===\"shades\"?btnRef:undefined,tabIndex:-1,type:\"button\",className:clsx(\"color-picker__button color-picker__button--large\",{active:i===shade}),\"aria-label\":\"Shade\",title:\"\".concat(colorName,\" - \").concat(i+1),style:color?{\"--swatch-color\":color}:undefined,onClick:function onClick(){onChange(color);setActiveColorPickerSection(\"shades\");},children:[/*#__PURE__*/_jsx(\"div\",{className:\"color-picker__button-outline\"}),/*#__PURE__*/_jsx(HotkeyLabel,{color:color,keyLabel:i+1,isShade:true})]},i);})});}}return/*#__PURE__*/_jsxs(\"div\",{className:\"color-picker-content--default\",style:{position:\"relative\"},tabIndex:-1,children:[/*#__PURE__*/_jsx(\"button\",{type:\"button\",tabIndex:-1,className:\"color-picker__button color-picker__button--large color-picker__button--no-focus-visible\"}),/*#__PURE__*/_jsx(\"div\",{tabIndex:-1,style:{position:\"absolute\",top:0,left:0,right:0,bottom:0,display:\"flex\",alignItems:\"center\",justifyContent:\"center\",textAlign:\"center\",fontSize:\"0.75rem\"},children:t(\"colorPicker.noShades\")})]});};","map":{"version":3,"names":["clsx","useAtom","useEffect","useRef","activeColorPickerSectionAtom","getColorNameAndShadeFromColor","HotkeyLabel","t","jsx","_jsx","jsxs","_jsxs","ShadeList","_ref","hex","onChange","palette","colorObj","color","_useAtom","_useAtom2","_slicedToArray","activeColorPickerSection","setActiveColorPickerSection","btnRef","current","focus","colorName","shade","shades","Array","isArray","className","children","map","i","ref","undefined","tabIndex","type","active","title","concat","style","onClick","keyLabel","isShade","position","top","left","right","bottom","display","alignItems","justifyContent","textAlign","fontSize"],"sources":["D:/project/excalidraw-cn/src/components/ColorPicker/ShadeList.tsx"],"sourcesContent":["import clsx from \"clsx\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport {\n  activeColorPickerSectionAtom,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport { t } from \"../../i18n\";\nimport { ColorPaletteCustom } from \"../../colors\";\n\ninterface ShadeListProps {\n  hex: string;\n  onChange: (color: string) => void;\n  palette: ColorPaletteCustom;\n}\n\nexport const ShadeList = ({ hex, onChange, palette }: ShadeListProps) => {\n  const colorObj = getColorNameAndShadeFromColor({\n    color: hex || \"transparent\",\n    palette,\n  });\n\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"shades\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj, activeColorPickerSection]);\n\n  if (colorObj) {\n    const { colorName, shade } = colorObj;\n\n    const shades = palette[colorName];\n\n    if (Array.isArray(shades)) {\n      return (\n        <div className=\"color-picker-content--default shades\">\n          {shades.map((color, i) => (\n            <button\n              ref={\n                i === shade && activeColorPickerSection === \"shades\"\n                  ? btnRef\n                  : undefined\n              }\n              tabIndex={-1}\n              key={i}\n              type=\"button\"\n              className={clsx(\n                \"color-picker__button color-picker__button--large\",\n                { active: i === shade },\n              )}\n              aria-label=\"Shade\"\n              title={`${colorName} - ${i + 1}`}\n              style={color ? { \"--swatch-color\": color } : undefined}\n              onClick={() => {\n                onChange(color);\n                setActiveColorPickerSection(\"shades\");\n              }}\n            >\n              <div className=\"color-picker__button-outline\" />\n              <HotkeyLabel color={color} keyLabel={i + 1} isShade />\n            </button>\n          ))}\n        </div>\n      );\n    }\n  }\n\n  return (\n    <div\n      className=\"color-picker-content--default\"\n      style={{ position: \"relative\" }}\n      tabIndex={-1}\n    >\n      <button\n        type=\"button\"\n        tabIndex={-1}\n        className=\"color-picker__button color-picker__button--large color-picker__button--no-focus-visible\"\n      />\n      <div\n        tabIndex={-1}\n        style={{\n          position: \"absolute\",\n          top: 0,\n          left: 0,\n          right: 0,\n          bottom: 0,\n          display: \"flex\",\n          alignItems: \"center\",\n          justifyContent: \"center\",\n          textAlign: \"center\",\n          fontSize: \"0.75rem\",\n        }}\n      >\n        {t(\"colorPicker.noShades\")}\n      </div>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}