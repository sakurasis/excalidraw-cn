{"ast":null,"code":"import{DistributeHorizontallyIcon,DistributeVerticallyIcon}from\"../components/icons\";import{ToolButton}from\"../components/ToolButton\";import{distributeElements}from\"../distribute\";import{getNonDeletedElements}from\"../element\";import{updateFrameMembershipOfSelectedElements}from\"../frame\";import{t}from\"../i18n\";import{CODES,KEYS}from\"../keys\";import{isSomeElementSelected}from\"../scene\";import{arrayToMap,getShortcutKey}from\"../utils\";import{register}from\"./register\";import{jsx as _jsx}from\"react/jsx-runtime\";var enableActionGroup=function enableActionGroup(appState,app){var selectedElements=app.scene.getSelectedElements(appState);return selectedElements.length>1&&// TODO enable distributing frames when implemented properly\n!selectedElements.some(function(el){return el.type===\"frame\";});};var distributeSelectedElements=function distributeSelectedElements(elements,appState,app,distribution){var selectedElements=app.scene.getSelectedElements(appState);var updatedElements=distributeElements(selectedElements,distribution);var updatedElementsMap=arrayToMap(updatedElements);return updateFrameMembershipOfSelectedElements(elements.map(function(element){return updatedElementsMap.get(element.id)||element;}),appState,app);};export var distributeHorizontally=register({name:\"distributeHorizontally\",trackEvent:{category:\"element\"},perform:function perform(elements,appState,_,app){return{appState:appState,elements:distributeSelectedElements(elements,appState,app,{space:\"between\",axis:\"x\"}),commitToHistory:true};},keyTest:function keyTest(event){return!event[KEYS.CTRL_OR_CMD]&&event.altKey&&event.code===CODES.H;},PanelComponent:function PanelComponent(_ref){var elements=_ref.elements,appState=_ref.appState,updateData=_ref.updateData,app=_ref.app;return/*#__PURE__*/_jsx(ToolButton,{hidden:!enableActionGroup(appState,app),type:\"button\",icon:DistributeHorizontallyIcon,onClick:function onClick(){return updateData(null);},title:\"\".concat(t(\"labels.distributeHorizontally\"),\" \\u2014 \").concat(getShortcutKey(\"Alt+H\")),\"aria-label\":t(\"labels.distributeHorizontally\"),visible:isSomeElementSelected(getNonDeletedElements(elements),appState)});}});export var distributeVertically=register({name:\"distributeVertically\",trackEvent:{category:\"element\"},perform:function perform(elements,appState,_,app){return{appState:appState,elements:distributeSelectedElements(elements,appState,app,{space:\"between\",axis:\"y\"}),commitToHistory:true};},keyTest:function keyTest(event){return!event[KEYS.CTRL_OR_CMD]&&event.altKey&&event.code===CODES.V;},PanelComponent:function PanelComponent(_ref2){var elements=_ref2.elements,appState=_ref2.appState,updateData=_ref2.updateData,app=_ref2.app;return/*#__PURE__*/_jsx(ToolButton,{hidden:!enableActionGroup(appState,app),type:\"button\",icon:DistributeVerticallyIcon,onClick:function onClick(){return updateData(null);},title:\"\".concat(t(\"labels.distributeVertically\"),\" \\u2014 \").concat(getShortcutKey(\"Alt+V\")),\"aria-label\":t(\"labels.distributeVertically\"),visible:isSomeElementSelected(getNonDeletedElements(elements),appState)});}});","map":{"version":3,"names":["DistributeHorizontallyIcon","DistributeVerticallyIcon","ToolButton","distributeElements","getNonDeletedElements","updateFrameMembershipOfSelectedElements","t","CODES","KEYS","isSomeElementSelected","arrayToMap","getShortcutKey","register","jsx","_jsx","enableActionGroup","appState","app","selectedElements","scene","getSelectedElements","length","some","el","type","distributeSelectedElements","elements","distribution","updatedElements","updatedElementsMap","map","element","get","id","distributeHorizontally","name","trackEvent","category","perform","_","space","axis","commitToHistory","keyTest","event","CTRL_OR_CMD","altKey","code","H","PanelComponent","_ref","updateData","hidden","icon","onClick","title","concat","visible","distributeVertically","V","_ref2"],"sources":["D:/project/excalidraw-cn/src/actions/actionDistribute.tsx"],"sourcesContent":["import {\n  DistributeHorizontallyIcon,\n  DistributeVerticallyIcon,\n} from \"../components/icons\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { distributeElements, Distribution } from \"../distribute\";\nimport { getNonDeletedElements } from \"../element\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { updateFrameMembershipOfSelectedElements } from \"../frame\";\nimport { t } from \"../i18n\";\nimport { CODES, KEYS } from \"../keys\";\nimport { isSomeElementSelected } from \"../scene\";\nimport { AppClassProperties, AppState } from \"../types\";\nimport { arrayToMap, getShortcutKey } from \"../utils\";\nimport { register } from \"./register\";\n\nconst enableActionGroup = (appState: AppState, app: AppClassProperties) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n  return (\n    selectedElements.length > 1 &&\n    // TODO enable distributing frames when implemented properly\n    !selectedElements.some((el) => el.type === \"frame\")\n  );\n};\n\nconst distributeSelectedElements = (\n  elements: readonly ExcalidrawElement[],\n  appState: Readonly<AppState>,\n  app: AppClassProperties,\n  distribution: Distribution,\n) => {\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  const updatedElements = distributeElements(selectedElements, distribution);\n\n  const updatedElementsMap = arrayToMap(updatedElements);\n\n  return updateFrameMembershipOfSelectedElements(\n    elements.map((element) => updatedElementsMap.get(element.id) || element),\n    appState,\n    app,\n  );\n};\n\nexport const distributeHorizontally = register({\n  name: \"distributeHorizontally\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: distributeSelectedElements(elements, appState, app, {\n        space: \"between\",\n        axis: \"x\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.H,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(appState, app)}\n      type=\"button\"\n      icon={DistributeHorizontallyIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.distributeHorizontally\")} — ${getShortcutKey(\n        \"Alt+H\",\n      )}`}\n      aria-label={t(\"labels.distributeHorizontally\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n\nexport const distributeVertically = register({\n  name: \"distributeVertically\",\n  trackEvent: { category: \"element\" },\n  perform: (elements, appState, _, app) => {\n    return {\n      appState,\n      elements: distributeSelectedElements(elements, appState, app, {\n        space: \"between\",\n        axis: \"y\",\n      }),\n      commitToHistory: true,\n    };\n  },\n  keyTest: (event) =>\n    !event[KEYS.CTRL_OR_CMD] && event.altKey && event.code === CODES.V,\n  PanelComponent: ({ elements, appState, updateData, app }) => (\n    <ToolButton\n      hidden={!enableActionGroup(appState, app)}\n      type=\"button\"\n      icon={DistributeVerticallyIcon}\n      onClick={() => updateData(null)}\n      title={`${t(\"labels.distributeVertically\")} — ${getShortcutKey(\"Alt+V\")}`}\n      aria-label={t(\"labels.distributeVertically\")}\n      visible={isSomeElementSelected(getNonDeletedElements(elements), appState)}\n    />\n  ),\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}