{"ast":null,"code":"import _regeneratorRuntime from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useEffect,useState}from\"react\";import{LoadingMessage}from\"./LoadingMessage\";import{defaultLang,languages,setLanguage}from\"../i18n\";import{jsx as _jsx}from\"react/jsx-runtime\";export var InitializeApp=function InitializeApp(props){var _useState=useState(true),_useState2=_slicedToArray(_useState,2),loading=_useState2[0],setLoading=_useState2[1];useEffect(function(){var updateLang=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.next=2;return setLanguage(currentLang);case 2:setLoading(false);case 3:case\"end\":return _context.stop();}},_callee);}));return function updateLang(){return _ref.apply(this,arguments);};}();var currentLang=languages.find(function(lang){return lang.code===props.langCode;})||defaultLang;updateLang();},[props.langCode]);return loading?/*#__PURE__*/_jsx(LoadingMessage,{theme:props.theme}):props.children;};","map":{"version":3,"names":["React","useEffect","useState","LoadingMessage","defaultLang","languages","setLanguage","jsx","_jsx","InitializeApp","props","_useState","_useState2","_slicedToArray","loading","setLoading","updateLang","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","wrap","_callee$","_context","prev","next","currentLang","stop","apply","arguments","find","lang","code","langCode","theme","children"],"sources":["D:/project/excalidraw-cn/src/components/InitializeApp.tsx"],"sourcesContent":["import React, { useEffect, useState } from \"react\";\n\nimport { LoadingMessage } from \"./LoadingMessage\";\nimport { defaultLang, Language, languages, setLanguage } from \"../i18n\";\nimport { Theme } from \"../element/types\";\n\ninterface Props {\n  langCode: Language[\"code\"];\n  children: React.ReactElement;\n  theme?: Theme;\n}\n\nexport const InitializeApp = (props: Props) => {\n  const [loading, setLoading] = useState(true);\n\n  useEffect(() => {\n    const updateLang = async () => {\n      await setLanguage(currentLang);\n      setLoading(false);\n    };\n    const currentLang =\n      languages.find((lang) => lang.code === props.langCode) || defaultLang;\n    updateLang();\n  }, [props.langCode]);\n\n  return loading ? <LoadingMessage theme={props.theme} /> : props.children;\n};\n"],"mappings":"0VAAA,MAAO,CAAAA,KAAK,EAAIC,SAAS,CAAEC,QAAQ,KAAQ,OAAO,CAElD,OAASC,cAAc,KAAQ,kBAAkB,CACjD,OAASC,WAAW,CAAYC,SAAS,CAAEC,WAAW,KAAQ,SAAS,CAAC,OAAAC,GAAA,IAAAC,IAAA,yBASxE,MAAO,IAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAY,CAAK,CAC7C,IAAAC,SAAA,CAA8BT,QAAQ,CAAC,IAAI,CAAC,CAAAU,UAAA,CAAAC,cAAA,CAAAF,SAAA,IAArCG,OAAO,CAAAF,UAAA,IAAEG,UAAU,CAAAH,UAAA,IAE1BX,SAAS,CAAC,UAAM,CACd,GAAM,CAAAe,UAAU,6BAAAC,IAAA,CAAAC,iBAAA,cAAAC,mBAAA,GAAAC,IAAA,CAAG,SAAAC,QAAA,SAAAF,mBAAA,GAAAG,IAAA,UAAAC,SAAAC,QAAA,iBAAAA,QAAA,CAAAC,IAAA,CAAAD,QAAA,CAAAE,IAAA,SAAAF,QAAA,CAAAE,IAAA,SACX,CAAApB,WAAW,CAACqB,WAAW,CAAC,QAC9BZ,UAAU,CAAC,KAAK,CAAC,CAAC,wBAAAS,QAAA,CAAAI,IAAA,MAAAP,OAAA,GACnB,kBAHK,CAAAL,UAAUA,CAAA,SAAAC,IAAA,CAAAY,KAAA,MAAAC,SAAA,OAGf,CACD,GAAM,CAAAH,WAAW,CACftB,SAAS,CAAC0B,IAAI,CAAC,SAACC,IAAI,QAAK,CAAAA,IAAI,CAACC,IAAI,GAAKvB,KAAK,CAACwB,QAAQ,GAAC,EAAI9B,WAAW,CACvEY,UAAU,EAAE,CACd,CAAC,CAAE,CAACN,KAAK,CAACwB,QAAQ,CAAC,CAAC,CAEpB,MAAO,CAAApB,OAAO,cAAGN,IAAA,CAACL,cAAc,EAACgC,KAAK,CAAEzB,KAAK,CAACyB,KAAM,EAAG,CAAGzB,KAAK,CAAC0B,QAAQ,CAC1E,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}