{"ast":null,"code":"import _regeneratorRuntime from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{questionCircle,saveAs}from\"../components/icons\";import{ProjectName}from\"../components/ProjectName\";import{ToolButton}from\"../components/ToolButton\";import{Tooltip}from\"../components/Tooltip\";import{DarkModeToggle}from\"../components/DarkModeToggle\";import{loadFromJSON,saveAsJSON}from\"../data\";import{resaveAsImageWithScene}from\"../data/resave\";import{t}from\"../i18n\";import{useDevice}from\"../components/App\";import{KEYS}from\"../keys\";import{register}from\"./register\";import{CheckboxItem}from\"../components/CheckboxItem\";import{getExportSize}from\"../scene/export\";import{DEFAULT_EXPORT_PADDING,EXPORT_SCALES,THEME}from\"../constants\";import{getSelectedElements,isSomeElementSelected}from\"../scene\";import{getNonDeletedElements}from\"../element\";import{isImageFileHandle}from\"../data/blob\";import{nativeFileSystemSupported}from\"../data/filesystem\";import\"../components/ToolIcon.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export var actionChangeProjectName=register({name:\"changeProjectName\",trackEvent:false,perform:function perform(_elements,appState,value){return{appState:_objectSpread(_objectSpread({},appState),{},{name:value}),commitToHistory:false};},PanelComponent:function PanelComponent(_ref){var _data$ignoreFocus;var appState=_ref.appState,updateData=_ref.updateData,appProps=_ref.appProps,data=_ref.data;return/*#__PURE__*/_jsx(ProjectName,{label:t(\"labels.fileTitle\"),value:appState.name||\"Unnamed\",onChange:function onChange(name){return updateData(name);},isNameEditable:typeof appProps.name===\"undefined\"&&!appState.viewModeEnabled,ignoreFocus:(_data$ignoreFocus=data===null||data===void 0?void 0:data.ignoreFocus)!==null&&_data$ignoreFocus!==void 0?_data$ignoreFocus:false});}});export var actionChangeExportScale=register({name:\"changeExportScale\",trackEvent:{category:\"export\",action:\"scale\"},perform:function perform(_elements,appState,value){return{appState:_objectSpread(_objectSpread({},appState),{},{exportScale:value}),commitToHistory:false};},PanelComponent:function PanelComponent(_ref2){var allElements=_ref2.elements,appState=_ref2.appState,updateData=_ref2.updateData;var elements=getNonDeletedElements(allElements);var exportSelected=isSomeElementSelected(elements,appState);var exportedElements=exportSelected?getSelectedElements(elements,appState):elements;return/*#__PURE__*/_jsx(_Fragment,{children:EXPORT_SCALES.map(function(s){var _getExportSize=getExportSize(exportedElements,DEFAULT_EXPORT_PADDING,s),_getExportSize2=_slicedToArray(_getExportSize,2),width=_getExportSize2[0],height=_getExportSize2[1];var scaleButtonTitle=\"\".concat(t(\"buttons.scale\"),\" \").concat(s,\"x (\").concat(width,\"x\").concat(height,\")\");return/*#__PURE__*/_jsx(ToolButton,{size:\"small\",type:\"radio\",icon:\"\".concat(s,\"x\"),name:\"export-canvas-scale\",title:scaleButtonTitle,\"aria-label\":scaleButtonTitle,id:\"export-canvas-scale\",checked:s===appState.exportScale,onChange:function onChange(){return updateData(s);}},s);})});}});export var actionChangeExportBackground=register({name:\"changeExportBackground\",trackEvent:{category:\"export\",action:\"toggleBackground\"},perform:function perform(_elements,appState,value){return{appState:_objectSpread(_objectSpread({},appState),{},{exportBackground:value}),commitToHistory:false};},PanelComponent:function PanelComponent(_ref3){var appState=_ref3.appState,updateData=_ref3.updateData;return/*#__PURE__*/_jsx(CheckboxItem,{checked:appState.exportBackground,onChange:function onChange(checked){return updateData(checked);},children:t(\"labels.withBackground\")});}});export var actionChangeExportEmbedScene=register({name:\"changeExportEmbedScene\",trackEvent:{category:\"export\",action:\"embedScene\"},perform:function perform(_elements,appState,value){return{appState:_objectSpread(_objectSpread({},appState),{},{exportEmbedScene:value}),commitToHistory:false};},PanelComponent:function PanelComponent(_ref4){var appState=_ref4.appState,updateData=_ref4.updateData;return/*#__PURE__*/_jsxs(CheckboxItem,{checked:appState.exportEmbedScene,onChange:function onChange(checked){return updateData(checked);},children:[t(\"labels.exportEmbedScene\"),/*#__PURE__*/_jsx(Tooltip,{label:t(\"labels.exportEmbedScene_details\"),long:true,children:/*#__PURE__*/_jsx(\"div\",{className:\"excalidraw-tooltip-icon\",children:questionCircle})})]});}});export var actionSaveToActiveFile=register({name:\"saveToActiveFile\",trackEvent:{category:\"export\"},predicate:function predicate(elements,appState,props,app){return!!app.props.UIOptions.canvasActions.saveToActiveFile&&!!appState.fileHandle&&!appState.viewModeEnabled;},perform:function(){var _perform=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(elements,appState,value,app){var fileHandleExists,_ref5,fileHandle;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:fileHandleExists=!!appState.fileHandle;_context.prev=1;if(!isImageFileHandle(appState.fileHandle)){_context.next=8;break;}_context.next=5;return resaveAsImageWithScene(elements,appState,app.files);case 5:_context.t0=_context.sent;_context.next=11;break;case 8:_context.next=10;return saveAsJSON(elements,appState,app.files);case 10:_context.t0=_context.sent;case 11:_ref5=_context.t0;fileHandle=_ref5.fileHandle;return _context.abrupt(\"return\",{commitToHistory:false,appState:_objectSpread(_objectSpread({},appState),{},{fileHandle:fileHandle,toast:fileHandleExists?{message:fileHandle!==null&&fileHandle!==void 0&&fileHandle.name?t(\"toast.fileSavedToFilename\").replace(\"{filename}\",\"\\\"\".concat(fileHandle.name,\"\\\"\")):t(\"toast.fileSaved\")}:null})});case 16:_context.prev=16;_context.t1=_context[\"catch\"](1);if((_context.t1===null||_context.t1===void 0?void 0:_context.t1.name)!==\"AbortError\"){console.error(_context.t1);}else{console.warn(_context.t1);}return _context.abrupt(\"return\",{commitToHistory:false});case 20:case\"end\":return _context.stop();}},_callee,null,[[1,16]]);}));function perform(_x,_x2,_x3,_x4){return _perform.apply(this,arguments);}return perform;}(),keyTest:function keyTest(event){return event.key===KEYS.S&&event[KEYS.CTRL_OR_CMD]&&!event.shiftKey;}});export var actionSaveFileToDisk=register({name:\"saveFileToDisk\",viewMode:true,trackEvent:{category:\"export\"},perform:function(){var _perform2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(elements,appState,value,app){var _yield$saveAsJSON,fileHandle;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:_context2.prev=0;_context2.next=3;return saveAsJSON(elements,_objectSpread(_objectSpread({},appState),{},{fileHandle:null}),app.files);case 3:_yield$saveAsJSON=_context2.sent;fileHandle=_yield$saveAsJSON.fileHandle;return _context2.abrupt(\"return\",{commitToHistory:false,appState:_objectSpread(_objectSpread({},appState),{},{fileHandle:fileHandle})});case 8:_context2.prev=8;_context2.t0=_context2[\"catch\"](0);if((_context2.t0===null||_context2.t0===void 0?void 0:_context2.t0.name)!==\"AbortError\"){console.error(_context2.t0);}else{console.warn(_context2.t0);}return _context2.abrupt(\"return\",{commitToHistory:false});case 12:case\"end\":return _context2.stop();}},_callee2,null,[[0,8]]);}));function perform(_x5,_x6,_x7,_x8){return _perform2.apply(this,arguments);}return perform;}(),keyTest:function keyTest(event){return event.key===KEYS.S&&event.shiftKey&&event[KEYS.CTRL_OR_CMD];},PanelComponent:function PanelComponent(_ref6){var updateData=_ref6.updateData;return/*#__PURE__*/_jsx(ToolButton,{type:\"button\",icon:saveAs,title:t(\"buttons.saveAs\"),\"aria-label\":t(\"buttons.saveAs\"),showAriaLabel:useDevice().isMobile,hidden:!nativeFileSystemSupported,onClick:function onClick(){return updateData(null);},\"data-testid\":\"save-as-button\"});}});export var actionLoadScene=register({name:\"loadScene\",trackEvent:{category:\"export\"},predicate:function predicate(elements,appState,props,app){return!!app.props.UIOptions.canvasActions.loadScene&&!appState.viewModeEnabled;},perform:function(){var _perform3=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(elements,appState,_,app){var _yield$loadFromJSON,loadedElements,loadedAppState,files;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:_context3.prev=0;_context3.next=3;return loadFromJSON(appState,elements);case 3:_yield$loadFromJSON=_context3.sent;loadedElements=_yield$loadFromJSON.elements;loadedAppState=_yield$loadFromJSON.appState;files=_yield$loadFromJSON.files;return _context3.abrupt(\"return\",{elements:loadedElements,appState:loadedAppState,files:files,commitToHistory:true});case 10:_context3.prev=10;_context3.t0=_context3[\"catch\"](0);if(!((_context3.t0===null||_context3.t0===void 0?void 0:_context3.t0.name)===\"AbortError\")){_context3.next=15;break;}console.warn(_context3.t0);return _context3.abrupt(\"return\",false);case 15:return _context3.abrupt(\"return\",{elements:elements,appState:_objectSpread(_objectSpread({},appState),{},{errorMessage:_context3.t0.message}),files:app.files,commitToHistory:false});case 16:case\"end\":return _context3.stop();}},_callee3,null,[[0,10]]);}));function perform(_x9,_x10,_x11,_x12){return _perform3.apply(this,arguments);}return perform;}(),keyTest:function keyTest(event){return event[KEYS.CTRL_OR_CMD]&&event.key===KEYS.O;}});export var actionExportWithDarkMode=register({name:\"exportWithDarkMode\",trackEvent:{category:\"export\",action:\"toggleTheme\"},perform:function perform(_elements,appState,value){return{appState:_objectSpread(_objectSpread({},appState),{},{exportWithDarkMode:value}),commitToHistory:false};},PanelComponent:function PanelComponent(_ref7){var appState=_ref7.appState,updateData=_ref7.updateData;return/*#__PURE__*/_jsx(\"div\",{style:{display:\"flex\",justifyContent:\"flex-end\",marginTop:\"-45px\",marginBottom:\"10px\"},children:/*#__PURE__*/_jsx(DarkModeToggle,{value:appState.exportWithDarkMode?THEME.DARK:THEME.LIGHT,onChange:function onChange(theme){updateData(theme===THEME.DARK);},title:t(\"labels.toggleExportColorScheme\")})});}});","map":{"version":3,"names":["questionCircle","saveAs","ProjectName","ToolButton","Tooltip","DarkModeToggle","loadFromJSON","saveAsJSON","resaveAsImageWithScene","t","useDevice","KEYS","register","CheckboxItem","getExportSize","DEFAULT_EXPORT_PADDING","EXPORT_SCALES","THEME","getSelectedElements","isSomeElementSelected","getNonDeletedElements","isImageFileHandle","nativeFileSystemSupported","jsx","_jsx","Fragment","_Fragment","jsxs","_jsxs","actionChangeProjectName","name","trackEvent","perform","_elements","appState","value","_objectSpread","commitToHistory","PanelComponent","_ref","_data$ignoreFocus","updateData","appProps","data","label","onChange","isNameEditable","viewModeEnabled","ignoreFocus","actionChangeExportScale","category","action","exportScale","_ref2","allElements","elements","exportSelected","exportedElements","children","map","s","_getExportSize","_getExportSize2","_slicedToArray","width","height","scaleButtonTitle","concat","size","type","icon","title","id","checked","actionChangeExportBackground","exportBackground","_ref3","actionChangeExportEmbedScene","exportEmbedScene","_ref4","long","className","actionSaveToActiveFile","predicate","props","app","UIOptions","canvasActions","saveToActiveFile","fileHandle","_perform","_asyncToGenerator","_regeneratorRuntime","mark","_callee","fileHandleExists","_ref5","wrap","_callee$","_context","prev","next","files","t0","sent","abrupt","toast","message","replace","t1","console","error","warn","stop","_x","_x2","_x3","_x4","apply","arguments","keyTest","event","key","S","CTRL_OR_CMD","shiftKey","actionSaveFileToDisk","viewMode","_perform2","_callee2","_yield$saveAsJSON","_callee2$","_context2","_x5","_x6","_x7","_x8","_ref6","showAriaLabel","isMobile","hidden","onClick","actionLoadScene","loadScene","_perform3","_callee3","_","_yield$loadFromJSON","loadedElements","loadedAppState","_callee3$","_context3","errorMessage","_x9","_x10","_x11","_x12","O","actionExportWithDarkMode","exportWithDarkMode","_ref7","style","display","justifyContent","marginTop","marginBottom","DARK","LIGHT","theme"],"sources":["D:/project/excalidraw-cn/src/actions/actionExport.tsx"],"sourcesContent":["import { questionCircle, saveAs } from \"../components/icons\";\nimport { ProjectName } from \"../components/ProjectName\";\nimport { ToolButton } from \"../components/ToolButton\";\nimport { Tooltip } from \"../components/Tooltip\";\nimport { DarkModeToggle } from \"../components/DarkModeToggle\";\nimport { loadFromJSON, saveAsJSON } from \"../data\";\nimport { resaveAsImageWithScene } from \"../data/resave\";\nimport { t } from \"../i18n\";\nimport { useDevice } from \"../components/App\";\nimport { KEYS } from \"../keys\";\nimport { register } from \"./register\";\nimport { CheckboxItem } from \"../components/CheckboxItem\";\nimport { getExportSize } from \"../scene/export\";\nimport { DEFAULT_EXPORT_PADDING, EXPORT_SCALES, THEME } from \"../constants\";\nimport { getSelectedElements, isSomeElementSelected } from \"../scene\";\nimport { getNonDeletedElements } from \"../element\";\nimport { isImageFileHandle } from \"../data/blob\";\nimport { nativeFileSystemSupported } from \"../data/filesystem\";\nimport { Theme } from \"../element/types\";\n\nimport \"../components/ToolIcon.scss\";\n\nexport const actionChangeProjectName = register({\n  name: \"changeProjectName\",\n  trackEvent: false,\n  perform: (_elements, appState, value) => {\n    return { appState: { ...appState, name: value }, commitToHistory: false };\n  },\n  PanelComponent: ({ appState, updateData, appProps, data }) => (\n    <ProjectName\n      label={t(\"labels.fileTitle\")}\n      value={appState.name || \"Unnamed\"}\n      onChange={(name: string) => updateData(name)}\n      isNameEditable={\n        typeof appProps.name === \"undefined\" && !appState.viewModeEnabled\n      }\n      ignoreFocus={data?.ignoreFocus ?? false}\n    />\n  ),\n});\n\nexport const actionChangeExportScale = register({\n  name: \"changeExportScale\",\n  trackEvent: { category: \"export\", action: \"scale\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportScale: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ elements: allElements, appState, updateData }) => {\n    const elements = getNonDeletedElements(allElements);\n    const exportSelected = isSomeElementSelected(elements, appState);\n    const exportedElements = exportSelected\n      ? getSelectedElements(elements, appState)\n      : elements;\n\n    return (\n      <>\n        {EXPORT_SCALES.map((s) => {\n          const [width, height] = getExportSize(\n            exportedElements,\n            DEFAULT_EXPORT_PADDING,\n            s,\n          );\n\n          const scaleButtonTitle = `${t(\n            \"buttons.scale\",\n          )} ${s}x (${width}x${height})`;\n\n          return (\n            <ToolButton\n              key={s}\n              size=\"small\"\n              type=\"radio\"\n              icon={`${s}x`}\n              name=\"export-canvas-scale\"\n              title={scaleButtonTitle}\n              aria-label={scaleButtonTitle}\n              id=\"export-canvas-scale\"\n              checked={s === appState.exportScale}\n              onChange={() => updateData(s)}\n            />\n          );\n        })}\n      </>\n    );\n  },\n});\n\nexport const actionChangeExportBackground = register({\n  name: \"changeExportBackground\",\n  trackEvent: { category: \"export\", action: \"toggleBackground\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportBackground: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <CheckboxItem\n      checked={appState.exportBackground}\n      onChange={(checked) => updateData(checked)}\n    >\n      {t(\"labels.withBackground\")}\n    </CheckboxItem>\n  ),\n});\n\nexport const actionChangeExportEmbedScene = register({\n  name: \"changeExportEmbedScene\",\n  trackEvent: { category: \"export\", action: \"embedScene\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportEmbedScene: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <CheckboxItem\n      checked={appState.exportEmbedScene}\n      onChange={(checked) => updateData(checked)}\n    >\n      {t(\"labels.exportEmbedScene\")}\n      <Tooltip label={t(\"labels.exportEmbedScene_details\")} long={true}>\n        <div className=\"excalidraw-tooltip-icon\">{questionCircle}</div>\n      </Tooltip>\n    </CheckboxItem>\n  ),\n});\n\nexport const actionSaveToActiveFile = register({\n  name: \"saveToActiveFile\",\n  trackEvent: { category: \"export\" },\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.saveToActiveFile &&\n      !!appState.fileHandle &&\n      !appState.viewModeEnabled\n    );\n  },\n  perform: async (elements, appState, value, app) => {\n    const fileHandleExists = !!appState.fileHandle;\n\n    try {\n      const { fileHandle } = isImageFileHandle(appState.fileHandle)\n        ? await resaveAsImageWithScene(elements, appState, app.files)\n        : await saveAsJSON(elements, appState, app.files);\n\n      return {\n        commitToHistory: false,\n        appState: {\n          ...appState,\n          fileHandle,\n          toast: fileHandleExists\n            ? {\n                message: fileHandle?.name\n                  ? t(\"toast.fileSavedToFilename\").replace(\n                      \"{filename}\",\n                      `\"${fileHandle.name}\"`,\n                    )\n                  : t(\"toast.fileSaved\"),\n              }\n            : null,\n        },\n      };\n    } catch (error: any) {\n      if (error?.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      return { commitToHistory: false };\n    }\n  },\n  keyTest: (event) =>\n    event.key === KEYS.S && event[KEYS.CTRL_OR_CMD] && !event.shiftKey,\n});\n\nexport const actionSaveFileToDisk = register({\n  name: \"saveFileToDisk\",\n  viewMode: true,\n  trackEvent: { category: \"export\" },\n  perform: async (elements, appState, value, app) => {\n    try {\n      const { fileHandle } = await saveAsJSON(\n        elements,\n        {\n          ...appState,\n          fileHandle: null,\n        },\n        app.files,\n      );\n      return { commitToHistory: false, appState: { ...appState, fileHandle } };\n    } catch (error: any) {\n      if (error?.name !== \"AbortError\") {\n        console.error(error);\n      } else {\n        console.warn(error);\n      }\n      return { commitToHistory: false };\n    }\n  },\n  keyTest: (event) =>\n    event.key === KEYS.S && event.shiftKey && event[KEYS.CTRL_OR_CMD],\n  PanelComponent: ({ updateData }) => (\n    <ToolButton\n      type=\"button\"\n      icon={saveAs}\n      title={t(\"buttons.saveAs\")}\n      aria-label={t(\"buttons.saveAs\")}\n      showAriaLabel={useDevice().isMobile}\n      hidden={!nativeFileSystemSupported}\n      onClick={() => updateData(null)}\n      data-testid=\"save-as-button\"\n    />\n  ),\n});\n\nexport const actionLoadScene = register({\n  name: \"loadScene\",\n  trackEvent: { category: \"export\" },\n  predicate: (elements, appState, props, app) => {\n    return (\n      !!app.props.UIOptions.canvasActions.loadScene && !appState.viewModeEnabled\n    );\n  },\n  perform: async (elements, appState, _, app) => {\n    try {\n      const {\n        elements: loadedElements,\n        appState: loadedAppState,\n        files,\n      } = await loadFromJSON(appState, elements);\n      return {\n        elements: loadedElements,\n        appState: loadedAppState,\n        files,\n        commitToHistory: true,\n      };\n    } catch (error: any) {\n      if (error?.name === \"AbortError\") {\n        console.warn(error);\n        return false;\n      }\n      return {\n        elements,\n        appState: { ...appState, errorMessage: error.message },\n        files: app.files,\n        commitToHistory: false,\n      };\n    }\n  },\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.O,\n});\n\nexport const actionExportWithDarkMode = register({\n  name: \"exportWithDarkMode\",\n  trackEvent: { category: \"export\", action: \"toggleTheme\" },\n  perform: (_elements, appState, value) => {\n    return {\n      appState: { ...appState, exportWithDarkMode: value },\n      commitToHistory: false,\n    };\n  },\n  PanelComponent: ({ appState, updateData }) => (\n    <div\n      style={{\n        display: \"flex\",\n        justifyContent: \"flex-end\",\n        marginTop: \"-45px\",\n        marginBottom: \"10px\",\n      }}\n    >\n      <DarkModeToggle\n        value={appState.exportWithDarkMode ? THEME.DARK : THEME.LIGHT}\n        onChange={(theme: Theme) => {\n          updateData(theme === THEME.DARK);\n        }}\n        title={t(\"labels.toggleExportColorScheme\")}\n      />\n    </div>\n  ),\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}