{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\excalidraw-cn\\\\src\\\\components\\\\ColorPicker\\\\PickerColorList.tsx\";\nimport clsx from \"clsx\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport { activeColorPickerSectionAtom, colorPickerHotkeyBindings, getColorNameAndShadeFromColor } from \"./colorPickerUtils\";\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport { t } from \"../../i18n\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst PickerColorList = _ref => {\n  let {\n    palette,\n    color,\n    onChange,\n    label,\n    activeShade\n  } = _ref;\n  const colorObj = getColorNameAndShadeFromColor({\n    color: color || \"transparent\",\n    palette\n  });\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(activeColorPickerSectionAtom);\n  const btnRef = useRef(null);\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"baseColors\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj === null || colorObj === void 0 ? void 0 : colorObj.colorName, activeColorPickerSection]);\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"color-picker-content--default\",\n    children: Object.entries(palette).map((_ref2, index) => {\n      let [key, value] = _ref2;\n      const color = (Array.isArray(value) ? value[activeShade] : value) || \"transparent\";\n      const keybinding = colorPickerHotkeyBindings[index];\n      const label = t(`colors.${key.replace(/\\d+/, \"\")}`, null, \"\");\n      return /*#__PURE__*/_jsxDEV(\"button\", {\n        ref: (colorObj === null || colorObj === void 0 ? void 0 : colorObj.colorName) === key ? btnRef : undefined,\n        tabIndex: -1,\n        type: \"button\",\n        className: clsx(\"color-picker__button color-picker__button--large\", {\n          active: (colorObj === null || colorObj === void 0 ? void 0 : colorObj.colorName) === key,\n          \"is-transparent\": color === \"transparent\" || !color\n        }),\n        onClick: () => {\n          onChange(color);\n          setActiveColorPickerSection(\"baseColors\");\n        },\n        title: `${label}${color.startsWith(\"#\") ? ` ${color}` : \"\"} — ${keybinding}`,\n        \"aria-label\": `${label} — ${keybinding}`,\n        style: color ? {\n          \"--swatch-color\": color\n        } : undefined,\n        \"data-testid\": `color-${key}`,\n        children: [/*#__PURE__*/_jsxDEV(\"div\", {\n          className: \"color-picker__button-outline\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 77,\n          columnNumber: 13\n        }, this), /*#__PURE__*/_jsxDEV(HotkeyLabel, {\n          color: color,\n          keyLabel: keybinding\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 78,\n          columnNumber: 13\n        }, this)]\n      }, key, true, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 11\n      }, this);\n    })\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n};\nexport default PickerColorList;","map":{"version":3,"names":["clsx","useAtom","useEffect","useRef","activeColorPickerSectionAtom","colorPickerHotkeyBindings","getColorNameAndShadeFromColor","HotkeyLabel","t","jsxDEV","_jsxDEV","PickerColorList","_ref","palette","color","onChange","label","activeShade","colorObj","activeColorPickerSection","setActiveColorPickerSection","btnRef","current","focus","colorName","className","children","Object","entries","map","_ref2","index","key","value","Array","isArray","keybinding","replace","ref","undefined","tabIndex","type","active","onClick","title","startsWith","style","fileName","_jsxFileName","lineNumber","columnNumber","keyLabel"],"sources":["D:/project/excalidraw-cn/src/components/ColorPicker/PickerColorList.tsx"],"sourcesContent":["import clsx from \"clsx\";\nimport { useAtom } from \"jotai\";\nimport { useEffect, useRef } from \"react\";\nimport {\n  activeColorPickerSectionAtom,\n  colorPickerHotkeyBindings,\n  getColorNameAndShadeFromColor,\n} from \"./colorPickerUtils\";\nimport HotkeyLabel from \"./HotkeyLabel\";\nimport { ColorPaletteCustom } from \"../../colors\";\nimport { t } from \"../../i18n\";\n\ninterface PickerColorListProps {\n  palette: ColorPaletteCustom;\n  color: string;\n  onChange: (color: string) => void;\n  label: string;\n  activeShade: number;\n}\n\nconst PickerColorList = ({\n  palette,\n  color,\n  onChange,\n  label,\n  activeShade,\n}: PickerColorListProps) => {\n  const colorObj = getColorNameAndShadeFromColor({\n    color: color || \"transparent\",\n    palette,\n  });\n  const [activeColorPickerSection, setActiveColorPickerSection] = useAtom(\n    activeColorPickerSectionAtom,\n  );\n\n  const btnRef = useRef<HTMLButtonElement>(null);\n\n  useEffect(() => {\n    if (btnRef.current && activeColorPickerSection === \"baseColors\") {\n      btnRef.current.focus();\n    }\n  }, [colorObj?.colorName, activeColorPickerSection]);\n\n  return (\n    <div className=\"color-picker-content--default\">\n      {Object.entries(palette).map(([key, value], index) => {\n        const color =\n          (Array.isArray(value) ? value[activeShade] : value) || \"transparent\";\n\n        const keybinding = colorPickerHotkeyBindings[index];\n        const label = t(`colors.${key.replace(/\\d+/, \"\")}`, null, \"\");\n\n        return (\n          <button\n            ref={colorObj?.colorName === key ? btnRef : undefined}\n            tabIndex={-1}\n            type=\"button\"\n            className={clsx(\n              \"color-picker__button color-picker__button--large\",\n              {\n                active: colorObj?.colorName === key,\n                \"is-transparent\": color === \"transparent\" || !color,\n              },\n            )}\n            onClick={() => {\n              onChange(color);\n              setActiveColorPickerSection(\"baseColors\");\n            }}\n            title={`${label}${\n              color.startsWith(\"#\") ? ` ${color}` : \"\"\n            } — ${keybinding}`}\n            aria-label={`${label} — ${keybinding}`}\n            style={color ? { \"--swatch-color\": color } : undefined}\n            data-testid={`color-${key}`}\n            key={key}\n          >\n            <div className=\"color-picker__button-outline\" />\n            <HotkeyLabel color={color} keyLabel={keybinding} />\n          </button>\n        );\n      })}\n    </div>\n  );\n};\n\nexport default PickerColorList;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}