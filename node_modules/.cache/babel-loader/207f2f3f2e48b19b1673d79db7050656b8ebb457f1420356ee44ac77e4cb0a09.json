{"ast":null,"code":"import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{KEYS}from\"../keys\";import{register}from\"./register\";import{selectGroupsForSelectedElements}from\"../groups\";import{getNonDeletedElements,isTextElement}from\"../element\";import{isLinearElement}from\"../element/typeChecks\";import{LinearElementEditor}from\"../element/linearElementEditor\";import{excludeElementsInFramesFromSelection}from\"../scene/selection\";export var actionSelectAll=register({name:\"selectAll\",trackEvent:{category:\"canvas\"},perform:function perform(elements,appState,value,app){if(appState.editingLinearElement){return false;}var selectedElementIds=excludeElementsInFramesFromSelection(elements.filter(function(element){return!element.isDeleted&&!(isTextElement(element)&&element.containerId)&&!element.locked;})).reduce(function(map,element){map[element.id]=true;return map;},{});return{appState:selectGroupsForSelectedElements(_objectSpread(_objectSpread({},appState),{},{selectedLinearElement:// single linear element selected\nObject.keys(selectedElementIds).length===1&&isLinearElement(elements[0])?new LinearElementEditor(elements[0],app.scene):null,editingGroupId:null,selectedElementIds:selectedElementIds}),getNonDeletedElements(elements),appState,app),commitToHistory:true};},contextItemLabel:\"labels.selectAll\",keyTest:function keyTest(event){return event[KEYS.CTRL_OR_CMD]&&event.key===KEYS.A;}});","map":{"version":3,"names":["KEYS","register","selectGroupsForSelectedElements","getNonDeletedElements","isTextElement","isLinearElement","LinearElementEditor","excludeElementsInFramesFromSelection","actionSelectAll","name","trackEvent","category","perform","elements","appState","value","app","editingLinearElement","selectedElementIds","filter","element","isDeleted","containerId","locked","reduce","map","id","_objectSpread","selectedLinearElement","Object","keys","length","scene","editingGroupId","commitToHistory","contextItemLabel","keyTest","event","CTRL_OR_CMD","key","A"],"sources":["D:/project/excalidraw-cn/src/actions/actionSelectAll.ts"],"sourcesContent":["import { KEYS } from \"../keys\";\nimport { register } from \"./register\";\nimport { selectGroupsForSelectedElements } from \"../groups\";\nimport { getNonDeletedElements, isTextElement } from \"../element\";\nimport { ExcalidrawElement } from \"../element/types\";\nimport { isLinearElement } from \"../element/typeChecks\";\nimport { LinearElementEditor } from \"../element/linearElementEditor\";\nimport { excludeElementsInFramesFromSelection } from \"../scene/selection\";\n\nexport const actionSelectAll = register({\n  name: \"selectAll\",\n  trackEvent: { category: \"canvas\" },\n  perform: (elements, appState, value, app) => {\n    if (appState.editingLinearElement) {\n      return false;\n    }\n\n    const selectedElementIds = excludeElementsInFramesFromSelection(\n      elements.filter(\n        (element) =>\n          !element.isDeleted &&\n          !(isTextElement(element) && element.containerId) &&\n          !element.locked,\n      ),\n    ).reduce((map: Record<ExcalidrawElement[\"id\"], true>, element) => {\n      map[element.id] = true;\n      return map;\n    }, {});\n\n    return {\n      appState: selectGroupsForSelectedElements(\n        {\n          ...appState,\n          selectedLinearElement:\n            // single linear element selected\n            Object.keys(selectedElementIds).length === 1 &&\n            isLinearElement(elements[0])\n              ? new LinearElementEditor(elements[0], app.scene)\n              : null,\n          editingGroupId: null,\n          selectedElementIds,\n        },\n        getNonDeletedElements(elements),\n        appState,\n        app,\n      ),\n      commitToHistory: true,\n    };\n  },\n  contextItemLabel: \"labels.selectAll\",\n  keyTest: (event) => event[KEYS.CTRL_OR_CMD] && event.key === KEYS.A,\n});\n"],"mappings":"6GAAA,OAASA,IAAI,KAAQ,SAAS,CAC9B,OAASC,QAAQ,KAAQ,YAAY,CACrC,OAASC,+BAA+B,KAAQ,WAAW,CAC3D,OAASC,qBAAqB,CAAEC,aAAa,KAAQ,YAAY,CAEjE,OAASC,eAAe,KAAQ,uBAAuB,CACvD,OAASC,mBAAmB,KAAQ,gCAAgC,CACpE,OAASC,oCAAoC,KAAQ,oBAAoB,CAEzE,MAAO,IAAM,CAAAC,eAAe,CAAGP,QAAQ,CAAC,CACtCQ,IAAI,CAAE,WAAW,CACjBC,UAAU,CAAE,CAAEC,QAAQ,CAAE,QAAS,CAAC,CAClCC,OAAO,CAAE,SAAAA,QAACC,QAAQ,CAAEC,QAAQ,CAAEC,KAAK,CAAEC,GAAG,CAAK,CAC3C,GAAIF,QAAQ,CAACG,oBAAoB,CAAE,CACjC,MAAO,MAAK,CACd,CAEA,GAAM,CAAAC,kBAAkB,CAAGX,oCAAoC,CAC7DM,QAAQ,CAACM,MAAM,CACb,SAACC,OAAO,QACN,CAACA,OAAO,CAACC,SAAS,EAClB,EAAEjB,aAAa,CAACgB,OAAO,CAAC,EAAIA,OAAO,CAACE,WAAW,CAAC,EAChD,CAACF,OAAO,CAACG,MAAM,GAClB,CACF,CAACC,MAAM,CAAC,SAACC,GAA0C,CAAEL,OAAO,CAAK,CAChEK,GAAG,CAACL,OAAO,CAACM,EAAE,CAAC,CAAG,IAAI,CACtB,MAAO,CAAAD,GAAG,CACZ,CAAC,CAAE,CAAC,CAAC,CAAC,CAEN,MAAO,CACLX,QAAQ,CAAEZ,+BAA+B,CAAAyB,aAAA,CAAAA,aAAA,IAElCb,QAAQ,MACXc,qBAAqB,CACnB;AACAC,MAAM,CAACC,IAAI,CAACZ,kBAAkB,CAAC,CAACa,MAAM,GAAK,CAAC,EAC5C1B,eAAe,CAACQ,QAAQ,CAAC,CAAC,CAAC,CAAC,CACxB,GAAI,CAAAP,mBAAmB,CAACO,QAAQ,CAAC,CAAC,CAAC,CAAEG,GAAG,CAACgB,KAAK,CAAC,CAC/C,IAAI,CACVC,cAAc,CAAE,IAAI,CACpBf,kBAAkB,CAAlBA,kBAAkB,GAEpBf,qBAAqB,CAACU,QAAQ,CAAC,CAC/BC,QAAQ,CACRE,GAAG,CACJ,CACDkB,eAAe,CAAE,IACnB,CAAC,CACH,CAAC,CACDC,gBAAgB,CAAE,kBAAkB,CACpCC,OAAO,CAAE,SAAAA,QAACC,KAAK,QAAK,CAAAA,KAAK,CAACrC,IAAI,CAACsC,WAAW,CAAC,EAAID,KAAK,CAACE,GAAG,GAAKvC,IAAI,CAACwC,CAAC,EACrE,CAAC,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}