{"ast":null,"code":"import{t}from\"../i18n\";import{isImageElement,isLinearElement,isTextBindableContainer,isTextElement}from\"../element/typeChecks\";import{getShortcutKey}from\"../utils\";import{isEraserActive}from\"../appState\";import\"./HintViewer.scss\";import{jsx as _jsx}from\"react/jsx-runtime\";var getHints=function getHints(_ref){var appState=_ref.appState,isMobile=_ref.isMobile,device=_ref.device,app=_ref.app;var activeTool=appState.activeTool,isResizing=appState.isResizing,isRotating=appState.isRotating,lastPointerDownWith=appState.lastPointerDownWith;var multiMode=appState.multiElement!==null;if(appState.openSidebar&&!device.canDeviceFitSidebar){return null;}if(isEraserActive(appState)){return t(\"hints.eraserRevert\");}if(activeTool.type===\"arrow\"||activeTool.type===\"line\"){if(!multiMode){return t(\"hints.linearElement\");}return t(\"hints.linearElementMulti\");}if(activeTool.type===\"freedraw\"){return t(\"hints.freeDraw\");}if(activeTool.type===\"text\"){return t(\"hints.text\");}if(appState.activeTool.type===\"image\"&&appState.pendingImageElementId){return t(\"hints.placeImage\");}var selectedElements=app.scene.getSelectedElements(appState);if(isResizing&&lastPointerDownWith===\"mouse\"&&selectedElements.length===1){var targetElement=selectedElements[0];if(isLinearElement(targetElement)&&targetElement.points.length===2){return t(\"hints.lockAngle\");}return isImageElement(targetElement)?t(\"hints.resizeImage\"):t(\"hints.resize\");}if(isRotating&&lastPointerDownWith===\"mouse\"){return t(\"hints.rotate\");}if(selectedElements.length===1&&isTextElement(selectedElements[0])){return t(\"hints.text_selected\");}if(appState.editingElement&&isTextElement(appState.editingElement)){return t(\"hints.text_editing\");}if(activeTool.type===\"selection\"){var _appState$draggingEle;if(((_appState$draggingEle=appState.draggingElement)===null||_appState$draggingEle===void 0?void 0:_appState$draggingEle.type)===\"selection\"&&!appState.editingElement&&!appState.editingLinearElement){return t(\"hints.deepBoxSelect\");}if(!selectedElements.length&&!isMobile){return t(\"hints.canvasPanning\");}}if(selectedElements.length===1){if(isLinearElement(selectedElements[0])){if(appState.editingLinearElement){return appState.editingLinearElement.selectedPointsIndices?t(\"hints.lineEditor_pointSelected\"):t(\"hints.lineEditor_nothingSelected\");}return t(\"hints.lineEditor_info\");}if(isTextBindableContainer(selectedElements[0])){return t(\"hints.bindTextToElement\");}}return null;};export var HintViewer=function HintViewer(_ref2){var appState=_ref2.appState,isMobile=_ref2.isMobile,device=_ref2.device,app=_ref2.app;var hint=getHints({appState:appState,isMobile:isMobile,device:device,app:app});if(!hint){return null;}hint=getShortcutKey(hint);return/*#__PURE__*/_jsx(\"div\",{className:\"HintViewer\",children:/*#__PURE__*/_jsx(\"span\",{children:hint})});};","map":{"version":3,"names":["t","isImageElement","isLinearElement","isTextBindableContainer","isTextElement","getShortcutKey","isEraserActive","jsx","_jsx","getHints","_ref","appState","isMobile","device","app","activeTool","isResizing","isRotating","lastPointerDownWith","multiMode","multiElement","openSidebar","canDeviceFitSidebar","type","pendingImageElementId","selectedElements","scene","getSelectedElements","length","targetElement","points","editingElement","_appState$draggingEle","draggingElement","editingLinearElement","selectedPointsIndices","HintViewer","_ref2","hint","className","children"],"sources":["D:/project/excalidraw-cn/src/components/HintViewer.tsx"],"sourcesContent":["import { t } from \"../i18n\";\nimport { AppClassProperties, Device, UIAppState } from \"../types\";\nimport {\n  isImageElement,\n  isLinearElement,\n  isTextBindableContainer,\n  isTextElement,\n} from \"../element/typeChecks\";\nimport { getShortcutKey } from \"../utils\";\nimport { isEraserActive } from \"../appState\";\n\nimport \"./HintViewer.scss\";\n\ninterface HintViewerProps {\n  appState: UIAppState;\n  isMobile: boolean;\n  device: Device;\n  app: AppClassProperties;\n}\n\nconst getHints = ({ appState, isMobile, device, app }: HintViewerProps) => {\n  const { activeTool, isResizing, isRotating, lastPointerDownWith } = appState;\n  const multiMode = appState.multiElement !== null;\n\n  if (appState.openSidebar && !device.canDeviceFitSidebar) {\n    return null;\n  }\n\n  if (isEraserActive(appState)) {\n    return t(\"hints.eraserRevert\");\n  }\n  if (activeTool.type === \"arrow\" || activeTool.type === \"line\") {\n    if (!multiMode) {\n      return t(\"hints.linearElement\");\n    }\n    return t(\"hints.linearElementMulti\");\n  }\n\n  if (activeTool.type === \"freedraw\") {\n    return t(\"hints.freeDraw\");\n  }\n\n  if (activeTool.type === \"text\") {\n    return t(\"hints.text\");\n  }\n\n  if (appState.activeTool.type === \"image\" && appState.pendingImageElementId) {\n    return t(\"hints.placeImage\");\n  }\n\n  const selectedElements = app.scene.getSelectedElements(appState);\n\n  if (\n    isResizing &&\n    lastPointerDownWith === \"mouse\" &&\n    selectedElements.length === 1\n  ) {\n    const targetElement = selectedElements[0];\n    if (isLinearElement(targetElement) && targetElement.points.length === 2) {\n      return t(\"hints.lockAngle\");\n    }\n    return isImageElement(targetElement)\n      ? t(\"hints.resizeImage\")\n      : t(\"hints.resize\");\n  }\n\n  if (isRotating && lastPointerDownWith === \"mouse\") {\n    return t(\"hints.rotate\");\n  }\n\n  if (selectedElements.length === 1 && isTextElement(selectedElements[0])) {\n    return t(\"hints.text_selected\");\n  }\n\n  if (appState.editingElement && isTextElement(appState.editingElement)) {\n    return t(\"hints.text_editing\");\n  }\n\n  if (activeTool.type === \"selection\") {\n    if (\n      appState.draggingElement?.type === \"selection\" &&\n      !appState.editingElement &&\n      !appState.editingLinearElement\n    ) {\n      return t(\"hints.deepBoxSelect\");\n    }\n    if (!selectedElements.length && !isMobile) {\n      return t(\"hints.canvasPanning\");\n    }\n  }\n\n  if (selectedElements.length === 1) {\n    if (isLinearElement(selectedElements[0])) {\n      if (appState.editingLinearElement) {\n        return appState.editingLinearElement.selectedPointsIndices\n          ? t(\"hints.lineEditor_pointSelected\")\n          : t(\"hints.lineEditor_nothingSelected\");\n      }\n      return t(\"hints.lineEditor_info\");\n    }\n    if (isTextBindableContainer(selectedElements[0])) {\n      return t(\"hints.bindTextToElement\");\n    }\n  }\n\n  return null;\n};\n\nexport const HintViewer = ({\n  appState,\n  isMobile,\n  device,\n  app,\n}: HintViewerProps) => {\n  let hint = getHints({\n    appState,\n    isMobile,\n    device,\n    app,\n  });\n  if (!hint) {\n    return null;\n  }\n\n  hint = getShortcutKey(hint);\n\n  return (\n    <div className=\"HintViewer\">\n      <span>{hint}</span>\n    </div>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}