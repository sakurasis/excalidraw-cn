{"ast":null,"code":"import { getGlobalObject, isInstanceOf, logger } from '@sentry/utils';\n/** JSDoc */\nvar Ember = /** @class */function () {\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  function Ember(options) {\n    if (options === void 0) {\n      options = {};\n    }\n    /**\n     * @inheritDoc\n     */\n    this.name = Ember.id;\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n    this._Ember = options.Ember || getGlobalObject().Ember;\n  }\n  /**\n   * @inheritDoc\n   */\n  Ember.prototype.setupOnce = function (_, getCurrentHub) {\n    var _this = this;\n    if (!this._Ember) {\n      logger.error('EmberIntegration is missing an Ember instance');\n      return;\n    }\n    /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n    var oldOnError = this._Ember.onerror;\n    this._Ember.onerror = function (error) {\n      if (getCurrentHub().getIntegration(Ember)) {\n        getCurrentHub().captureException(error, {\n          originalException: error\n        });\n      }\n      if (typeof oldOnError === 'function') {\n        oldOnError.call(_this._Ember, error);\n      } else if (_this._Ember.testing) {\n        throw error;\n      }\n    };\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._Ember.RSVP.on('error', function (reason) {\n      if (getCurrentHub().getIntegration(Ember)) {\n        getCurrentHub().withScope(function (scope) {\n          if (isInstanceOf(reason, Error)) {\n            scope.setExtra('context', 'Unhandled Promise error detected');\n            getCurrentHub().captureException(reason, {\n              originalException: reason\n            });\n          } else {\n            scope.setExtra('reason', reason);\n            getCurrentHub().captureMessage('Unhandled Promise error detected');\n          }\n        });\n      }\n    });\n  };\n  /**\n   * @inheritDoc\n   */\n  Ember.id = 'Ember';\n  return Ember;\n}();\nexport { Ember };","map":{"version":3,"names":["getGlobalObject","isInstanceOf","logger","Ember","options","name","id","_Ember","prototype","setupOnce","_","getCurrentHub","_this","error","oldOnError","onerror","getIntegration","captureException","originalException","call","testing","RSVP","on","reason","withScope","scope","Error","setExtra","captureMessage"],"sources":["D:\\project\\excalidraw-cn\\node_modules\\@sentry\\integrations\\src\\ember.ts"],"sourcesContent":["import { EventProcessor, Hub, Integration } from '@sentry/types';\nimport { getGlobalObject, isInstanceOf, logger } from '@sentry/utils';\n\n/** JSDoc */\nexport class Ember implements Integration {\n  /**\n   * @inheritDoc\n   */\n  public static id: string = 'Ember';\n\n  /**\n   * @inheritDoc\n   */\n  public name: string = Ember.id;\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/naming-convention, @typescript-eslint/no-explicit-any\n  private readonly _Ember: any;\n\n  /**\n   * @inheritDoc\n   */\n  // eslint-disable-next-line @typescript-eslint/no-explicit-any\n  public constructor(options: { Ember?: any } = {}) {\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any, @typescript-eslint/no-unsafe-member-access\n    this._Ember = options.Ember || getGlobalObject<any>().Ember;\n  }\n\n  /**\n   * @inheritDoc\n   */\n  public setupOnce(_: (callback: EventProcessor) => void, getCurrentHub: () => Hub): void {\n    if (!this._Ember) {\n      logger.error('EmberIntegration is missing an Ember instance');\n      return;\n    }\n\n    /* eslint-disable @typescript-eslint/no-unsafe-member-access */\n    const oldOnError = this._Ember.onerror;\n\n    this._Ember.onerror = (error: Error): void => {\n      if (getCurrentHub().getIntegration(Ember)) {\n        getCurrentHub().captureException(error, { originalException: error });\n      }\n\n      if (typeof oldOnError === 'function') {\n        oldOnError.call(this._Ember, error);\n      } else if (this._Ember.testing) {\n        throw error;\n      }\n    };\n\n    // eslint-disable-next-line @typescript-eslint/no-explicit-any\n    this._Ember.RSVP.on('error', (reason: unknown): void => {\n      if (getCurrentHub().getIntegration(Ember)) {\n        getCurrentHub().withScope(scope => {\n          if (isInstanceOf(reason, Error)) {\n            scope.setExtra('context', 'Unhandled Promise error detected');\n            getCurrentHub().captureException(reason, { originalException: reason as Error });\n          } else {\n            scope.setExtra('reason', reason);\n            getCurrentHub().captureMessage('Unhandled Promise error detected');\n          }\n        });\n      }\n    });\n  }\n  /* eslint-enable @typescript-eslint/no-unsafe-member-access */\n}\n"],"mappings":"AACA,SAASA,eAAe,EAAEC,YAAY,EAAEC,MAAM,QAAQ,eAAe;AAErE;AACA,IAAAC,KAAA;EAiBE;;;EAGA;EACA,SAAAA,MAAmBC,OAA6B;IAA7B,IAAAA,OAAA;MAAAA,OAAA,KAA6B;IAAA;IAfhD;;;IAGO,KAAAC,IAAI,GAAWF,KAAK,CAACG,EAAE;IAa5B;IACA,IAAI,CAACC,MAAM,GAAGH,OAAO,CAACD,KAAK,IAAIH,eAAe,EAAO,CAACG,KAAK;EAC7D;EAEA;;;EAGOA,KAAA,CAAAK,SAAA,CAAAC,SAAS,GAAhB,UAAiBC,CAAqC,EAAEC,aAAwB;IAAhF,IAAAC,KAAA;IACE,IAAI,CAAC,IAAI,CAACL,MAAM,EAAE;MAChBL,MAAM,CAACW,KAAK,CAAC,+CAA+C,CAAC;MAC7D;;IAGF;IACA,IAAMC,UAAU,GAAG,IAAI,CAACP,MAAM,CAACQ,OAAO;IAEtC,IAAI,CAACR,MAAM,CAACQ,OAAO,GAAG,UAACF,KAAY;MACjC,IAAIF,aAAa,EAAE,CAACK,cAAc,CAACb,KAAK,CAAC,EAAE;QACzCQ,aAAa,EAAE,CAACM,gBAAgB,CAACJ,KAAK,EAAE;UAAEK,iBAAiB,EAAEL;QAAK,CAAE,CAAC;;MAGvE,IAAI,OAAOC,UAAU,KAAK,UAAU,EAAE;QACpCA,UAAU,CAACK,IAAI,CAACP,KAAI,CAACL,MAAM,EAAEM,KAAK,CAAC;OACpC,MAAM,IAAID,KAAI,CAACL,MAAM,CAACa,OAAO,EAAE;QAC9B,MAAMP,KAAK;;IAEf,CAAC;IAED;IACA,IAAI,CAACN,MAAM,CAACc,IAAI,CAACC,EAAE,CAAC,OAAO,EAAE,UAACC,MAAe;MAC3C,IAAIZ,aAAa,EAAE,CAACK,cAAc,CAACb,KAAK,CAAC,EAAE;QACzCQ,aAAa,EAAE,CAACa,SAAS,CAAC,UAAAC,KAAK;UAC7B,IAAIxB,YAAY,CAACsB,MAAM,EAAEG,KAAK,CAAC,EAAE;YAC/BD,KAAK,CAACE,QAAQ,CAAC,SAAS,EAAE,kCAAkC,CAAC;YAC7DhB,aAAa,EAAE,CAACM,gBAAgB,CAACM,MAAM,EAAE;cAAEL,iBAAiB,EAAEK;YAAe,CAAE,CAAC;WACjF,MAAM;YACLE,KAAK,CAACE,QAAQ,CAAC,QAAQ,EAAEJ,MAAM,CAAC;YAChCZ,aAAa,EAAE,CAACiB,cAAc,CAAC,kCAAkC,CAAC;;QAEtE,CAAC,CAAC;;IAEN,CAAC,CAAC;EACJ,CAAC;EA/DD;;;EAGczB,KAAA,CAAAG,EAAE,GAAW,OAAO;EA8DpC,OAAAH,KAAC;CAAA,EAlED;SAAaA,KAAK"},"metadata":{},"sourceType":"module","externalDependencies":[]}