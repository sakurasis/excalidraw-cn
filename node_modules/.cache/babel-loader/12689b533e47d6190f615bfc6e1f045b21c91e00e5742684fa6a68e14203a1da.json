{"ast":null,"code":"var _jsxFileName = \"D:\\\\project\\\\excalidraw-cn\\\\src\\\\components\\\\ShareableLinkDialog.tsx\";\nimport { useRef, useState } from \"react\";\nimport * as Popover from \"@radix-ui/react-popover\";\nimport { copyTextToSystemClipboard } from \"../clipboard\";\nimport { useI18n } from \"../i18n\";\nimport { Dialog } from \"./Dialog\";\nimport { TextField } from \"./TextField\";\nimport { FilledButton } from \"./FilledButton\";\nimport { copyIcon, tablerCheckIcon } from \"./icons\";\nimport \"./ShareableLinkDialog.scss\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nexport const ShareableLinkDialog = _ref => {\n  let {\n    link,\n    onCloseRequest,\n    setErrorMessage\n  } = _ref;\n  const {\n    t\n  } = useI18n();\n  const [justCopied, setJustCopied] = useState(false);\n  const timerRef = useRef(0);\n  const ref = useRef(null);\n  const copyRoomLink = async () => {\n    var _ref$current;\n    try {\n      await copyTextToSystemClipboard(link);\n      setJustCopied(true);\n      if (timerRef.current) {\n        window.clearTimeout(timerRef.current);\n      }\n      timerRef.current = window.setTimeout(() => {\n        setJustCopied(false);\n      }, 3000);\n    } catch (error) {\n      setErrorMessage(error.message);\n    }\n    (_ref$current = ref.current) === null || _ref$current === void 0 ? void 0 : _ref$current.select();\n  };\n  return /*#__PURE__*/_jsxDEV(Dialog, {\n    onCloseRequest: onCloseRequest,\n    title: false,\n    size: \"small\",\n    children: /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"ShareableLinkDialog\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        children: \"Shareable link\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 54,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ShareableLinkDialog__linkRow\",\n        children: [/*#__PURE__*/_jsxDEV(TextField, {\n          ref: ref,\n          label: \"Link\",\n          readonly: true,\n          fullWidth: true,\n          value: link,\n          selectOnRender: true\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 11\n        }, this), /*#__PURE__*/_jsxDEV(Popover.Root, {\n          open: justCopied,\n          children: [/*#__PURE__*/_jsxDEV(Popover.Trigger, {\n            asChild: true,\n            children: /*#__PURE__*/_jsxDEV(FilledButton, {\n              size: \"large\",\n              label: \"Copy link\",\n              startIcon: copyIcon,\n              onClick: copyRoomLink\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 66,\n              columnNumber: 15\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 65,\n            columnNumber: 13\n          }, this), /*#__PURE__*/_jsxDEV(Popover.Content, {\n            onOpenAutoFocus: event => event.preventDefault(),\n            onCloseAutoFocus: event => event.preventDefault(),\n            className: \"ShareableLinkDialog__popover\",\n            side: \"top\",\n            align: \"end\",\n            sideOffset: 5.5,\n            children: [tablerCheckIcon, \" copied\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 73,\n            columnNumber: 13\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 64,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"ShareableLinkDialog__description\",\n        children: [\"\\uD83D\\uDD12 \", t(\"alerts.uploadedSecurly\")]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 85,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 7\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 5\n  }, this);\n};","map":{"version":3,"names":["useRef","useState","Popover","copyTextToSystemClipboard","useI18n","Dialog","TextField","FilledButton","copyIcon","tablerCheckIcon","jsxDEV","_jsxDEV","ShareableLinkDialog","_ref","link","onCloseRequest","setErrorMessage","t","justCopied","setJustCopied","timerRef","ref","copyRoomLink","_ref$current","current","window","clearTimeout","setTimeout","error","message","select","title","size","children","className","fileName","_jsxFileName","lineNumber","columnNumber","label","readonly","fullWidth","value","selectOnRender","Root","open","Trigger","asChild","startIcon","onClick","Content","onOpenAutoFocus","event","preventDefault","onCloseAutoFocus","side","align","sideOffset"],"sources":["D:/project/excalidraw-cn/src/components/ShareableLinkDialog.tsx"],"sourcesContent":["import { useRef, useState } from \"react\";\nimport * as Popover from \"@radix-ui/react-popover\";\n\nimport { copyTextToSystemClipboard } from \"../clipboard\";\nimport { useI18n } from \"../i18n\";\n\nimport { Dialog } from \"./Dialog\";\nimport { TextField } from \"./TextField\";\nimport { FilledButton } from \"./FilledButton\";\nimport { copyIcon, tablerCheckIcon } from \"./icons\";\n\nimport \"./ShareableLinkDialog.scss\";\n\nexport type ShareableLinkDialogProps = {\n  link: string;\n\n  onCloseRequest: () => void;\n  setErrorMessage: (error: string) => void;\n};\n\nexport const ShareableLinkDialog = ({\n  link,\n  onCloseRequest,\n  setErrorMessage,\n}: ShareableLinkDialogProps) => {\n  const { t } = useI18n();\n  const [justCopied, setJustCopied] = useState(false);\n  const timerRef = useRef<number>(0);\n  const ref = useRef<HTMLInputElement>(null);\n\n  const copyRoomLink = async () => {\n    try {\n      await copyTextToSystemClipboard(link);\n\n      setJustCopied(true);\n\n      if (timerRef.current) {\n        window.clearTimeout(timerRef.current);\n      }\n\n      timerRef.current = window.setTimeout(() => {\n        setJustCopied(false);\n      }, 3000);\n    } catch (error: any) {\n      setErrorMessage(error.message);\n    }\n\n    ref.current?.select();\n  };\n\n  return (\n    <Dialog onCloseRequest={onCloseRequest} title={false} size=\"small\">\n      <div className=\"ShareableLinkDialog\">\n        <h3>Shareable link</h3>\n        <div className=\"ShareableLinkDialog__linkRow\">\n          <TextField\n            ref={ref}\n            label=\"Link\"\n            readonly\n            fullWidth\n            value={link}\n            selectOnRender\n          />\n          <Popover.Root open={justCopied}>\n            <Popover.Trigger asChild>\n              <FilledButton\n                size=\"large\"\n                label=\"Copy link\"\n                startIcon={copyIcon}\n                onClick={copyRoomLink}\n              />\n            </Popover.Trigger>\n            <Popover.Content\n              onOpenAutoFocus={(event) => event.preventDefault()}\n              onCloseAutoFocus={(event) => event.preventDefault()}\n              className=\"ShareableLinkDialog__popover\"\n              side=\"top\"\n              align=\"end\"\n              sideOffset={5.5}\n            >\n              {tablerCheckIcon} copied\n            </Popover.Content>\n          </Popover.Root>\n        </div>\n        <div className=\"ShareableLinkDialog__description\">\n          ðŸ”’ {t(\"alerts.uploadedSecurly\")}\n        </div>\n      </div>\n    </Dialog>\n  );\n};\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}