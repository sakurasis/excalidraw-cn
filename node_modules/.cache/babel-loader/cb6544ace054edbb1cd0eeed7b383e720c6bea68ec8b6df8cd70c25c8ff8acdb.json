{"ast":null,"code":"import _slicedToArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import{useEffect}from\"react\";import{atom,useAtom}from\"jotai\";import throttle from\"lodash.throttle\";var scrollPositionAtom=atom(0);export var useScrollPosition=function useScrollPosition(elementRef){var _useAtom=useAtom(scrollPositionAtom),_useAtom2=_slicedToArray(_useAtom,2),scrollPosition=_useAtom2[0],setScrollPosition=_useAtom2[1];useEffect(function(){var element=elementRef.current;if(!element){return;}var handleScroll=throttle(function(){var scrollTop=element.scrollTop;setScrollPosition(scrollTop);},200);element.addEventListener(\"scroll\",handleScroll);return function(){handleScroll.cancel();element.removeEventListener(\"scroll\",handleScroll);};},[elementRef,setScrollPosition]);return scrollPosition;};","map":{"version":3,"names":["useEffect","atom","useAtom","throttle","scrollPositionAtom","useScrollPosition","elementRef","_useAtom","_useAtom2","_slicedToArray","scrollPosition","setScrollPosition","element","current","handleScroll","scrollTop","addEventListener","cancel","removeEventListener"],"sources":["D:/project/excalidraw-cn/src/hooks/useScrollPosition.ts"],"sourcesContent":["import { useEffect } from \"react\";\nimport { atom, useAtom } from \"jotai\";\nimport throttle from \"lodash.throttle\";\n\nconst scrollPositionAtom = atom<number>(0);\n\nexport const useScrollPosition = <T extends HTMLElement>(\n  elementRef: React.RefObject<T>,\n) => {\n  const [scrollPosition, setScrollPosition] = useAtom(scrollPositionAtom);\n\n  useEffect(() => {\n    const { current: element } = elementRef;\n    if (!element) {\n      return;\n    }\n\n    const handleScroll = throttle(() => {\n      const { scrollTop } = element;\n      setScrollPosition(scrollTop);\n    }, 200);\n\n    element.addEventListener(\"scroll\", handleScroll);\n\n    return () => {\n      handleScroll.cancel();\n      element.removeEventListener(\"scroll\", handleScroll);\n    };\n  }, [elementRef, setScrollPosition]);\n\n  return scrollPosition;\n};\n"],"mappings":"8GAAA,OAASA,SAAS,KAAQ,OAAO,CACjC,OAASC,IAAI,CAAEC,OAAO,KAAQ,OAAO,CACrC,MAAO,CAAAC,QAAQ,KAAM,iBAAiB,CAEtC,GAAM,CAAAC,kBAAkB,CAAGH,IAAI,CAAS,CAAC,CAAC,CAE1C,MAAO,IAAM,CAAAI,iBAAiB,CAAG,QAApB,CAAAA,iBAAiBA,CAC5BC,UAA8B,CAC3B,CACH,IAAAC,QAAA,CAA4CL,OAAO,CAACE,kBAAkB,CAAC,CAAAI,SAAA,CAAAC,cAAA,CAAAF,QAAA,IAAhEG,cAAc,CAAAF,SAAA,IAAEG,iBAAiB,CAAAH,SAAA,IAExCR,SAAS,CAAC,UAAM,CACd,GAAiB,CAAAY,OAAO,CAAKN,UAAU,CAA/BO,OAAO,CACf,GAAI,CAACD,OAAO,CAAE,CACZ,OACF,CAEA,GAAM,CAAAE,YAAY,CAAGX,QAAQ,CAAC,UAAM,CAClC,GAAQ,CAAAY,SAAS,CAAKH,OAAO,CAArBG,SAAS,CACjBJ,iBAAiB,CAACI,SAAS,CAAC,CAC9B,CAAC,CAAE,GAAG,CAAC,CAEPH,OAAO,CAACI,gBAAgB,CAAC,QAAQ,CAAEF,YAAY,CAAC,CAEhD,MAAO,WAAM,CACXA,YAAY,CAACG,MAAM,EAAE,CACrBL,OAAO,CAACM,mBAAmB,CAAC,QAAQ,CAAEJ,YAAY,CAAC,CACrD,CAAC,CACH,CAAC,CAAE,CAACR,UAAU,CAAEK,iBAAiB,CAAC,CAAC,CAEnC,MAAO,CAAAD,cAAc,CACvB,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}