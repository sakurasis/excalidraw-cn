{"ast":null,"code":"import { unstable_createStore, useAtom } from \"jotai\";\nimport { useLayoutEffect } from \"react\";\nexport const jotaiScope = Symbol();\nexport const jotaiStore = unstable_createStore();\nexport const useAtomWithInitialValue = (atom, initialValue) => {\n  const [value, setValue] = useAtom(atom);\n  useLayoutEffect(() => {\n    if (typeof initialValue === \"function\") {\n      // @ts-ignore\n      setValue(initialValue());\n    } else {\n      setValue(initialValue);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n  return [value, setValue];\n};","map":{"version":3,"names":["unstable_createStore","useAtom","useLayoutEffect","jotaiScope","Symbol","jotaiStore","useAtomWithInitialValue","atom","initialValue","value","setValue"],"sources":["D:/project/excalidraw-cn/src/jotai.ts"],"sourcesContent":["import { PrimitiveAtom, unstable_createStore, useAtom } from \"jotai\";\nimport { useLayoutEffect } from \"react\";\n\nexport const jotaiScope = Symbol();\nexport const jotaiStore = unstable_createStore();\n\nexport const useAtomWithInitialValue = <\n  T extends unknown,\n  A extends PrimitiveAtom<T>,\n>(\n  atom: A,\n  initialValue: T | (() => T),\n) => {\n  const [value, setValue] = useAtom(atom);\n\n  useLayoutEffect(() => {\n    if (typeof initialValue === \"function\") {\n      // @ts-ignore\n      setValue(initialValue());\n    } else {\n      setValue(initialValue);\n    }\n    // eslint-disable-next-line react-hooks/exhaustive-deps\n  }, []);\n\n  return [value, setValue] as const;\n};\n"],"mappings":"AAAA,SAAwBA,oBAAoB,EAAEC,OAAO,QAAQ,OAAO;AACpE,SAASC,eAAe,QAAQ,OAAO;AAEvC,OAAO,MAAMC,UAAU,GAAGC,MAAM,EAAE;AAClC,OAAO,MAAMC,UAAU,GAAGL,oBAAoB,EAAE;AAEhD,OAAO,MAAMM,uBAAuB,GAAGA,CAIrCC,IAAO,EACPC,YAA2B,KACxB;EACH,MAAM,CAACC,KAAK,EAAEC,QAAQ,CAAC,GAAGT,OAAO,CAACM,IAAI,CAAC;EAEvCL,eAAe,CAAC,MAAM;IACpB,IAAI,OAAOM,YAAY,KAAK,UAAU,EAAE;MACtC;MACAE,QAAQ,CAACF,YAAY,EAAE,CAAC;IAC1B,CAAC,MAAM;MACLE,QAAQ,CAACF,YAAY,CAAC;IACxB;IACA;EACF,CAAC,EAAE,EAAE,CAAC;EAEN,OAAO,CAACC,KAAK,EAAEC,QAAQ,CAAC;AAC1B,CAAC"},"metadata":{},"sourceType":"module","externalDependencies":[]}