{"ast":null,"code":"import _toConsumableArray from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _createForOfIteratorHelper from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/createForOfIteratorHelper.js\";import _defineProperty from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/defineProperty.js\";import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import{BOUND_TEXT_PADDING,ROUNDNESS,VERTICAL_ALIGN,TEXT_ALIGN}from\"../constants\";import{isTextElement,newElement}from\"../element\";import{mutateElement}from\"../element/mutateElement\";import{computeBoundTextPosition,computeContainerDimensionForBoundText,getBoundTextElement,measureText,redrawTextBoundingBox}from\"../element/textElement\";import{getOriginalContainerHeightFromCache,resetOriginalContainerCache,updateOriginalContainerCache}from\"../element/textWysiwyg\";import{hasBoundTextElement,isTextBindableContainer,isUsingAdaptiveRadius}from\"../element/typeChecks\";import{getFontString}from\"../utils\";import{register}from\"./register\";export var actionUnbindText=register({name:\"unbindText\",contextItemLabel:\"labels.unbindText\",trackEvent:{category:\"element\"},predicate:function predicate(elements,appState,_,app){var selectedElements=app.scene.getSelectedElements(appState);return selectedElements.some(function(element){return hasBoundTextElement(element);});},perform:function perform(elements,appState,_,app){var selectedElements=app.scene.getSelectedElements(appState);selectedElements.forEach(function(element){var boundTextElement=getBoundTextElement(element);if(boundTextElement){var _element$boundElement;var _measureText=measureText(boundTextElement.originalText,getFontString(boundTextElement),boundTextElement.lineHeight),width=_measureText.width,height=_measureText.height,baseline=_measureText.baseline;var originalContainerHeight=getOriginalContainerHeightFromCache(element.id);resetOriginalContainerCache(element.id);var _computeBoundTextPosi=computeBoundTextPosition(element,boundTextElement),x=_computeBoundTextPosi.x,y=_computeBoundTextPosi.y;mutateElement(boundTextElement,{containerId:null,width:width,height:height,baseline:baseline,text:boundTextElement.originalText,x:x,y:y});mutateElement(element,{boundElements:(_element$boundElement=element.boundElements)===null||_element$boundElement===void 0?void 0:_element$boundElement.filter(function(ele){return ele.id!==boundTextElement.id;}),height:originalContainerHeight?originalContainerHeight:element.height});}});return{elements:elements,appState:appState,commitToHistory:true};}});export var actionBindText=register({name:\"bindText\",contextItemLabel:\"labels.bindText\",trackEvent:{category:\"element\"},predicate:function predicate(elements,appState,_,app){var selectedElements=app.scene.getSelectedElements(appState);if(selectedElements.length===2){var textElement=isTextElement(selectedElements[0])||isTextElement(selectedElements[1]);var bindingContainer;if(isTextBindableContainer(selectedElements[0])){bindingContainer=selectedElements[0];}else if(isTextBindableContainer(selectedElements[1])){bindingContainer=selectedElements[1];}if(textElement&&bindingContainer&&getBoundTextElement(bindingContainer)===null){return true;}}return false;},perform:function perform(elements,appState,_,app){var selectedElements=app.scene.getSelectedElements(appState);var textElement;var container;if(isTextElement(selectedElements[0])&&isTextBindableContainer(selectedElements[1])){textElement=selectedElements[0];container=selectedElements[1];}else{textElement=selectedElements[1];container=selectedElements[0];}mutateElement(textElement,{containerId:container.id,verticalAlign:VERTICAL_ALIGN.MIDDLE,textAlign:TEXT_ALIGN.CENTER});mutateElement(container,{boundElements:(container.boundElements||[]).concat({type:\"text\",id:textElement.id})});var originalContainerHeight=container.height;redrawTextBoundingBox(textElement,container);// overwritting the cache with original container height so\n// it can be restored when unbind\nupdateOriginalContainerCache(container.id,originalContainerHeight);return{elements:pushTextAboveContainer(elements,container,textElement),appState:_objectSpread(_objectSpread({},appState),{},{selectedElementIds:_defineProperty({},container.id,true)}),commitToHistory:true};}});var pushTextAboveContainer=function pushTextAboveContainer(elements,container,textElement){var updatedElements=elements.slice();var textElementIndex=updatedElements.findIndex(function(ele){return ele.id===textElement.id;});updatedElements.splice(textElementIndex,1);var containerIndex=updatedElements.findIndex(function(ele){return ele.id===container.id;});updatedElements.splice(containerIndex+1,0,textElement);return updatedElements;};var pushContainerBelowText=function pushContainerBelowText(elements,container,textElement){var updatedElements=elements.slice();var containerIndex=updatedElements.findIndex(function(ele){return ele.id===container.id;});updatedElements.splice(containerIndex,1);var textElementIndex=updatedElements.findIndex(function(ele){return ele.id===textElement.id;});updatedElements.splice(textElementIndex,0,container);return updatedElements;};export var actionWrapTextInContainer=register({name:\"wrapTextInContainer\",contextItemLabel:\"labels.createContainerFromText\",trackEvent:{category:\"element\"},predicate:function predicate(elements,appState,_,app){var selectedElements=app.scene.getSelectedElements(appState);var areTextElements=selectedElements.every(function(el){return isTextElement(el);});return selectedElements.length>0&&areTextElements;},perform:function perform(elements,appState,_,app){var selectedElements=app.scene.getSelectedElements(appState);var updatedElements=elements.slice();var containerIds={};var _iterator=_createForOfIteratorHelper(selectedElements),_step;try{var _loop=function _loop(){var textElement=_step.value;if(isTextElement(textElement)){var _textElement$boundEle;var container=newElement({type:\"rectangle\",backgroundColor:appState.currentItemBackgroundColor,boundElements:[].concat(_toConsumableArray(textElement.boundElements||[]),[{id:textElement.id,type:\"text\"}]),angle:textElement.angle,fillStyle:appState.currentItemFillStyle,strokeColor:appState.currentItemStrokeColor,roughness:appState.currentItemRoughness,strokeWidth:appState.currentItemStrokeWidth,strokeStyle:appState.currentItemStrokeStyle,roundness:appState.currentItemRoundness===\"round\"?{type:isUsingAdaptiveRadius(\"rectangle\")?ROUNDNESS.ADAPTIVE_RADIUS:ROUNDNESS.PROPORTIONAL_RADIUS}:null,opacity:100,locked:false,x:textElement.x-BOUND_TEXT_PADDING,y:textElement.y-BOUND_TEXT_PADDING,width:computeContainerDimensionForBoundText(textElement.width,\"rectangle\"),height:computeContainerDimensionForBoundText(textElement.height,\"rectangle\"),groupIds:textElement.groupIds,frameId:textElement.frameId});// update bindings\nif((_textElement$boundEle=textElement.boundElements)!==null&&_textElement$boundEle!==void 0&&_textElement$boundEle.length){var linearElementIds=textElement.boundElements.filter(function(ele){return ele.type===\"arrow\";}).map(function(el){return el.id;});var linearElements=updatedElements.filter(function(ele){return linearElementIds.includes(ele.id);});linearElements.forEach(function(ele){var _startBinding,_endBinding;var startBinding=ele.startBinding;var endBinding=ele.endBinding;if(((_startBinding=startBinding)===null||_startBinding===void 0?void 0:_startBinding.elementId)===textElement.id){startBinding=_objectSpread(_objectSpread({},startBinding),{},{elementId:container.id});}if(((_endBinding=endBinding)===null||_endBinding===void 0?void 0:_endBinding.elementId)===textElement.id){endBinding=_objectSpread(_objectSpread({},endBinding),{},{elementId:container.id});}if(startBinding||endBinding){mutateElement(ele,{startBinding:startBinding,endBinding:endBinding},false);}});}mutateElement(textElement,{containerId:container.id,verticalAlign:VERTICAL_ALIGN.MIDDLE,boundElements:null,textAlign:TEXT_ALIGN.CENTER},false);redrawTextBoundingBox(textElement,container);updatedElements=pushContainerBelowText([].concat(_toConsumableArray(updatedElements),[container]),container,textElement);containerIds[container.id]=true;}};for(_iterator.s();!(_step=_iterator.n()).done;){_loop();}}catch(err){_iterator.e(err);}finally{_iterator.f();}return{elements:updatedElements,appState:_objectSpread(_objectSpread({},appState),{},{selectedElementIds:containerIds}),commitToHistory:true};}});","map":{"version":3,"names":["BOUND_TEXT_PADDING","ROUNDNESS","VERTICAL_ALIGN","TEXT_ALIGN","isTextElement","newElement","mutateElement","computeBoundTextPosition","computeContainerDimensionForBoundText","getBoundTextElement","measureText","redrawTextBoundingBox","getOriginalContainerHeightFromCache","resetOriginalContainerCache","updateOriginalContainerCache","hasBoundTextElement","isTextBindableContainer","isUsingAdaptiveRadius","getFontString","register","actionUnbindText","name","contextItemLabel","trackEvent","category","predicate","elements","appState","_","app","selectedElements","scene","getSelectedElements","some","element","perform","forEach","boundTextElement","_element$boundElement","_measureText","originalText","lineHeight","width","height","baseline","originalContainerHeight","id","_computeBoundTextPosi","x","y","containerId","text","boundElements","filter","ele","commitToHistory","actionBindText","length","textElement","bindingContainer","container","verticalAlign","MIDDLE","textAlign","CENTER","concat","type","pushTextAboveContainer","_objectSpread","selectedElementIds","_defineProperty","updatedElements","slice","textElementIndex","findIndex","splice","containerIndex","pushContainerBelowText","actionWrapTextInContainer","areTextElements","every","el","containerIds","_iterator","_createForOfIteratorHelper","_step","_loop","value","_textElement$boundEle","backgroundColor","currentItemBackgroundColor","_toConsumableArray","angle","fillStyle","currentItemFillStyle","strokeColor","currentItemStrokeColor","roughness","currentItemRoughness","strokeWidth","currentItemStrokeWidth","strokeStyle","currentItemStrokeStyle","roundness","currentItemRoundness","ADAPTIVE_RADIUS","PROPORTIONAL_RADIUS","opacity","locked","groupIds","frameId","linearElementIds","map","linearElements","includes","_startBinding","_endBinding","startBinding","endBinding","elementId","s","n","done","err","e","f"],"sources":["D:/project/excalidraw-cn/src/actions/actionBoundText.tsx"],"sourcesContent":["import {\n  BOUND_TEXT_PADDING,\n  ROUNDNESS,\n  VERTICAL_ALIGN,\n  TEXT_ALIGN,\n} from \"../constants\";\nimport { isTextElement, newElement } from \"../element\";\nimport { mutateElement } from \"../element/mutateElement\";\nimport {\n  computeBoundTextPosition,\n  computeContainerDimensionForBoundText,\n  getBoundTextElement,\n  measureText,\n  redrawTextBoundingBox,\n} from \"../element/textElement\";\nimport {\n  getOriginalContainerHeightFromCache,\n  resetOriginalContainerCache,\n  updateOriginalContainerCache,\n} from \"../element/textWysiwyg\";\nimport {\n  hasBoundTextElement,\n  isTextBindableContainer,\n  isUsingAdaptiveRadius,\n} from \"../element/typeChecks\";\nimport {\n  ExcalidrawElement,\n  ExcalidrawLinearElement,\n  ExcalidrawTextContainer,\n  ExcalidrawTextElement,\n} from \"../element/types\";\nimport { AppState } from \"../types\";\nimport { Mutable } from \"../utility-types\";\nimport { getFontString } from \"../utils\";\nimport { register } from \"./register\";\n\nexport const actionUnbindText = register({\n  name: \"unbindText\",\n  contextItemLabel: \"labels.unbindText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    return selectedElements.some((element) => hasBoundTextElement(element));\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    selectedElements.forEach((element) => {\n      const boundTextElement = getBoundTextElement(element);\n      if (boundTextElement) {\n        const { width, height, baseline } = measureText(\n          boundTextElement.originalText,\n          getFontString(boundTextElement),\n          boundTextElement.lineHeight,\n        );\n        const originalContainerHeight = getOriginalContainerHeightFromCache(\n          element.id,\n        );\n        resetOriginalContainerCache(element.id);\n        const { x, y } = computeBoundTextPosition(element, boundTextElement);\n        mutateElement(boundTextElement as ExcalidrawTextElement, {\n          containerId: null,\n          width,\n          height,\n          baseline,\n          text: boundTextElement.originalText,\n          x,\n          y,\n        });\n        mutateElement(element, {\n          boundElements: element.boundElements?.filter(\n            (ele) => ele.id !== boundTextElement.id,\n          ),\n          height: originalContainerHeight\n            ? originalContainerHeight\n            : element.height,\n        });\n      }\n    });\n    return {\n      elements,\n      appState,\n      commitToHistory: true,\n    };\n  },\n});\n\nexport const actionBindText = register({\n  name: \"bindText\",\n  contextItemLabel: \"labels.bindText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    if (selectedElements.length === 2) {\n      const textElement =\n        isTextElement(selectedElements[0]) ||\n        isTextElement(selectedElements[1]);\n\n      let bindingContainer;\n      if (isTextBindableContainer(selectedElements[0])) {\n        bindingContainer = selectedElements[0];\n      } else if (isTextBindableContainer(selectedElements[1])) {\n        bindingContainer = selectedElements[1];\n      }\n      if (\n        textElement &&\n        bindingContainer &&\n        getBoundTextElement(bindingContainer) === null\n      ) {\n        return true;\n      }\n    }\n    return false;\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n\n    let textElement: ExcalidrawTextElement;\n    let container: ExcalidrawTextContainer;\n\n    if (\n      isTextElement(selectedElements[0]) &&\n      isTextBindableContainer(selectedElements[1])\n    ) {\n      textElement = selectedElements[0];\n      container = selectedElements[1];\n    } else {\n      textElement = selectedElements[1] as ExcalidrawTextElement;\n      container = selectedElements[0] as ExcalidrawTextContainer;\n    }\n    mutateElement(textElement, {\n      containerId: container.id,\n      verticalAlign: VERTICAL_ALIGN.MIDDLE,\n      textAlign: TEXT_ALIGN.CENTER,\n    });\n    mutateElement(container, {\n      boundElements: (container.boundElements || []).concat({\n        type: \"text\",\n        id: textElement.id,\n      }),\n    });\n    const originalContainerHeight = container.height;\n    redrawTextBoundingBox(textElement, container);\n    // overwritting the cache with original container height so\n    // it can be restored when unbind\n    updateOriginalContainerCache(container.id, originalContainerHeight);\n\n    return {\n      elements: pushTextAboveContainer(elements, container, textElement),\n      appState: { ...appState, selectedElementIds: { [container.id]: true } },\n      commitToHistory: true,\n    };\n  },\n});\n\nconst pushTextAboveContainer = (\n  elements: readonly ExcalidrawElement[],\n  container: ExcalidrawElement,\n  textElement: ExcalidrawTextElement,\n) => {\n  const updatedElements = elements.slice();\n  const textElementIndex = updatedElements.findIndex(\n    (ele) => ele.id === textElement.id,\n  );\n  updatedElements.splice(textElementIndex, 1);\n\n  const containerIndex = updatedElements.findIndex(\n    (ele) => ele.id === container.id,\n  );\n  updatedElements.splice(containerIndex + 1, 0, textElement);\n  return updatedElements;\n};\n\nconst pushContainerBelowText = (\n  elements: readonly ExcalidrawElement[],\n  container: ExcalidrawElement,\n  textElement: ExcalidrawTextElement,\n) => {\n  const updatedElements = elements.slice();\n  const containerIndex = updatedElements.findIndex(\n    (ele) => ele.id === container.id,\n  );\n  updatedElements.splice(containerIndex, 1);\n\n  const textElementIndex = updatedElements.findIndex(\n    (ele) => ele.id === textElement.id,\n  );\n  updatedElements.splice(textElementIndex, 0, container);\n  return updatedElements;\n};\n\nexport const actionWrapTextInContainer = register({\n  name: \"wrapTextInContainer\",\n  contextItemLabel: \"labels.createContainerFromText\",\n  trackEvent: { category: \"element\" },\n  predicate: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    const areTextElements = selectedElements.every((el) => isTextElement(el));\n    return selectedElements.length > 0 && areTextElements;\n  },\n  perform: (elements, appState, _, app) => {\n    const selectedElements = app.scene.getSelectedElements(appState);\n    let updatedElements: readonly ExcalidrawElement[] = elements.slice();\n    const containerIds: Mutable<AppState[\"selectedElementIds\"]> = {};\n\n    for (const textElement of selectedElements) {\n      if (isTextElement(textElement)) {\n        const container = newElement({\n          type: \"rectangle\",\n          backgroundColor: appState.currentItemBackgroundColor,\n          boundElements: [\n            ...(textElement.boundElements || []),\n            { id: textElement.id, type: \"text\" },\n          ],\n          angle: textElement.angle,\n          fillStyle: appState.currentItemFillStyle,\n          strokeColor: appState.currentItemStrokeColor,\n          roughness: appState.currentItemRoughness,\n          strokeWidth: appState.currentItemStrokeWidth,\n          strokeStyle: appState.currentItemStrokeStyle,\n          roundness:\n            appState.currentItemRoundness === \"round\"\n              ? {\n                  type: isUsingAdaptiveRadius(\"rectangle\")\n                    ? ROUNDNESS.ADAPTIVE_RADIUS\n                    : ROUNDNESS.PROPORTIONAL_RADIUS,\n                }\n              : null,\n          opacity: 100,\n          locked: false,\n          x: textElement.x - BOUND_TEXT_PADDING,\n          y: textElement.y - BOUND_TEXT_PADDING,\n          width: computeContainerDimensionForBoundText(\n            textElement.width,\n            \"rectangle\",\n          ),\n          height: computeContainerDimensionForBoundText(\n            textElement.height,\n            \"rectangle\",\n          ),\n          groupIds: textElement.groupIds,\n          frameId: textElement.frameId,\n        });\n\n        // update bindings\n        if (textElement.boundElements?.length) {\n          const linearElementIds = textElement.boundElements\n            .filter((ele) => ele.type === \"arrow\")\n            .map((el) => el.id);\n          const linearElements = updatedElements.filter((ele) =>\n            linearElementIds.includes(ele.id),\n          ) as ExcalidrawLinearElement[];\n          linearElements.forEach((ele) => {\n            let startBinding = ele.startBinding;\n            let endBinding = ele.endBinding;\n\n            if (startBinding?.elementId === textElement.id) {\n              startBinding = {\n                ...startBinding,\n                elementId: container.id,\n              };\n            }\n\n            if (endBinding?.elementId === textElement.id) {\n              endBinding = { ...endBinding, elementId: container.id };\n            }\n\n            if (startBinding || endBinding) {\n              mutateElement(ele, { startBinding, endBinding }, false);\n            }\n          });\n        }\n\n        mutateElement(\n          textElement,\n          {\n            containerId: container.id,\n            verticalAlign: VERTICAL_ALIGN.MIDDLE,\n            boundElements: null,\n            textAlign: TEXT_ALIGN.CENTER,\n          },\n          false,\n        );\n        redrawTextBoundingBox(textElement, container);\n\n        updatedElements = pushContainerBelowText(\n          [...updatedElements, container],\n          container,\n          textElement,\n        );\n        containerIds[container.id] = true;\n      }\n    }\n\n    return {\n      elements: updatedElements,\n      appState: {\n        ...appState,\n        selectedElementIds: containerIds,\n      },\n      commitToHistory: true,\n    };\n  },\n});\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}