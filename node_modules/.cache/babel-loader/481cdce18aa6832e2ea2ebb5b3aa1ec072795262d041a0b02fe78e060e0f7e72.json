{"ast":null,"code":"import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _objectWithoutProperties from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";var _excluded=[\"onConfirm\",\"onCancel\",\"children\",\"confirmText\",\"cancelText\",\"className\"];import{t}from\"../i18n\";import{Dialog}from\"./Dialog\";import\"./ConfirmDialog.scss\";import DialogActionButton from\"./DialogActionButton\";import{useSetAtom}from\"jotai\";import{isLibraryMenuOpenAtom}from\"./LibraryMenu\";import{useExcalidrawContainer,useExcalidrawSetAppState}from\"./App\";import{jotaiScope}from\"../jotai\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var ConfirmDialog=function ConfirmDialog(props){var onConfirm=props.onConfirm,onCancel=props.onCancel,children=props.children,_props$confirmText=props.confirmText,confirmText=_props$confirmText===void 0?t(\"buttons.confirm\"):_props$confirmText,_props$cancelText=props.cancelText,cancelText=_props$cancelText===void 0?t(\"buttons.cancel\"):_props$cancelText,_props$className=props.className,className=_props$className===void 0?\"\":_props$className,rest=_objectWithoutProperties(props,_excluded);var setAppState=useExcalidrawSetAppState();var setIsLibraryMenuOpen=useSetAtom(isLibraryMenuOpenAtom,jotaiScope);var _useExcalidrawContain=useExcalidrawContainer(),container=_useExcalidrawContain.container;return/*#__PURE__*/_jsxs(Dialog,_objectSpread(_objectSpread({onCloseRequest:onCancel,size:\"small\"},rest),{},{className:\"confirm-dialog \".concat(className),children:[children,/*#__PURE__*/_jsxs(\"div\",{className:\"confirm-dialog-buttons\",children:[/*#__PURE__*/_jsx(DialogActionButton,{label:cancelText,onClick:function onClick(){setAppState({openMenu:null});setIsLibraryMenuOpen(false);onCancel();container===null||container===void 0?void 0:container.focus();}}),/*#__PURE__*/_jsx(DialogActionButton,{label:confirmText,onClick:function onClick(){setAppState({openMenu:null});setIsLibraryMenuOpen(false);onConfirm();container===null||container===void 0?void 0:container.focus();},actionType:\"danger\"})]})]}));};export default ConfirmDialog;","map":{"version":3,"names":["t","Dialog","DialogActionButton","useSetAtom","isLibraryMenuOpenAtom","useExcalidrawContainer","useExcalidrawSetAppState","jotaiScope","jsx","_jsx","jsxs","_jsxs","ConfirmDialog","props","onConfirm","onCancel","children","_props$confirmText","confirmText","_props$cancelText","cancelText","_props$className","className","rest","_objectWithoutProperties","_excluded","setAppState","setIsLibraryMenuOpen","_useExcalidrawContain","container","_objectSpread","onCloseRequest","size","concat","label","onClick","openMenu","focus","actionType"],"sources":["D:/project/excalidraw-cn/src/components/ConfirmDialog.tsx"],"sourcesContent":["import { t } from \"../i18n\";\nimport { Dialog, DialogProps } from \"./Dialog\";\n\nimport \"./ConfirmDialog.scss\";\nimport DialogActionButton from \"./DialogActionButton\";\nimport { useSetAtom } from \"jotai\";\nimport { isLibraryMenuOpenAtom } from \"./LibraryMenu\";\nimport { useExcalidrawContainer, useExcalidrawSetAppState } from \"./App\";\nimport { jotaiScope } from \"../jotai\";\n\ninterface Props extends Omit<DialogProps, \"onCloseRequest\"> {\n  onConfirm: () => void;\n  onCancel: () => void;\n  confirmText?: string;\n  cancelText?: string;\n}\nconst ConfirmDialog = (props: Props) => {\n  const {\n    onConfirm,\n    onCancel,\n    children,\n    confirmText = t(\"buttons.confirm\"),\n    cancelText = t(\"buttons.cancel\"),\n    className = \"\",\n    ...rest\n  } = props;\n  const setAppState = useExcalidrawSetAppState();\n  const setIsLibraryMenuOpen = useSetAtom(isLibraryMenuOpenAtom, jotaiScope);\n  const { container } = useExcalidrawContainer();\n\n  return (\n    <Dialog\n      onCloseRequest={onCancel}\n      size=\"small\"\n      {...rest}\n      className={`confirm-dialog ${className}`}\n    >\n      {children}\n      <div className=\"confirm-dialog-buttons\">\n        <DialogActionButton\n          label={cancelText}\n          onClick={() => {\n            setAppState({ openMenu: null });\n            setIsLibraryMenuOpen(false);\n            onCancel();\n            container?.focus();\n          }}\n        />\n        <DialogActionButton\n          label={confirmText}\n          onClick={() => {\n            setAppState({ openMenu: null });\n            setIsLibraryMenuOpen(false);\n            onConfirm();\n            container?.focus();\n          }}\n          actionType=\"danger\"\n        />\n      </div>\n    </Dialog>\n  );\n};\nexport default ConfirmDialog;\n"],"mappings":"wUAAA,OAASA,CAAC,KAAQ,SAAS,CAC3B,OAASC,MAAM,KAAqB,UAAU,CAE9C,MAAO,sBAAsB,CAC7B,MAAO,CAAAC,kBAAkB,KAAM,sBAAsB,CACrD,OAASC,UAAU,KAAQ,OAAO,CAClC,OAASC,qBAAqB,KAAQ,eAAe,CACrD,OAASC,sBAAsB,CAAEC,wBAAwB,KAAQ,OAAO,CACxE,OAASC,UAAU,KAAQ,UAAU,CAAC,OAAAC,GAAA,IAAAC,IAAA,gCAAAC,IAAA,IAAAC,KAAA,yBAQtC,GAAM,CAAAC,aAAa,CAAG,QAAhB,CAAAA,aAAaA,CAAIC,KAAY,CAAK,CACtC,GACE,CAAAC,SAAS,CAOPD,KAAK,CAPPC,SAAS,CACTC,QAAQ,CAMNF,KAAK,CANPE,QAAQ,CACRC,QAAQ,CAKNH,KAAK,CALPG,QAAQ,CAAAC,kBAAA,CAKNJ,KAAK,CAJPK,WAAW,CAAXA,WAAW,CAAAD,kBAAA,UAAGjB,CAAC,CAAC,iBAAiB,CAAC,CAAAiB,kBAAA,CAAAE,iBAAA,CAIhCN,KAAK,CAHPO,UAAU,CAAVA,UAAU,CAAAD,iBAAA,UAAGnB,CAAC,CAAC,gBAAgB,CAAC,CAAAmB,iBAAA,CAAAE,gBAAA,CAG9BR,KAAK,CAFPS,SAAS,CAATA,SAAS,CAAAD,gBAAA,UAAG,EAAE,CAAAA,gBAAA,CACXE,IAAI,CAAAC,wBAAA,CACLX,KAAK,CAAAY,SAAA,EACT,GAAM,CAAAC,WAAW,CAAGpB,wBAAwB,EAAE,CAC9C,GAAM,CAAAqB,oBAAoB,CAAGxB,UAAU,CAACC,qBAAqB,CAAEG,UAAU,CAAC,CAC1E,IAAAqB,qBAAA,CAAsBvB,sBAAsB,EAAE,CAAtCwB,SAAS,CAAAD,qBAAA,CAATC,SAAS,CAEjB,mBACElB,KAAA,CAACV,MAAM,CAAA6B,aAAA,CAAAA,aAAA,EACLC,cAAc,CAAEhB,QAAS,CACzBiB,IAAI,CAAC,OAAO,EACRT,IAAI,MACRD,SAAS,mBAAAW,MAAA,CAAoBX,SAAS,CAAG,CAAAN,QAAA,EAExCA,QAAQ,cACTL,KAAA,QAAKW,SAAS,CAAC,wBAAwB,CAAAN,QAAA,eACrCP,IAAA,CAACP,kBAAkB,EACjBgC,KAAK,CAAEd,UAAW,CAClBe,OAAO,CAAE,SAAAA,QAAA,CAAM,CACbT,WAAW,CAAC,CAAEU,QAAQ,CAAE,IAAK,CAAC,CAAC,CAC/BT,oBAAoB,CAAC,KAAK,CAAC,CAC3BZ,QAAQ,EAAE,CACVc,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEQ,KAAK,EAAE,CACpB,CAAE,EACF,cACF5B,IAAA,CAACP,kBAAkB,EACjBgC,KAAK,CAAEhB,WAAY,CACnBiB,OAAO,CAAE,SAAAA,QAAA,CAAM,CACbT,WAAW,CAAC,CAAEU,QAAQ,CAAE,IAAK,CAAC,CAAC,CAC/BT,oBAAoB,CAAC,KAAK,CAAC,CAC3Bb,SAAS,EAAE,CACXe,SAAS,SAATA,SAAS,iBAATA,SAAS,CAAEQ,KAAK,EAAE,CACpB,CAAE,CACFC,UAAU,CAAC,QAAQ,EACnB,GACE,IACC,CAEb,CAAC,CACD,cAAe,CAAA1B,aAAa"},"metadata":{},"sourceType":"module","externalDependencies":[]}