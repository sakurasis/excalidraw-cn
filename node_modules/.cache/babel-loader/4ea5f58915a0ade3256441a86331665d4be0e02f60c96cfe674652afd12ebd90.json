{"ast":null,"code":"import _objectWithoutProperties from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectWithoutProperties.js\";import _objectSpread from\"D:/project/excalidraw-cn/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";var _excluded=[\"children\"],_excluded2=[\"children\",\"className\",\"onDock\",\"docked\"];import clsx from\"clsx\";import{DEFAULT_SIDEBAR,LIBRARY_SIDEBAR_TAB}from\"../constants\";import{useTunnels}from\"../context/tunnels\";import{useUIAppState}from\"../context/ui-appState\";import{t}from\"../i18n\";import{composeEventHandlers}from\"../utils\";import{useExcalidrawSetAppState}from\"./App\";import{withInternalFallback}from\"./hoc/withInternalFallback\";import{LibraryMenu}from\"./LibraryMenu\";import{Sidebar}from\"./Sidebar/Sidebar\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{createElement as _createElement}from\"react\";var DefaultSidebarTrigger=withInternalFallback(\"DefaultSidebarTrigger\",function(props){var _useTunnels=useTunnels(),DefaultSidebarTriggerTunnel=_useTunnels.DefaultSidebarTriggerTunnel;return/*#__PURE__*/_jsx(DefaultSidebarTriggerTunnel.In,{children:/*#__PURE__*/_jsx(Sidebar.Trigger,_objectSpread(_objectSpread({},props),{},{className:\"default-sidebar-trigger\",name:DEFAULT_SIDEBAR.name}))});});DefaultSidebarTrigger.displayName=\"DefaultSidebarTrigger\";var DefaultTabTriggers=function DefaultTabTriggers(_ref){var children=_ref.children,rest=_objectWithoutProperties(_ref,_excluded);var _useTunnels2=useTunnels(),DefaultSidebarTabTriggersTunnel=_useTunnels2.DefaultSidebarTabTriggersTunnel;return/*#__PURE__*/_jsx(DefaultSidebarTabTriggersTunnel.In,{children:/*#__PURE__*/_jsx(Sidebar.TabTriggers,_objectSpread(_objectSpread({},rest),{},{children:children}))});};DefaultTabTriggers.displayName=\"DefaultTabTriggers\";export var DefaultSidebar=Object.assign(withInternalFallback(\"DefaultSidebar\",function(_ref2){var children=_ref2.children,className=_ref2.className,onDock=_ref2.onDock,docked=_ref2.docked,rest=_objectWithoutProperties(_ref2,_excluded2);var appState=useUIAppState();var setAppState=useExcalidrawSetAppState();var _useTunnels3=useTunnels(),DefaultSidebarTabTriggersTunnel=_useTunnels3.DefaultSidebarTabTriggersTunnel;return/*#__PURE__*/_createElement(Sidebar,_objectSpread(_objectSpread({},rest),{},{name:\"default\",key:\"default\",className:clsx(\"default-sidebar\",className),docked:docked!==null&&docked!==void 0?docked:appState.defaultSidebarDockedPreference,onDock:// `onDock=false` disables docking.\n// if `docked` passed, but no onDock passed, disable manual docking.\nonDock===false||!onDock&&docked!=null?undefined:// compose to allow the host app to listen on default behavior\ncomposeEventHandlers(onDock,function(docked){setAppState({defaultSidebarDockedPreference:docked});})}),/*#__PURE__*/_jsxs(Sidebar.Tabs,{children:[/*#__PURE__*/_jsxs(Sidebar.Header,{children:[rest.__fallback&&/*#__PURE__*/_jsx(\"div\",{style:{color:\"var(--color-primary)\",fontSize:\"1.2em\",fontWeight:\"bold\",textOverflow:\"ellipsis\",overflow:\"hidden\",whiteSpace:\"nowrap\",paddingRight:\"1em\"},children:t(\"toolBar.library\")}),/*#__PURE__*/_jsx(DefaultSidebarTabTriggersTunnel.Out,{})]}),/*#__PURE__*/_jsx(Sidebar.Tab,{tab:LIBRARY_SIDEBAR_TAB,children:/*#__PURE__*/_jsx(LibraryMenu,{})}),children]}));}),{Trigger:DefaultSidebarTrigger,TabTriggers:DefaultTabTriggers});","map":{"version":3,"names":["clsx","DEFAULT_SIDEBAR","LIBRARY_SIDEBAR_TAB","useTunnels","useUIAppState","t","composeEventHandlers","useExcalidrawSetAppState","withInternalFallback","LibraryMenu","Sidebar","jsx","_jsx","jsxs","_jsxs","createElement","_createElement","DefaultSidebarTrigger","props","_useTunnels","DefaultSidebarTriggerTunnel","In","children","Trigger","_objectSpread","className","name","displayName","DefaultTabTriggers","_ref","rest","_objectWithoutProperties","_excluded","_useTunnels2","DefaultSidebarTabTriggersTunnel","TabTriggers","DefaultSidebar","Object","assign","_ref2","onDock","docked","_excluded2","appState","setAppState","_useTunnels3","key","defaultSidebarDockedPreference","undefined","Tabs","Header","__fallback","style","color","fontSize","fontWeight","textOverflow","overflow","whiteSpace","paddingRight","Out","Tab","tab"],"sources":["D:/project/excalidraw-cn/src/components/DefaultSidebar.tsx"],"sourcesContent":["import clsx from \"clsx\";\nimport { DEFAULT_SIDEBAR, LIBRARY_SIDEBAR_TAB } from \"../constants\";\nimport { useTunnels } from \"../context/tunnels\";\nimport { useUIAppState } from \"../context/ui-appState\";\nimport { t } from \"../i18n\";\nimport { MarkOptional, Merge } from \"../utility-types\";\nimport { composeEventHandlers } from \"../utils\";\nimport { useExcalidrawSetAppState } from \"./App\";\nimport { withInternalFallback } from \"./hoc/withInternalFallback\";\nimport { LibraryMenu } from \"./LibraryMenu\";\nimport { SidebarProps, SidebarTriggerProps } from \"./Sidebar/common\";\nimport { Sidebar } from \"./Sidebar/Sidebar\";\n\nconst DefaultSidebarTrigger = withInternalFallback(\n  \"DefaultSidebarTrigger\",\n  (\n    props: Omit<SidebarTriggerProps, \"name\"> &\n      React.HTMLAttributes<HTMLDivElement>,\n  ) => {\n    const { DefaultSidebarTriggerTunnel } = useTunnels();\n    return (\n      <DefaultSidebarTriggerTunnel.In>\n        <Sidebar.Trigger\n          {...props}\n          className=\"default-sidebar-trigger\"\n          name={DEFAULT_SIDEBAR.name}\n        />\n      </DefaultSidebarTriggerTunnel.In>\n    );\n  },\n);\nDefaultSidebarTrigger.displayName = \"DefaultSidebarTrigger\";\n\nconst DefaultTabTriggers = ({\n  children,\n  ...rest\n}: { children: React.ReactNode } & React.HTMLAttributes<HTMLDivElement>) => {\n  const { DefaultSidebarTabTriggersTunnel } = useTunnels();\n  return (\n    <DefaultSidebarTabTriggersTunnel.In>\n      <Sidebar.TabTriggers {...rest}>{children}</Sidebar.TabTriggers>\n    </DefaultSidebarTabTriggersTunnel.In>\n  );\n};\nDefaultTabTriggers.displayName = \"DefaultTabTriggers\";\n\nexport const DefaultSidebar = Object.assign(\n  withInternalFallback(\n    \"DefaultSidebar\",\n    ({\n      children,\n      className,\n      onDock,\n      docked,\n      ...rest\n    }: Merge<\n      MarkOptional<Omit<SidebarProps, \"name\">, \"children\">,\n      {\n        /** pass `false` to disable docking */\n        onDock?: SidebarProps[\"onDock\"] | false;\n      }\n    >) => {\n      const appState = useUIAppState();\n      const setAppState = useExcalidrawSetAppState();\n\n      const { DefaultSidebarTabTriggersTunnel } = useTunnels();\n\n      return (\n        <Sidebar\n          {...rest}\n          name=\"default\"\n          key=\"default\"\n          className={clsx(\"default-sidebar\", className)}\n          docked={docked ?? appState.defaultSidebarDockedPreference}\n          onDock={\n            // `onDock=false` disables docking.\n            // if `docked` passed, but no onDock passed, disable manual docking.\n            onDock === false || (!onDock && docked != null)\n              ? undefined\n              : // compose to allow the host app to listen on default behavior\n                composeEventHandlers(onDock, (docked) => {\n                  setAppState({ defaultSidebarDockedPreference: docked });\n                })\n          }\n        >\n          <Sidebar.Tabs>\n            <Sidebar.Header>\n              {rest.__fallback && (\n                <div\n                  style={{\n                    color: \"var(--color-primary)\",\n                    fontSize: \"1.2em\",\n                    fontWeight: \"bold\",\n                    textOverflow: \"ellipsis\",\n                    overflow: \"hidden\",\n                    whiteSpace: \"nowrap\",\n                    paddingRight: \"1em\",\n                  }}\n                >\n                  {t(\"toolBar.library\")}\n                </div>\n              )}\n              <DefaultSidebarTabTriggersTunnel.Out />\n            </Sidebar.Header>\n            <Sidebar.Tab tab={LIBRARY_SIDEBAR_TAB}>\n              <LibraryMenu />\n            </Sidebar.Tab>\n            {children}\n          </Sidebar.Tabs>\n        </Sidebar>\n      );\n    },\n  ),\n  {\n    Trigger: DefaultSidebarTrigger,\n    TabTriggers: DefaultTabTriggers,\n  },\n);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}